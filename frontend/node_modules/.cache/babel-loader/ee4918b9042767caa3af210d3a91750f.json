{"ast":null,"code":"import _classCallCheck from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/var/www/html/ReactReduxHR/frontend/src/modules/myProfile/containers/myProfile.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport PropTypes from 'prop-types';\nimport { notify } from '../../../services/notify';\nimport Menu from '../../../components/generic/Menu';\nimport { isNotUserValid } from '../../../services/generic';\nimport Header from '../../../components/generic/Header';\nimport UserHorizontalView from '../../../components/generic/UserHorizontalView';\nimport PayslipHistory from '../../../components/salary/userSalary/PayslipHistory';\nimport FormProfileDetails from '../../../modules/myProfile/components/FormProfileDetails';\nimport FormBankDetails from '../../../modules/myProfile/components/FormBankDetails';\nimport FormUpdatePassword from '../../../modules/myProfile/components/FormUpdatePassword';\nimport * as actions from '../../../redux/actions';\nimport * as actionsMyProfile from '../../../redux/myProfile/actions/myProfile';\nimport * as actionsSalary from '../../../redux/salary/actions/viewSalary';\n\nvar MyProfile =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MyProfile, _React$Component);\n\n  function MyProfile(props) {\n    var _this;\n\n    _classCallCheck(this, MyProfile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MyProfile).call(this, props));\n    _this.state = {\n      status_message: '',\n      user_profile_detail: {},\n      user_bank_detail: [],\n      payslip_history: [],\n      user_assign_machine: []\n    };\n\n    _this.props.onIsAlreadyLogin();\n\n    _this.callUpdateBankDetails = _this.callUpdateBankDetails.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.callUpdateProfileDetails = _this.callUpdateProfileDetails.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.callUpdateUserDeviceDetails = _this.callUpdateUserDeviceDetails.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.callUpdatePassword = _this.callUpdatePassword.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MyProfile, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.onMyProfileDetails();\n      this.props.onSalaryDetails();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      var isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n\n      if (isNotValid.status) {\n        this.props.history.push(isNotValid.redirectTo);\n      }\n\n      var s_payslip_history = [];\n\n      if (typeof props.salary.payslip_history !== 'undefined' && props.salary.payslip_history.length > 0) {\n        s_payslip_history = props.salary.payslip_history;\n      }\n\n      this.setState({\n        user_profile_detail: props.myProfile.user_profile_detail,\n        user_assign_machine: props.myProfile.user_assign_machine,\n        user_bank_detail: props.myProfile.user_bank_detail,\n        payslip_history: s_payslip_history\n      });\n    }\n  }, {\n    key: \"callUpdateBankDetails\",\n    value: function callUpdateBankDetails(new_bank_details) {\n      this.props.onUpdateBankDetails(new_bank_details).then(function (data) {}, function (error) {\n        notify(error);\n      });\n    }\n  }, {\n    key: \"callUpdateUserDeviceDetails\",\n    value: function callUpdateUserDeviceDetails(new_device_details) {\n      this.props.onUpdateDeviceDetails(new_device_details).then(function (data) {}, function (error) {\n        notify(error);\n      });\n    }\n  }, {\n    key: \"callUpdateProfileDetails\",\n    value: function callUpdateProfileDetails(new_profile_details) {\n      this.props.onUpdateProfileDetails(new_profile_details).then(function (data) {}, function (error) {\n        notify(error);\n      });\n    }\n  }, {\n    key: \"callUpdatePassword\",\n    value: function callUpdatePassword(new_password) {\n      var _this2 = this;\n\n      new_password = new_password.trim();\n\n      if (new_password === '') {\n        notify('Enter Password !!');\n      } else {\n        this.props.onUpdatePassword(new_password).then(function (data) {\n          notify(data);\n\n          _this2.props.onMyProfileDetails();\n        }, function (error) {\n          notify(error);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state$user_prof = this.state.user_profile_detail,\n          name = _this$state$user_prof.name,\n          jobtitle = _this$state$user_prof.jobtitle,\n          dateofjoining = _this$state$user_prof.dateofjoining,\n          gender = _this$state$user_prof.gender,\n          dob = _this$state$user_prof.dob,\n          work_email = _this$state$user_prof.work_email,\n          mobile_ph = _this$state$user_prof.mobile_ph;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Menu, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"content\",\n        className: \"app-content box-shadow-z0\",\n        role: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(Header, Object.assign({\n        pageTitle: 'My Profile'\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"app-body\",\n        id: \"view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row no-gutter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(UserHorizontalView, {\n        profileImage: this.props.loggedUser.data.profileImage,\n        name: name,\n        jobtitle: jobtitle,\n        dateofjoining: dateofjoining,\n        gender: gender,\n        dob: dob,\n        workEmail: work_email,\n        contactNumber: mobile_ph,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row no-gutter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-6 p-a b-r m-b-md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(FormProfileDetails, {\n        user_profile_detail: this.state.user_profile_detail,\n        callUpdateProfileDetails: this.callUpdateProfileDetails,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-sm-6 p-a m-b-md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(FormBankDetails, {\n        user_bank_detail: this.state.user_bank_detail,\n        callUpdateBankDetails: this.callUpdateBankDetails,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-sm-6 p-a m-b-md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(FormUpdatePassword, {\n        callUpdatePassword: this.callUpdatePassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return MyProfile;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    frontend: state.frontend.toJS(),\n    loggedUser: state.logged_user.userLogin,\n    myProfile: state.myProfile.toJS(),\n    salary: state.salary.toJS()\n  };\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onIsAlreadyLogin: function onIsAlreadyLogin() {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    onMyProfileDetails: function onMyProfileDetails() {\n      return dispatch(actionsMyProfile.getMyProfileDetails());\n    },\n    onUpdateBankDetails: function onUpdateBankDetails(new_bank_details) {\n      return dispatch(actionsMyProfile.updateBankDetails(new_bank_details));\n    },\n    onUpdateProfileDetails: function onUpdateProfileDetails(new_profile_details) {\n      return dispatch(actionsMyProfile.updateProfileDetails(new_profile_details));\n    },\n    onUpdateDeviceDetails: function onUpdateDeviceDetails(new_device_details) {// return dispatch(actionsMyProfile.updateUserDeviceDetails(new_device_details));\n    },\n    onUpdatePassword: function onUpdatePassword(new_password) {\n      return dispatch(actionsMyProfile.updatePassword(new_password));\n    },\n    onSalaryDetails: function onSalaryDetails() {\n      return dispatch(actionsSalary.getSalaryDetails());\n    }\n  };\n};\n\nMyProfile.propTypes = {\n  user_bank_detail: PropTypes.array,\n  user_profile_detail: PropTypes.object,\n  payslip_history: PropTypes.array,\n  user_assign_machine: PropTypes.array\n};\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(MyProfile));","map":{"version":3,"sources":["/var/www/html/ReactReduxHR/frontend/src/modules/myProfile/containers/myProfile.jsx"],"names":["React","connect","withRouter","PropTypes","notify","Menu","isNotUserValid","Header","UserHorizontalView","PayslipHistory","FormProfileDetails","FormBankDetails","FormUpdatePassword","actions","actionsMyProfile","actionsSalary","MyProfile","props","state","status_message","user_profile_detail","user_bank_detail","payslip_history","user_assign_machine","onIsAlreadyLogin","callUpdateBankDetails","bind","callUpdateProfileDetails","callUpdateUserDeviceDetails","callUpdatePassword","onMyProfileDetails","onSalaryDetails","isNotValid","location","pathname","loggedUser","status","history","push","redirectTo","s_payslip_history","salary","length","setState","myProfile","new_bank_details","onUpdateBankDetails","then","data","error","new_device_details","onUpdateDeviceDetails","new_profile_details","onUpdateProfileDetails","new_password","trim","onUpdatePassword","name","jobtitle","dateofjoining","gender","dob","work_email","mobile_ph","profileImage","Component","mapStateToProps","frontend","toJS","logged_user","userLogin","mapDispatchToProps","dispatch","isAlreadyLogin","getMyProfileDetails","updateBankDetails","updateProfileDetails","updatePassword","getSalaryDetails","propTypes","array","object"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,UAAR,QAAyB,cAAzB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAAQC,MAAR,QAAqB,0BAArB;AACA,OAAOC,IAAP,MAAiB,kCAAjB;AACA,SAAQC,cAAR,QAA6B,2BAA7B;AACA,OAAOC,MAAP,MAAmB,oCAAnB;AACA,OAAOC,kBAAP,MAA+B,gDAA/B;AACA,OAAOC,cAAP,MAA2B,sDAA3B;AACA,OAAOC,kBAAP,MAA+B,0DAA/B;AACA,OAAOC,eAAP,MAA4B,uDAA5B;AACA,OAAOC,kBAAP,MAA+B,0DAA/B;AACA,OAAO,KAAKC,OAAZ,MAAyB,wBAAzB;AACA,OAAO,KAAKC,gBAAZ,MAAkC,4CAAlC;AACA,OAAO,KAAKC,aAAZ,MAA+B,0CAA/B;;IAEMC,S;;;;;AACJ,qBAAaC,KAAb,EAAoB;AAAA;;AAAA;;AAClB,mFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,cAAc,EAAO,EADV;AAEXC,MAAAA,mBAAmB,EAAE,EAFV;AAGXC,MAAAA,gBAAgB,EAAK,EAHV;AAIXC,MAAAA,eAAe,EAAM,EAJV;AAKXC,MAAAA,mBAAmB,EAAE;AALV,KAAb;;AAOA,UAAKN,KAAL,CAAWO,gBAAX;;AACA,UAAKC,qBAAL,GAA6B,MAAKA,qBAAL,CAA2BC,IAA3B,uDAA7B;AACA,UAAKC,wBAAL,GAAgC,MAAKA,wBAAL,CAA8BD,IAA9B,uDAAhC;AACA,UAAKE,2BAAL,GAAmC,MAAKA,2BAAL,CAAiCF,IAAjC,uDAAnC;AACA,UAAKG,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBH,IAAxB,uDAA1B;AAbkB;AAcnB;;;;yCACqB;AACpB,WAAKT,KAAL,CAAWa,kBAAX;AACA,WAAKb,KAAL,CAAWc,eAAX;AACD;;;8CAC0Bd,K,EAAO;AAChC,UAAIe,UAAU,GAAG1B,cAAc,CAAC,KAAKW,KAAL,CAAWgB,QAAX,CAAoBC,QAArB,EAA+BjB,KAAK,CAACkB,UAArC,CAA/B;;AACA,UAAIH,UAAU,CAACI,MAAf,EAAuB;AACrB,aAAKnB,KAAL,CAAWoB,OAAX,CAAmBC,IAAnB,CAAwBN,UAAU,CAACO,UAAnC;AACD;;AACD,UAAIC,iBAAiB,GAAG,EAAxB;;AAEA,UAAI,OAAOvB,KAAK,CAACwB,MAAN,CAAanB,eAApB,KAAwC,WAAxC,IAAuDL,KAAK,CAACwB,MAAN,CAAanB,eAAb,CAA6BoB,MAA7B,GAAsC,CAAjG,EAAoG;AAClGF,QAAAA,iBAAiB,GAAGvB,KAAK,CAACwB,MAAN,CAAanB,eAAjC;AACD;;AACD,WAAKqB,QAAL,CAAc;AAACvB,QAAAA,mBAAmB,EAAEH,KAAK,CAAC2B,SAAN,CAAgBxB,mBAAtC;AAA2DG,QAAAA,mBAAmB,EAAEN,KAAK,CAAC2B,SAAN,CAAgBrB,mBAAhG;AAAqHF,QAAAA,gBAAgB,EAAEJ,KAAK,CAAC2B,SAAN,CAAgBvB,gBAAvJ;AAAyKC,QAAAA,eAAe,EAAEkB;AAA1L,OAAd;AACD;;;0CACsBK,gB,EAAkB;AACvC,WAAK5B,KAAL,CAAW6B,mBAAX,CAA+BD,gBAA/B,EAAiDE,IAAjD,CAAsD,UAACC,IAAD,EAAU,CAAE,CAAlE,EAAoE,UAACC,KAAD,EAAW;AAC7E7C,QAAAA,MAAM,CAAC6C,KAAD,CAAN;AACD,OAFD;AAGD;;;gDAC4BC,kB,EAAoB;AAC/C,WAAKjC,KAAL,CAAWkC,qBAAX,CAAiCD,kBAAjC,EAAqDH,IAArD,CAA0D,UAACC,IAAD,EAAU,CAAE,CAAtE,EAAwE,UAACC,KAAD,EAAW;AACjF7C,QAAAA,MAAM,CAAC6C,KAAD,CAAN;AACD,OAFD;AAGD;;;6CACyBG,mB,EAAqB;AAC7C,WAAKnC,KAAL,CAAWoC,sBAAX,CAAkCD,mBAAlC,EAAuDL,IAAvD,CAA4D,UAACC,IAAD,EAAU,CAAE,CAAxE,EAA0E,UAACC,KAAD,EAAW;AACnF7C,QAAAA,MAAM,CAAC6C,KAAD,CAAN;AACD,OAFD;AAGD;;;uCACmBK,Y,EAAc;AAAA;;AAChCA,MAAAA,YAAY,GAAGA,YAAY,CAACC,IAAb,EAAf;;AACA,UAAID,YAAY,KAAK,EAArB,EAAyB;AACvBlD,QAAAA,MAAM,CAAC,mBAAD,CAAN;AACD,OAFD,MAEO;AACL,aAAKa,KAAL,CAAWuC,gBAAX,CAA4BF,YAA5B,EAA0CP,IAA1C,CAA+C,UAACC,IAAD,EAAU;AACvD5C,UAAAA,MAAM,CAAC4C,IAAD,CAAN;;AACA,UAAA,MAAI,CAAC/B,KAAL,CAAWa,kBAAX;AACD,SAHD,EAGG,UAACmB,KAAD,EAAW;AACZ7C,UAAAA,MAAM,CAAC6C,KAAD,CAAN;AACD,SALD;AAMD;AACF;;;6BACS;AAAA,kCACkE,KAAK/B,KAAL,CAAWE,mBAD7E;AAAA,UACHqC,IADG,yBACHA,IADG;AAAA,UACGC,QADH,yBACGA,QADH;AAAA,UACaC,aADb,yBACaA,aADb;AAAA,UAC4BC,MAD5B,yBAC4BA,MAD5B;AAAA,UACoCC,GADpC,yBACoCA,GADpC;AAAA,UACyCC,UADzC,yBACyCA,UADzC;AAAA,UACqDC,SADrD,yBACqDA,SADrD;AAER,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD,oBAAU,KAAK9C,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,EAEE;AAAK,QAAA,EAAE,EAAC,SAAR;AAAkB,QAAA,SAAS,EAAC,2BAA5B;AAAwD,QAAA,IAAI,EAAC,MAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAE;AAAnB,SAAqC,KAAKA,KAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,EAEE;AAAK,QAAA,SAAS,EAAC,UAAf;AAA0B,QAAA,EAAE,EAAC,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,kBAAD;AACE,QAAA,YAAY,EAAE,KAAKA,KAAL,CAAWkB,UAAX,CAAsBa,IAAtB,CAA2BgB,YAD3C;AAEE,QAAA,IAAI,EAAEP,IAFR;AAGE,QAAA,QAAQ,EAAEC,QAHZ;AAIE,QAAA,aAAa,EAAEC,aAJjB;AAKE,QAAA,MAAM,EAAEC,MALV;AAME,QAAA,GAAG,EAAEC,GANP;AAOE,QAAA,SAAS,EAAEC,UAPb;AAQE,QAAA,aAAa,EAAEC,SARjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAcE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,kBAAD;AAAoB,QAAA,mBAAmB,EAAE,KAAK7C,KAAL,CAAWE,mBAApD;AAAyE,QAAA,wBAAwB,EAAE,KAAKO,wBAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAIE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,eAAD;AAAiB,QAAA,gBAAgB,EAAE,KAAKT,KAAL,CAAWG,gBAA9C;AAAgE,QAAA,qBAAqB,EAAE,KAAKI,qBAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,EAOE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,kBAAD;AAAoB,QAAA,kBAAkB,EAAE,KAAKI,kBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAPF,CAdF,CADF,CAFF,CAFF,CADF;AAoCD;;;;EAlGqB7B,KAAK,CAACiE,S;;AAqG9B,SAASC,eAAT,CAA0BhD,KAA1B,EAAiC;AAC/B,SAAO;AACLiD,IAAAA,QAAQ,EAAIjD,KAAK,CAACiD,QAAN,CAAeC,IAAf,EADP;AAELjC,IAAAA,UAAU,EAAEjB,KAAK,CAACmD,WAAN,CAAkBC,SAFzB;AAGL1B,IAAAA,SAAS,EAAG1B,KAAK,CAAC0B,SAAN,CAAgBwB,IAAhB,EAHP;AAIL3B,IAAAA,MAAM,EAAMvB,KAAK,CAACuB,MAAN,CAAa2B,IAAb;AAJP,GAAP;AAMD;;AACD,IAAMG,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,EAAc;AACvC,SAAO;AACLhD,IAAAA,gBAAgB,EAAE,4BAAM;AACtB,aAAOgD,QAAQ,CAAC3D,OAAO,CAAC4D,cAAR,EAAD,CAAf;AACD,KAHI;AAIL3C,IAAAA,kBAAkB,EAAE,8BAAM;AACxB,aAAO0C,QAAQ,CAAC1D,gBAAgB,CAAC4D,mBAAjB,EAAD,CAAf;AACD,KANI;AAOL5B,IAAAA,mBAAmB,EAAE,6BAACD,gBAAD,EAAsB;AACzC,aAAO2B,QAAQ,CAAC1D,gBAAgB,CAAC6D,iBAAjB,CAAmC9B,gBAAnC,CAAD,CAAf;AACD,KATI;AAULQ,IAAAA,sBAAsB,EAAE,gCAACD,mBAAD,EAAyB;AAC/C,aAAOoB,QAAQ,CAAC1D,gBAAgB,CAAC8D,oBAAjB,CAAsCxB,mBAAtC,CAAD,CAAf;AACD,KAZI;AAaLD,IAAAA,qBAAqB,EAAE,+BAACD,kBAAD,EAAwB,CAC7C;AACD,KAfI;AAgBLM,IAAAA,gBAAgB,EAAE,0BAACF,YAAD,EAAkB;AAClC,aAAOkB,QAAQ,CAAC1D,gBAAgB,CAAC+D,cAAjB,CAAgCvB,YAAhC,CAAD,CAAf;AACD,KAlBI;AAmBLvB,IAAAA,eAAe,EAAE,2BAAM;AACrB,aAAOyC,QAAQ,CAACzD,aAAa,CAAC+D,gBAAd,EAAD,CAAf;AACD;AArBI,GAAP;AAuBD,CAxBD;;AAyBA9D,SAAS,CAAC+D,SAAV,GAAsB;AACpB1D,EAAAA,gBAAgB,EAAKlB,SAAS,CAAC6E,KADX;AAEpB5D,EAAAA,mBAAmB,EAAEjB,SAAS,CAAC8E,MAFX;AAGpB3D,EAAAA,eAAe,EAAMnB,SAAS,CAAC6E,KAHX;AAIpBzD,EAAAA,mBAAmB,EAAEpB,SAAS,CAAC6E;AAJX,CAAtB;AAOA,eAAe9E,UAAU,CAACD,OAAO,CAACiE,eAAD,EAAkBK,kBAAlB,CAAP,CAA6CvD,SAA7C,CAAD,CAAzB","sourcesContent":["import React from 'react';\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router';\nimport PropTypes from 'prop-types';\nimport {notify} from '../../../services/notify';\nimport Menu from '../../../components/generic/Menu';\nimport {isNotUserValid} from '../../../services/generic';\nimport Header from '../../../components/generic/Header';\nimport UserHorizontalView from '../../../components/generic/UserHorizontalView';\nimport PayslipHistory from '../../../components/salary/userSalary/PayslipHistory';\nimport FormProfileDetails from '../../../modules/myProfile/components/FormProfileDetails';\nimport FormBankDetails from '../../../modules/myProfile/components/FormBankDetails';\nimport FormUpdatePassword from '../../../modules/myProfile/components/FormUpdatePassword';\nimport * as actions from '../../../redux/actions';\nimport * as actionsMyProfile from '../../../redux/myProfile/actions/myProfile';\nimport * as actionsSalary from '../../../redux/salary/actions/viewSalary';\n\nclass MyProfile extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      status_message:      '',\n      user_profile_detail: {},\n      user_bank_detail:    [],\n      payslip_history:     [],\n      user_assign_machine: []\n    };\n    this.props.onIsAlreadyLogin();\n    this.callUpdateBankDetails = this.callUpdateBankDetails.bind(this);\n    this.callUpdateProfileDetails = this.callUpdateProfileDetails.bind(this);\n    this.callUpdateUserDeviceDetails = this.callUpdateUserDeviceDetails.bind(this);\n    this.callUpdatePassword = this.callUpdatePassword.bind(this);\n  }\n  componentWillMount () {\n    this.props.onMyProfileDetails();\n    this.props.onSalaryDetails();\n  }\n  componentWillReceiveProps (props) {\n    let isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n    if (isNotValid.status) {\n      this.props.history.push(isNotValid.redirectTo);\n    }\n    let s_payslip_history = [];\n\n    if (typeof props.salary.payslip_history !== 'undefined' && props.salary.payslip_history.length > 0) {\n      s_payslip_history = props.salary.payslip_history;\n    }\n    this.setState({user_profile_detail: props.myProfile.user_profile_detail, user_assign_machine: props.myProfile.user_assign_machine, user_bank_detail: props.myProfile.user_bank_detail, payslip_history: s_payslip_history});\n  }\n  callUpdateBankDetails (new_bank_details) {\n    this.props.onUpdateBankDetails(new_bank_details).then((data) => {}, (error) => {\n      notify(error);\n    });\n  }\n  callUpdateUserDeviceDetails (new_device_details) {\n    this.props.onUpdateDeviceDetails(new_device_details).then((data) => {}, (error) => {\n      notify(error);\n    });\n  }\n  callUpdateProfileDetails (new_profile_details) {\n    this.props.onUpdateProfileDetails(new_profile_details).then((data) => {}, (error) => {\n      notify(error);\n    });\n  }\n  callUpdatePassword (new_password) {\n    new_password = new_password.trim();\n    if (new_password === '') {\n      notify('Enter Password !!');\n    } else {\n      this.props.onUpdatePassword(new_password).then((data) => {\n        notify(data);\n        this.props.onMyProfileDetails();\n      }, (error) => {\n        notify(error);\n      });\n    }\n  }\n  render () {\n    let {name, jobtitle, dateofjoining, gender, dob, work_email, mobile_ph} = this.state.user_profile_detail;\n    return (\n      <div>\n        <Menu {...this.props} />\n        <div id=\"content\" className=\"app-content box-shadow-z0\" role=\"main\">\n          <Header pageTitle={'My Profile'} {...this.props} />          \n          <div className=\"app-body\" id=\"view\">\n            <div className=\"padding\">\n              <div className=\"row no-gutter\">\n                <UserHorizontalView\n                  profileImage={this.props.loggedUser.data.profileImage}\n                  name={name}\n                  jobtitle={jobtitle}\n                  dateofjoining={dateofjoining}\n                  gender={gender}\n                  dob={dob}\n                  workEmail={work_email}\n                  contactNumber={mobile_ph}\n\n                />\n              </div>\n              <div className=\"row no-gutter\">\n                <div className=\"col-sm-6 p-a b-r m-b-md\">\n                  <FormProfileDetails user_profile_detail={this.state.user_profile_detail} callUpdateProfileDetails={this.callUpdateProfileDetails} />\n                </div>\n                <div className=\"col-sm-6 p-a m-b-md\">\n                  <FormBankDetails user_bank_detail={this.state.user_bank_detail} callUpdateBankDetails={this.callUpdateBankDetails} />\n                </div>\n                <div className=\"col-sm-6 p-a m-b-md\">\n                  <FormUpdatePassword callUpdatePassword={this.callUpdatePassword} />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps (state) {\n  return {\n    frontend:   state.frontend.toJS(),\n    loggedUser: state.logged_user.userLogin,\n    myProfile:  state.myProfile.toJS(),\n    salary:     state.salary.toJS()\n  };\n}\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onIsAlreadyLogin: () => {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    onMyProfileDetails: () => {\n      return dispatch(actionsMyProfile.getMyProfileDetails());\n    },\n    onUpdateBankDetails: (new_bank_details) => {\n      return dispatch(actionsMyProfile.updateBankDetails(new_bank_details));\n    },\n    onUpdateProfileDetails: (new_profile_details) => {\n      return dispatch(actionsMyProfile.updateProfileDetails(new_profile_details));\n    },\n    onUpdateDeviceDetails: (new_device_details) => {\n      // return dispatch(actionsMyProfile.updateUserDeviceDetails(new_device_details));\n    },\n    onUpdatePassword: (new_password) => {\n      return dispatch(actionsMyProfile.updatePassword(new_password));\n    },\n    onSalaryDetails: () => {\n      return dispatch(actionsSalary.getSalaryDetails());\n    }\n  };\n};\nMyProfile.propTypes = {\n  user_bank_detail:    PropTypes.array,\n  user_profile_detail: PropTypes.object,\n  payslip_history:     PropTypes.array,\n  user_assign_machine: PropTypes.array\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(MyProfile));\n"]},"metadata":{},"sourceType":"module"}