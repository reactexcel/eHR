{"ast":null,"code":"import _classCallCheck from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/var/www/html/ReactReduxHR/frontend/src/modules/salary/containers/manageSalary.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport moment from 'moment';\nimport * as _ from 'lodash';\nimport queryString from 'query-string';\nimport { notify } from '../../../services/notify';\nimport { CONFIG } from '../../../config/index';\nimport Menu from '../../../components/generic/Menu';\nimport { isNotUserValid } from '../../../services/generic';\nimport Header from '../../../components/generic/Header';\nimport UsersList from '../../../components/generic/UsersList';\nimport UsersListHeader from '../../../components/generic/UsersListHeader'; // import UserSalaryHistory from '../../../components/salary/manageSalary/UserSalaryHistory';\n// import UserHoldingHistory from '../../../components/salary/manageSalary/UserHoldingHistory';\n\nimport UserHistoryHolding from '../../../components/salary/manageSalary/UserHistoryHolding'; // import FormAddHolding from '../../../modules/salary/components/manageSalary/FormAddHolding';\n// import FormAddSalary from '../../../modules/salary/components/manageSalary/FormAddSalary';\n\nimport AddHoldingForm from '../../../modules/salary/components/manageSalary/AddHoldingForm';\nimport AddSalaryForm from '../../../modules/salary/components/manageSalary/AddSalaryForm';\nimport * as actions from '../../../redux/actions';\nimport * as actions_usersList from '../../../redux/generic/actions/usersList';\nimport * as actions_manageSalary from '../../../redux/salary/actions/manageSalary';\nimport SalaryBlock from \"../../../components/generic/SalaryBlock\";\n\nvar ManageSalary =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ManageSalary, _React$Component);\n\n  function ManageSalary(props) {\n    var _this;\n\n    _classCallCheck(this, ManageSalary);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ManageSalary).call(this, props));\n\n    _this.props.onIsAlreadyLogin();\n\n    _this.state = {\n      'selected_user_name': '',\n      'selected_user_image': '',\n      'selected_user_jobtitle': '',\n      'selected_user_id': '',\n      'defaultUserDisplay': '',\n      'salary_history': [],\n      'holding_history': [],\n      'user_latest_salary_details': {},\n      'user_latest_holding_details': {},\n      'user_date_of_joining': {},\n      'msg': '',\n      'current_date': {},\n      'subList': []\n    };\n    _this.onUserClick = _this.onUserClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.callAddUserSalary = _this.callAddUserSalary.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.callAddUserHolding = _this.callAddUserHolding.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.viewSalarySummary = _this.viewSalarySummary.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.callDeleteUserSalary = _this.callDeleteUserSalary.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ManageSalary, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.onUsersList({\n        sort_by: \"salary\"\n      });\n      var current_date = moment().format('YYYY-MM-DD');\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      var isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n\n      if (isNotValid.status) {\n        this.props.history.push(isNotValid.redirectTo);\n      }\n\n      this.setState({\n        subList: this.props.usersList.users\n      });\n      var s_salary_history = [];\n      var s_user_latest_salary_details = {};\n      var s_holding_history = [];\n      var s_user_latest_holding_details = {};\n\n      if (typeof props.manageSalary.salary_structure.salary_details !== 'undefined' && props.manageSalary.salary_structure.salary_details.length > 0) {\n        s_salary_history = _.sortBy(props.manageSalary.salary_structure.salary_details, \"date\").reverse();\n      }\n\n      if (typeof props.manageSalary.salary_structure.holding_details !== 'undefined' && props.manageSalary.salary_structure.holding_details.length > 0) {\n        s_holding_history = props.manageSalary.salary_structure.holding_details.reverse();\n        s_user_latest_holding_details = s_holding_history[0];\n        this.setState({});\n      }\n\n      this.setState({\n        salary_history: s_salary_history,\n        user_latest_salary_details: s_user_latest_salary_details,\n        holding_history: s_holding_history,\n        user_latest_holding_details: s_user_latest_holding_details\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.state.defaultUserDisplay == '') {\n        if (this.props.usersList.users.length > 0) {\n          var firstUser = this.props.loggedUser.data.role == CONFIG.HR ? this.state.subList[0] : this.props.usersList.users[0];\n          var queryParams = queryString.parse(this.props.location.search);\n          var defaultUserId = queryParams.selectedUser || firstUser.user_Id;\n          this.onUserClick(defaultUserId);\n        }\n      }\n\n      if (this.props.manageSalary.status_message !== '') {\n        notify(this.props.manageSalary.status_message);\n      }\n    }\n  }, {\n    key: \"onUserClick\",\n    value: function onUserClick(userid) {\n      var _this2 = this;\n\n      var selected_user_name = '';\n      var selected_user_image = '';\n      var selected_user_jobtitle = '';\n      var selected_user_id = '';\n      var selected_user_date_of_joining = '';\n\n      if (this.props.usersList.users.length > 0) {\n        var userDetails = _.find(this.props.usersList.users, {\n          'user_Id': userid\n        });\n\n        if (typeof userDetails !== 'undefined') {\n          selected_user_name = userDetails.name;\n          selected_user_image = userDetails.slack_profile.image_192;\n          selected_user_jobtitle = userDetails.jobtitle;\n          selected_user_id = userDetails.user_Id;\n          selected_user_date_of_joining = userDetails.dateofjoining;\n          this.props.history.push('manage_salary?selectedUser=' + userDetails.user_Id);\n        }\n      }\n\n      this.setState({\n        'defaultUserDisplay': userid,\n        'selected_user_name': selected_user_name,\n        'selected_user_image': selected_user_image,\n        'selected_user_jobtitle': selected_user_jobtitle,\n        'selected_user_id': selected_user_id,\n        'selected_user_date_of_joining': selected_user_date_of_joining\n      });\n      this.props.onUserSalaryDetails(userid).then(function (val) {\n        _this2.setState({\n          msg: val.data.message\n        });\n      });\n    }\n  }, {\n    key: \"callAddUserSalary\",\n    value: function callAddUserSalary(new_salary_details) {\n      this.props.onAddNewSalary(new_salary_details).then(function (data) {}, function (error) {\n        notify(error);\n      });\n    }\n  }, {\n    key: \"callAddUserHolding\",\n    value: function callAddUserHolding(new_holding_details) {\n      this.props.onAddNewHolding(new_holding_details).then(function (data) {}, function (error) {\n        notify(error);\n      });\n    }\n  }, {\n    key: \"viewSalarySummary\",\n    value: function viewSalarySummary(e, id) {\n      e.stopPropagation();\n      var new_details = this.state.salary_details;\n\n      _.forEach(this.state.salary_history, function (d, k) {\n        if (d.test.id == id) {\n          new_details = d;\n        }\n      });\n\n      this.setState({\n        'user_latest_salary_details': new_details\n      });\n    }\n  }, {\n    key: \"callDeleteUserSalary\",\n    value: function callDeleteUserSalary(e, user_id, salary_id) {\n      var _this3 = this;\n\n      e.stopPropagation();\n      this.props.onDeleteUserSalary(user_id, salary_id).then(function (data) {\n        _this3.onUserClick(user_id);\n      }, function (error) {\n        notify(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var data;\n      var message = this.state.msg;\n\n      if (message) {\n        data = React.createElement(\"div\", {\n          className: \"well well-lg\",\n          style: {\n            'color': \"red\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-exclamation-triangle fa-3x\",\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }), message, \" \");\n      } else {\n        data = this.state.salary_history.map(function (item, index) {\n          return React.createElement(SalaryBlock, {\n            key: index,\n            userid: _this4.state.selected_user_id,\n            callAddUserHolding: _this4.callAddUserHolding,\n            salaryStructure: _this4.props.manageSalary.salary_structure,\n            item: item,\n            displayPage: \"manage\",\n            viewSalarySummary: _this4.viewSalarySummary,\n            callDeleteUserSalary: _this4.callDeleteUserSalary,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 165\n            },\n            __self: this\n          });\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Menu, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"content\",\n        className: \"app-content box-shadow-z0\",\n        role: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(Header, {\n        pageTitle: 'Manage Salaries',\n        showLoading: this.props.frontend.show_loading,\n        userListHeader: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), React.createElement(UsersListHeader, {\n        users: this.props.usersList.users,\n        selectedUserId: this.state.selected_user_id,\n        onUserClick: this.onUserClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"app-body\",\n        id: \"view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-2 col-sm-12 col-xs-12 hidden-xs\",\n        id: \"fixedScroll\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(UsersList, Object.assign({\n        users: this.props.loggedUser.data.role == CONFIG.HR ? this.state.subList : this.props.usersList.users,\n        notSorted: true,\n        selectedUserId: this.state.selected_user_id,\n        onUserClick: this.onUserClick\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-md-10 col-sm-12 col-xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"box m-t-xs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"p-a text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"text-md m-t block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, this.state.selected_user_name), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, this.state.selected_user_jobtitle)))), React.createElement(\"div\", {\n        className: \"box m-t-xs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"p-a block \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"Salary Revision\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"content-salary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, data, React.createElement(AddSalaryForm, Object.assign({}, this.props, {\n        userid: this.state.selected_user_id,\n        callAddUserSalary: this.callAddUserSalary,\n        user_latest_salary_details: this.state.user_latest_salary_details,\n        latest_salary_literally: this.state.salary_history[0],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        className: \"box m-t-xs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"p-a block \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Holding Revision\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"content-salary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(UserHistoryHolding, {\n        data: this.state.holding_history,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(AddHoldingForm, Object.assign({}, this.props, {\n        userid: this.state.selected_user_id,\n        callAddUserHolding: this.callAddUserHolding,\n        user_latest_salary_details: this.state.user_latest_salary_details,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      })))))))))));\n    }\n  }]);\n\n  return ManageSalary;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    frontend: state.frontend.toJS(),\n    loggedUser: state.logged_user.userLogin,\n    usersList: state.usersList.toJS(),\n    manageSalary: state.manageSalary.toJS()\n  };\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onIsAlreadyLogin: function onIsAlreadyLogin() {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    onUsersList: function onUsersList(data) {\n      return dispatch(actions_usersList.get_users_list(data));\n    },\n    onUserSalaryDetails: function onUserSalaryDetails(userid) {\n      return dispatch(actions_manageSalary.get_user_salary_details(userid));\n    },\n    onAddNewSalary: function onAddNewSalary(new_salary_data) {\n      return dispatch(actions_manageSalary.add_user_new_salary(new_salary_data));\n    },\n    onAddNewHolding: function onAddNewHolding(new_holding_data) {\n      return dispatch(actions_manageSalary.add_user_new_holding(new_holding_data));\n    },\n    onDeleteUserSalary: function onDeleteUserSalary(user_id, salary_id) {\n      return dispatch(actions_manageSalary.delete_user_salary(user_id, salary_id));\n    }\n  };\n};\n\nvar VisibleManageSalary = connect(mapStateToProps, mapDispatchToProps)(ManageSalary);\nvar RouterVisibleManageSalary = withRouter(VisibleManageSalary);\nexport default RouterVisibleManageSalary;","map":{"version":3,"sources":["/var/www/html/ReactReduxHR/frontend/src/modules/salary/containers/manageSalary.jsx"],"names":["React","connect","withRouter","moment","_","queryString","notify","CONFIG","Menu","isNotUserValid","Header","UsersList","UsersListHeader","UserHistoryHolding","AddHoldingForm","AddSalaryForm","actions","actions_usersList","actions_manageSalary","SalaryBlock","ManageSalary","props","onIsAlreadyLogin","state","onUserClick","bind","callAddUserSalary","callAddUserHolding","viewSalarySummary","callDeleteUserSalary","onUsersList","sort_by","current_date","format","isNotValid","location","pathname","loggedUser","status","history","push","redirectTo","setState","subList","usersList","users","s_salary_history","s_user_latest_salary_details","s_holding_history","s_user_latest_holding_details","manageSalary","salary_structure","salary_details","length","sortBy","reverse","holding_details","salary_history","user_latest_salary_details","holding_history","user_latest_holding_details","defaultUserDisplay","firstUser","data","role","HR","queryParams","parse","search","defaultUserId","selectedUser","user_Id","status_message","userid","selected_user_name","selected_user_image","selected_user_jobtitle","selected_user_id","selected_user_date_of_joining","userDetails","find","name","slack_profile","image_192","jobtitle","dateofjoining","onUserSalaryDetails","then","val","msg","message","new_salary_details","onAddNewSalary","error","new_holding_details","onAddNewHolding","e","id","stopPropagation","new_details","forEach","d","k","test","user_id","salary_id","onDeleteUserSalary","map","item","index","frontend","show_loading","Component","mapStateToProps","toJS","logged_user","userLogin","mapDispatchToProps","dispatch","isAlreadyLogin","get_users_list","get_user_salary_details","new_salary_data","add_user_new_salary","new_holding_data","add_user_new_holding","delete_user_salary","VisibleManageSalary","RouterVisibleManageSalary"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router';\nimport moment from 'moment';\nimport * as _ from 'lodash';\nimport queryString from 'query-string';\nimport {notify} from '../../../services/notify';\nimport {CONFIG} from '../../../config/index';\nimport Menu from '../../../components/generic/Menu';\nimport {isNotUserValid} from '../../../services/generic';\nimport Header from '../../../components/generic/Header';\nimport UsersList from '../../../components/generic/UsersList';\nimport UsersListHeader from '../../../components/generic/UsersListHeader';\n// import UserSalaryHistory from '../../../components/salary/manageSalary/UserSalaryHistory';\n// import UserHoldingHistory from '../../../components/salary/manageSalary/UserHoldingHistory';\nimport UserHistoryHolding from '../../../components/salary/manageSalary/UserHistoryHolding';\n// import FormAddHolding from '../../../modules/salary/components/manageSalary/FormAddHolding';\n// import FormAddSalary from '../../../modules/salary/components/manageSalary/FormAddSalary';\nimport AddHoldingForm from '../../../modules/salary/components/manageSalary/AddHoldingForm';\nimport AddSalaryForm from '../../../modules/salary/components/manageSalary/AddSalaryForm';\nimport * as actions from '../../../redux/actions';\nimport * as actions_usersList from '../../../redux/generic/actions/usersList';\nimport * as actions_manageSalary from '../../../redux/salary/actions/manageSalary';\nimport SalaryBlock from \"../../../components/generic/SalaryBlock\";\n\nclass ManageSalary extends React.Component {\n  constructor (props) {\n    super(props);\n    this.props.onIsAlreadyLogin();\n    this.state = {\n      'selected_user_name':          '',\n      'selected_user_image':         '',\n      'selected_user_jobtitle':      '',\n      'selected_user_id':            '',\n      'defaultUserDisplay':          '',\n      'salary_history':              [],\n      'holding_history':             [],\n      'user_latest_salary_details':  {},\n      'user_latest_holding_details': {},\n      'user_date_of_joining':        {},\n      'msg':                         '',\n      'current_date':                {},\n      'subList':                     []\n    };\n\n    this.onUserClick = this.onUserClick.bind(this);\n    this.callAddUserSalary = this.callAddUserSalary.bind(this);\n    this.callAddUserHolding = this.callAddUserHolding.bind(this);\n    this.viewSalarySummary = this.viewSalarySummary.bind(this);\n    this.callDeleteUserSalary = this.callDeleteUserSalary.bind(this);\n  }\n  componentWillMount () {\n    this.props.onUsersList({sort_by: \"salary\"});\n    var current_date = moment().format('YYYY-MM-DD');\n  }\n\n  componentWillReceiveProps (props) {\n    let isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n    if (isNotValid.status) {\n      this.props.history.push(isNotValid.redirectTo);\n    }\n    this.setState({subList: this.props.usersList.users});\n    let s_salary_history = [];\n    let s_user_latest_salary_details = {};\n    let s_holding_history = [];\n    let s_user_latest_holding_details = {};\n\n    if (typeof props.manageSalary.salary_structure.salary_details !== 'undefined' && props.manageSalary.salary_structure.salary_details.length > 0) {\n      s_salary_history = _.sortBy(props.manageSalary.salary_structure.salary_details, \"date\").reverse();\n    }\n    if (typeof props.manageSalary.salary_structure.holding_details !== 'undefined' && props.manageSalary.salary_structure.holding_details.length > 0) {\n      s_holding_history = props.manageSalary.salary_structure.holding_details.reverse();\n      s_user_latest_holding_details = s_holding_history[0];\n      this.setState({});\n    }\n    this.setState({salary_history: s_salary_history, user_latest_salary_details: s_user_latest_salary_details, holding_history: s_holding_history, user_latest_holding_details: s_user_latest_holding_details});\n  }\n\n  componentDidUpdate () {\n    if (this.state.defaultUserDisplay == '') {\n      if (this.props.usersList.users.length > 0) {\n        let firstUser = this.props.loggedUser.data.role == CONFIG.HR ? this.state.subList[0] : this.props.usersList.users[0];\n        const queryParams = queryString.parse(this.props.location.search)\n        let defaultUserId = queryParams.selectedUser || firstUser.user_Id;\n        this.onUserClick(defaultUserId);\n      }\n    }\n    if(this.props.manageSalary.status_message !== ''){\n      notify(this.props.manageSalary.status_message);\n    }\n  }\n\n  onUserClick (userid) {\n    let selected_user_name = '';\n    let selected_user_image = '';\n    let selected_user_jobtitle = '';\n    let selected_user_id = '';\n    let selected_user_date_of_joining = '';\n\n    if (this.props.usersList.users.length > 0) {\n      let userDetails = _.find(this.props.usersList.users, {'user_Id': userid});\n      if (typeof userDetails !== 'undefined') {\n        selected_user_name = userDetails.name;\n        selected_user_image = userDetails.slack_profile.image_192;\n        selected_user_jobtitle = userDetails.jobtitle;\n        selected_user_id = userDetails.user_Id;\n        selected_user_date_of_joining = userDetails.dateofjoining;\n        this.props.history.push('manage_salary?selectedUser='+userDetails.user_Id)\n      }\n    }\n    this.setState({\n      'defaultUserDisplay':            userid,\n      'selected_user_name':            selected_user_name,\n      'selected_user_image':           selected_user_image,\n      'selected_user_jobtitle':        selected_user_jobtitle,\n      'selected_user_id':              selected_user_id,\n      'selected_user_date_of_joining': selected_user_date_of_joining\n    });\n\n    this.props.onUserSalaryDetails(userid).then((val) => {\n      this.setState({msg: val.data.message});\n    });\n  }\n\n  callAddUserSalary (new_salary_details) {\n    this.props.onAddNewSalary(new_salary_details).then((data) => {}, (error) => {\n      notify(error);\n    });\n  }\n\n  callAddUserHolding (new_holding_details) {\n    this.props.onAddNewHolding(new_holding_details).then((data) => {}, (error) => {\n      notify(error);\n    });\n  }\n  viewSalarySummary (e, id) {\n    e.stopPropagation();\n    let new_details = this.state.salary_details;\n    _.forEach(this.state.salary_history, (d, k) => {\n      if (d.test.id == id) {\n        new_details = d;\n      }\n    });\n    this.setState({'user_latest_salary_details': new_details});\n  }\n  callDeleteUserSalary (e, user_id, salary_id) {\n    e.stopPropagation();\n    this.props.onDeleteUserSalary(user_id, salary_id).then((data) => {\n      this.onUserClick(user_id);\n    }, (error) => {\n      notify(error);\n    });\n  }\n\n  render () {\n    let data;\n    const message = this.state.msg;\n    if (message) {\n      data = (<div className=\"well well-lg\" style={{'color':\"red\"}} >\n        <i className=\"fa fa-exclamation-triangle fa-3x\" aria-hidden=\"true\"></i>\n        {message} </div>)\n    }else {\n      data = this.state.salary_history.map((item, index) => {\n        return (\n          <SalaryBlock key={index} userid={this.state.selected_user_id} callAddUserHolding={this.callAddUserHolding} salaryStructure={this.props.manageSalary.salary_structure} item={item} displayPage=\"manage\" viewSalarySummary={this.viewSalarySummary} callDeleteUserSalary={this.callDeleteUserSalary} />\n        )\n      });\n    }\n    return (\n      <div>\n        <Menu {...this.props} />\n        <div id=\"content\" className=\"app-content box-shadow-z0\" role=\"main\">\n          <Header pageTitle={'Manage Salaries'} showLoading={this.props.frontend.show_loading} userListHeader />\n          <UsersListHeader users={this.props.usersList.users} selectedUserId={this.state.selected_user_id} onUserClick={this.onUserClick} />\n          <div className=\"app-body\" id=\"view\">\n            <div className=\"padding\">\n              <div className=\"row\">\n                <div className=\"col-md-2 col-sm-12 col-xs-12 hidden-xs\" id=\"fixedScroll\">\n                  <UsersList users={this.props.loggedUser.data.role == CONFIG.HR ? this.state.subList : this.props.usersList.users} notSorted={true} selectedUserId={this.state.selected_user_id} onUserClick={this.onUserClick} {...this.props} />\n                </div>\n                <div className=\"col-md-10 col-sm-12 col-xs-12\">\n                  <div className=\"box m-t-xs\">\n                    <div className=\"p-a text-center\">\n                      <div className=\"text-md m-t block\">{this.state.selected_user_name}</div>\n                      <p>\n                        <small>{this.state.selected_user_jobtitle}</small>\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"box m-t-xs\">\n                    {/* <div className=\"p-a block \">\n                      <h6 className=\"text-center\">Add New</h6>\n                      <hr />\n                      <AddSalaryForm {...this.props} userid={this.state.selected_user_id} callAddUserSalary={this.callAddUserSalary} user_latest_salary_details={this.state.user_latest_salary_details}/>\n                    </div> */}\n                    <div className=\"p-a block \">\n                      <h6 className=\"text-center\">Salary Revision</h6>\n                      <hr />\n                      <div className=\"content-salary\">\n                        {data}\n                        <AddSalaryForm {...this.props} userid={this.state.selected_user_id} callAddUserSalary={this.callAddUserSalary} user_latest_salary_details={this.state.user_latest_salary_details} latest_salary_literally={this.state.salary_history[0]} />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"box m-t-xs\">\n                    <div className=\"p-a block \">\n                      <h6 className=\"text-center\">Holding Revision</h6>\n                      <hr />\n                      <div className=\"content-salary\">\n                        <UserHistoryHolding data={this.state.holding_history} />\n                        <AddHoldingForm {...this.props} userid={this.state.selected_user_id} callAddUserHolding={this.callAddUserHolding} user_latest_salary_details={this.state.user_latest_salary_details}/>\n                      </div>\n                    </div>\n                  </div>\n                  {/* <div className=\"row no-gutter b-t box\">\n                    <div className=\"col-md-3 col-sm-4 col-xs-12 b-r box\">\n                      <div className=\"p-a block \">\n                        <h6 className=\"text-center\">Salary Revision</h6>\n                        <hr />\n                        <UserSalaryHistory data={this.state.salary_history} message={this.state.msg} viewSalarySummary={this.viewSalarySummary} callDeleteUserSalary={this.callDeleteUserSalary} />\n                      </div>\n                    </div>\n                    <div className=\"col-md-6 col-sm-8 col-xs-12 b-r box\">\n                      <div className=\"p-a block\">\n                        <h6 className=\"text-center\">Add New</h6>\n                        <hr />\n                        <FormAddSalary {...this.props} userid={this.state.selected_user_id} callAddUserSalary={this.callAddUserSalary} user_latest_salary_details={this.state.user_latest_salary_details} />\n                      </div>\n                    </div>\n                    <div className=\"col-md-3 col-sm-8 col-xs-12 b-r box\">\n                      <div className=\"p-a block \">\n                        <h6 className=\"text-center\">Holding Revision</h6>\n                        <hr />\n                        <UserHoldingHistory data={this.state.holding_history} />\n                        <h6 className=\"text-center\">Add Holding</h6>\n                        <hr />\n                        <FormAddHolding {...this.props} userid={this.state.selected_user_id} callAddUserHolding={this.callAddUserHolding} user_latest_salary_details={this.state.user_latest_salary_details} />\n                      </div>\n                    </div>\n                  </div> */}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps (state) {\n  return {\n    frontend:     state.frontend.toJS(),\n    loggedUser:   state.logged_user.userLogin,\n    usersList:    state.usersList.toJS(),\n    manageSalary: state.manageSalary.toJS()\n  };\n}\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onIsAlreadyLogin: () => {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    onUsersList: (data) => {\n      return dispatch(actions_usersList.get_users_list(data));\n    },\n    onUserSalaryDetails: (userid) => {\n      return dispatch(actions_manageSalary.get_user_salary_details(userid));\n    },\n    onAddNewSalary: (new_salary_data) => {\n      return dispatch(actions_manageSalary.add_user_new_salary(new_salary_data));\n    },\n    onAddNewHolding: (new_holding_data) => {\n      return dispatch(actions_manageSalary.add_user_new_holding(new_holding_data));\n    },\n    onDeleteUserSalary: (user_id, salary_id) => {\n      return dispatch(actions_manageSalary.delete_user_salary(user_id, salary_id));\n    }\n  };\n};\n\nconst VisibleManageSalary = connect(mapStateToProps, mapDispatchToProps)(ManageSalary);\n\nconst RouterVisibleManageSalary = withRouter(VisibleManageSalary);\n\nexport default RouterVisibleManageSalary;\n"]},"metadata":{},"sourceType":"module"}