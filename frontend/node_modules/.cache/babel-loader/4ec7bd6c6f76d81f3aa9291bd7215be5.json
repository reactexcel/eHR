{"ast":null,"code":"import { createAction } from 'redux-actions';\nimport * as _ from 'lodash';\nimport * as jwt from 'jwt-simple';\nimport { CONFIG } from '../../../config/index';\nimport { fireAjax } from '../../../services/index';\nimport * as constants from '../../../redux/constants';\nimport { show_loading, hide_loading } from '../../../redux/generic/actions/frontend';\nimport * as actions_listLeaves from './listLeaves';\nexport function leave_status_change_success(data) {\n  return createAction(constants.ACTION_LEAVE_STATUS_CHANGE_SUCCESS)(data);\n}\nexport function leave_status_change_fail(data) {\n  return createAction(constants.ACTION_LEAVE_STATUS_CHANGE_FAIL)(data);\n}\nexport function leave_status_change_error(err) {\n  return createAction(constants.ACTION_LEAVE_STATUS_CHANGE_ERROR)(err);\n}\n\nfunction async_changeLeaveStatus(leaveid, newstatus, messagetouser) {\n  return fireAjax('POST', '', {\n    'action': 'change_leave_status',\n    'leaveid': leaveid,\n    'newstatus': newstatus,\n    'messagetouser': messagetouser\n  });\n}\n\nexport function changeLeaveStatus(leaveid, newstatus, messagetouser) {\n  return function (dispatch, getState) {\n    return new Promise(function (reslove, reject) {\n      dispatch(show_loading()); // show loading icon\n\n      async_changeLeaveStatus(leaveid, newstatus, messagetouser).then(function (json) {\n        dispatch(hide_loading()); // hide loading icon\n\n        if (json.error == 0) {\n          dispatch(leave_status_change_success(json.data.message));\n          dispatch(actions_listLeaves.getAllLeaves());\n        } else {\n          dispatch(leave_status_change_fail(json.data.message));\n        }\n      }, function (error) {\n        dispatch(hide_loading()); // hide loading icon\n\n        dispatch(leave_status_change_error('error occurs'));\n      });\n    });\n  };\n}\n\nfunction async_docRequired(leaveid, data, comment) {\n  return fireAjax('POST', '', {\n    'action': 'send_request_for_doc',\n    'leaveid': leaveid,\n    'doc_request': data,\n    'comment': comment\n  });\n}\n\nexport function docRequired(leaveid, data, comment) {\n  return function (dispatch, getState) {\n    return new Promise(function (reslove, reject) {\n      dispatch(show_loading()); // show loading icon\n\n      async_docRequired(leaveid, data, comment).then(function (json) {\n        dispatch(hide_loading()); // hide loading icon\n\n        if (json.error == 0) {\n          dispatch(actions_listLeaves.getAllLeaves());\n        }\n      }, function (error) {\n        dispatch(actions_listLeaves.getAllLeaves());\n        dispatch(hide_loading()); // hide loading icon\n      });\n    });\n  };\n}\n\nfunction async_onAddExtraDay(leaveid, token, data) {\n  return fireAjax('POST', '', {\n    'action': 'add_extra_leave_day',\n    'leaveid': leaveid,\n    'token': token,\n    'extra_day': data\n  });\n}\n\nexport function onAddExtraDay(leaveid, token, data) {\n  return function (dispatch, getState) {\n    return new Promise(function (reslove, reject) {\n      dispatch(show_loading()); // show loading icon\n\n      async_onAddExtraDay(leaveid, token, data).then(function (json) {\n        dispatch(hide_loading()); // hide loading icon\n\n        if (json.error == 0) {\n          dispatch(actions_listLeaves.getAllLeaves());\n        }\n      }, function (error) {\n        dispatch(actions_listLeaves.getAllLeaves());\n        dispatch(hide_loading()); // hide loading icon\n      });\n    });\n  };\n}\n\nfunction async_onAddDescription(leaveid, hr, data) {\n  return fireAjax('POST', '', {\n    'action': 'add_hr_comment',\n    'leaveid': leaveid,\n    'hr_comment': hr,\n    'hr_approve': data\n  });\n}\n\nexport function onAddDescription(leaveid, hr, data) {\n  return function (dispatch, getState) {\n    return new Promise(function (reslove, reject) {\n      dispatch(show_loading()); // show loading icon\n\n      async_onAddDescription(leaveid, hr, data).then(function (json) {\n        reslove(json.data.leaveid);\n        dispatch(hide_loading()); // hide loading icon\n\n        if (json.error == 0) {\n          dispatch(actions_listLeaves.getAllLeaves());\n        }\n      }, function (error) {\n        dispatch(actions_listLeaves.getAllLeaves());\n        dispatch(hide_loading()); // hide loading icon\n      });\n    });\n  };\n}\n\nfunction async_leaveRevertRequest(leaveid, token) {\n  return fireAjax('POST', '', {\n    'action': 'revert_leave_status',\n    'leaveid': leaveid,\n    'token': token\n  });\n}\n\nexport function leaveRevertRequest(leaveid, token) {\n  return function (dispatch, getState) {\n    return new Promise(function (resolve, reject) {\n      dispatch(show_loading()); // show loading icon\n\n      async_leaveRevertRequest(leaveid, token).then(function (json) {\n        resolve(json);\n        dispatch(hide_loading()); // hide loading icon\n\n        if (json.error == 0) {\n          dispatch(actions_listLeaves.getAllLeaves());\n        }\n      }, function (error) {\n        dispatch(actions_listLeaves.getAllLeaves());\n        dispatch(hide_loading()); // hide loading icon\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/var/www/html/ReactReduxHR/frontend/src/redux/leave/actions/manageLeave.js"],"names":["createAction","_","jwt","CONFIG","fireAjax","constants","show_loading","hide_loading","actions_listLeaves","leave_status_change_success","data","ACTION_LEAVE_STATUS_CHANGE_SUCCESS","leave_status_change_fail","ACTION_LEAVE_STATUS_CHANGE_FAIL","leave_status_change_error","err","ACTION_LEAVE_STATUS_CHANGE_ERROR","async_changeLeaveStatus","leaveid","newstatus","messagetouser","changeLeaveStatus","dispatch","getState","Promise","reslove","reject","then","json","error","message","getAllLeaves","async_docRequired","comment","docRequired","async_onAddExtraDay","token","onAddExtraDay","async_onAddDescription","hr","onAddDescription","async_leaveRevertRequest","leaveRevertRequest","resolve"],"mappings":"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","sourcesContent":["import {createAction} from 'redux-actions';\nimport * as _ from 'lodash';\nimport * as jwt from 'jwt-simple';\nimport {CONFIG} from '../../../config/index';\nimport {fireAjax} from '../../../services/index';\nimport * as constants from '../../../redux/constants';\nimport {show_loading, hide_loading} from '../../../redux/generic/actions/frontend';\nimport * as actions_listLeaves from './listLeaves';\n\nexport function leave_status_change_success (data) {\n  return createAction(constants.ACTION_LEAVE_STATUS_CHANGE_SUCCESS)(data);\n}\n\nexport function leave_status_change_fail (data) {\n  return createAction(constants.ACTION_LEAVE_STATUS_CHANGE_FAIL)(data);\n}\n\nexport function leave_status_change_error (err) {\n  return createAction(constants.ACTION_LEAVE_STATUS_CHANGE_ERROR)(err);\n}\n\nfunction async_changeLeaveStatus (leaveid, newstatus, messagetouser) {\n  return fireAjax('POST', '', {\n    'action':        'change_leave_status',\n    'leaveid':       leaveid,\n    'newstatus':     newstatus,\n    'messagetouser': messagetouser\n  });\n}\n\nexport function changeLeaveStatus (leaveid, newstatus, messagetouser) {\n  return function (dispatch, getState) {\n    return new Promise((reslove, reject) => {\n      dispatch(show_loading()); // show loading icon\n      async_changeLeaveStatus(leaveid, newstatus, messagetouser).then(\n\t\t\t\t(json) => {\n  dispatch(hide_loading()); // hide loading icon\n  if (json.error == 0) {\n    dispatch(leave_status_change_success(json.data.message));\n    dispatch(actions_listLeaves.getAllLeaves());\n\t\t \t\t\t} else {\n\t\t \t\t\t\tdispatch(leave_status_change_fail(json.data.message));\n\t\t \t\t\t}\n},\n\t\t\t\t(error) => {\n  dispatch(hide_loading()); // hide loading icon\n  dispatch(leave_status_change_error('error occurs'));\n}\n\t\t\t);\n    });\n  };\n}\n\nfunction async_docRequired (leaveid, data, comment) {\n  return fireAjax('POST', '', {\n    'action':      'send_request_for_doc',\n    'leaveid':     leaveid,\n    'doc_request': data,\n    'comment':     comment\n  });\n}\n\nexport function docRequired (leaveid, data, comment) {\n  return function (dispatch, getState) {\n    return new Promise((reslove, reject) => {\n      dispatch(show_loading()); // show loading icon\n      async_docRequired(leaveid, data, comment).then(\n\t\t\t\t(json) => {\n  dispatch(hide_loading()); // hide loading icon\n  if (json.error == 0) {\n    dispatch(actions_listLeaves.getAllLeaves());\n  }\n},\n\t\t\t\t(error) => {\n  dispatch(actions_listLeaves.getAllLeaves());\n  dispatch(hide_loading()); // hide loading icon\n}\n\t\t\t);\n    });\n  };\n}\n\nfunction async_onAddExtraDay (leaveid, token, data) {\n  return fireAjax('POST', '', {\n    'action':    'add_extra_leave_day',\n    'leaveid':   leaveid,\n    'token':     token,\n    'extra_day': data\n  });\n}\n\nexport function onAddExtraDay (leaveid, token, data) {\n  return function (dispatch, getState) {\n    return new Promise((reslove, reject) => {\n      dispatch(show_loading()); // show loading icon\n      async_onAddExtraDay(leaveid, token, data).then(\n\t\t\t\t(json) => {\n  dispatch(hide_loading()); // hide loading icon\n  if (json.error == 0) {\n    dispatch(actions_listLeaves.getAllLeaves());\n\t\t \t\t\t}\n},\n\t\t\t\t(error) => {\n  dispatch(actions_listLeaves.getAllLeaves());\n  dispatch(hide_loading()); // hide loading icon\n}\n\t\t\t);\n    });\n  };\n}\n\nfunction async_onAddDescription (leaveid, hr, data) {\n  return fireAjax('POST', '', {\n    'action':     'add_hr_comment',\n    'leaveid':    leaveid,\n    'hr_comment': hr,\n    'hr_approve': data\n  });\n}\n\nexport function onAddDescription (leaveid, hr, data) {\n  return function (dispatch, getState) {\n    return new Promise((reslove, reject) => {\n      dispatch(show_loading()); // show loading icon\n      async_onAddDescription(leaveid, hr, data).then(\n\t\t\t\t(json) => {\n  reslove(json.data.leaveid);\n  dispatch(hide_loading()); // hide loading icon\n  if (json.error == 0) {\n    dispatch(actions_listLeaves.getAllLeaves());\n  }\n},\n\t\t\t\t(error) => {\n  dispatch(actions_listLeaves.getAllLeaves());\n  dispatch(hide_loading()); // hide loading icon\n}\n\t\t\t);\n    });\n  };\n}\n\nfunction async_leaveRevertRequest(leaveid, token) {\n  return fireAjax('POST', '', {\n    'action':    'revert_leave_status',\n    'leaveid':   leaveid,\n    'token':     token\n  });\n}\n\n\nexport function leaveRevertRequest (leaveid, token) {  \n  return function (dispatch, getState) {\n    return new Promise((resolve, reject) => {\n    dispatch(show_loading()); // show loading icon\n      async_leaveRevertRequest(leaveid, token).then(\n\t\t\t\t(json) => {\n          resolve(json);\n          dispatch(hide_loading()); // hide loading icon\n          if (json.error == 0) {\n            dispatch(actions_listLeaves.getAllLeaves());\n          }\n        },\n\t\t\t\t(error) => {\n          dispatch(actions_listLeaves.getAllLeaves());\n          dispatch(hide_loading()); // hide loading icon\n        }\n\t\t\t);\n    });\n  };\n}"]},"metadata":{},"sourceType":"module"}