{"ast":null,"code":"import _classCallCheck from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/var/www/html/ReactReduxHR/frontend/src/modules/salary/containers/viewSalary.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport * as _ from 'lodash';\nimport { CONFIG } from '../../../config/index';\nimport Menu from '../../../components/generic/Menu';\nimport { isNotUserValid } from '../../../services/generic';\nimport Header from '../../../components/generic/Header';\nimport SalaryList from '../../../modules/salary/components/viewSalary/SalaryList';\nimport * as actions from '../../../redux/actions';\nimport * as actions_salary from '../../../redux/salary/actions/viewSalary';\n\nvar ViewSalary =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ViewSalary, _React$Component);\n\n  function ViewSalary(props) {\n    var _this;\n\n    _classCallCheck(this, ViewSalary);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ViewSalary).call(this, props));\n\n    _this.props.onIsAlreadyLogin();\n\n    _this.state = {\n      empList: []\n    };\n    return _this;\n  }\n\n  _createClass(ViewSalary, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.onFetchUserSalaryDetails();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      var isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n\n      if (isNotValid.status) {\n        this.props.history.push(isNotValid.redirectTo);\n      }\n\n      var emp = [];\n\n      if (props.loggedUser.data.role === CONFIG.ADMIN) {\n        if (props.employee.employee.length > 0) {\n          _.forEach(props.employee.employee, function (ob, i) {\n            emp.push({\n              'image': ob.slack_image,\n              'empName': ob.name,\n              'designation': ob.jobtitle,\n              'salary': ob.salary_detail,\n              'holdingAmountDetail': ob.holdin_amt_detail,\n              'dateOfJoining': ob.dateofjoining,\n              'noOfDaysSinceJoined': String(ob.no_of_days_join),\n              'preSalaryIncDetail': String(ob.previous_increment),\n              'nextSallaryInc': ob.next_increment_date\n            });\n          });\n\n          this.setState({\n            empList: emp\n          });\n        }\n      } else if (props.loggedUser.data.role === CONFIG.HR) {\n        var subList = _.filter(props.employee.employee, function (empl) {\n          return empl.previous_increment === '';\n        });\n\n        var _emp = [];\n\n        if (subList.length > 0) {\n          _.forEach(subList, function (ob, i) {\n            _emp.push({\n              'image': ob.slack_image,\n              'empName': ob.name,\n              'designation': ob.jobtitle,\n              'salary': ob.salary_detail,\n              'holdingAmountDetail': ob.holdin_amt_detail,\n              'dateOfJoining': ob.dateofjoining,\n              'noOfDaysSinceJoined': String(ob.no_of_days_join),\n              'preSalaryIncDetail': String(ob.previous_increment),\n              'nextSallaryInc': ob.next_increment_date\n            });\n          });\n\n          this.setState({\n            empList: _emp\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var table = this.state.empList.length > 0 ? React.createElement(SalaryList, Object.assign({}, this.props, {\n        empList: this.state.empList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      })) : '';\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Menu, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"content\",\n        className: \"app-content box-shadow-z0\",\n        role: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Header, {\n        pageTitle: 'View Salary',\n        showLoading: this.props.frontend.show_loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"app-body\",\n        id: \"view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, table))));\n    }\n  }]);\n\n  return ViewSalary;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    frontend: state.frontend.toJS(),\n    loggedUser: state.logged_user.userLogin,\n    usersList: state.usersList.toJS(),\n    employee: state.empSalaryList.toJS()\n  };\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onIsAlreadyLogin: function onIsAlreadyLogin() {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    onFetchUserSalaryDetails: function onFetchUserSalaryDetails() {\n      return dispatch(actions_salary.fetchUserSalaryDetails());\n    }\n  };\n};\n\nvar VisibleViewSalary = connect(mapStateToProps, mapDispatchToProps)(ViewSalary);\nvar RouterVisibleViewSalary = withRouter(VisibleViewSalary);\nexport default RouterVisibleViewSalary;","map":{"version":3,"sources":["/var/www/html/ReactReduxHR/frontend/src/modules/salary/containers/viewSalary.jsx"],"names":["React","connect","withRouter","_","CONFIG","Menu","isNotUserValid","Header","SalaryList","actions","actions_salary","ViewSalary","props","onIsAlreadyLogin","state","empList","onFetchUserSalaryDetails","isNotValid","location","pathname","loggedUser","status","history","push","redirectTo","emp","data","role","ADMIN","employee","length","forEach","ob","i","slack_image","name","jobtitle","salary_detail","holdin_amt_detail","dateofjoining","String","no_of_days_join","previous_increment","next_increment_date","setState","HR","subList","filter","empl","table","frontend","show_loading","Component","mapStateToProps","toJS","logged_user","userLogin","usersList","empSalaryList","mapDispatchToProps","dispatch","isAlreadyLogin","fetchUserSalaryDetails","VisibleViewSalary","RouterVisibleViewSalary"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router';\nimport * as _ from 'lodash';\nimport {CONFIG} from '../../../config/index';\nimport Menu from '../../../components/generic/Menu';\nimport {isNotUserValid} from '../../../services/generic';\nimport Header from '../../../components/generic/Header';\nimport SalaryList from '../../../modules/salary/components/viewSalary/SalaryList';\nimport * as actions from '../../../redux/actions';\nimport * as actions_salary from '../../../redux/salary/actions/viewSalary';\n\nclass ViewSalary extends React.Component {\n  constructor (props) {\n    super(props);\n    this.props.onIsAlreadyLogin();\n    this.state = {\n      empList: []\n    };\n  }\n  componentWillMount () {\n    this.props.onFetchUserSalaryDetails();\n  }\n  componentWillReceiveProps (props) {\n    let isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n    if (isNotValid.status) {\n      this.props.history.push(isNotValid.redirectTo);\n    }\n    let emp = [];\n    if (props.loggedUser.data.role === CONFIG.ADMIN) {\n      if (props.employee.employee.length > 0) {\n        _.forEach(props.employee.employee, function (ob, i) {\n          emp.push({\n            'image':               ob.slack_image,\n            'empName':             ob.name,\n            'designation':         ob.jobtitle,\n            'salary':              ob.salary_detail,\n            'holdingAmountDetail': ob.holdin_amt_detail,\n            'dateOfJoining':       ob.dateofjoining,\n            'noOfDaysSinceJoined': String(ob.no_of_days_join),\n            'preSalaryIncDetail':  String(ob.previous_increment),\n            'nextSallaryInc':      ob.next_increment_date\n          });\n        });\n        this.setState({empList: emp});\n      }\n    } else if (props.loggedUser.data.role === CONFIG.HR) {\n      let subList = _.filter(props.employee.employee, (empl) => (empl.previous_increment === ''));\n      let emp = [];\n      if (subList.length > 0) {\n        _.forEach(subList, function (ob, i) {\n          emp.push({\n            'image':               ob.slack_image,\n            'empName':             ob.name,\n            'designation':         ob.jobtitle,\n            'salary':              ob.salary_detail,\n            'holdingAmountDetail': ob.holdin_amt_detail,\n            'dateOfJoining':       ob.dateofjoining,\n            'noOfDaysSinceJoined': String(ob.no_of_days_join),\n            'preSalaryIncDetail':  String(ob.previous_increment),\n            'nextSallaryInc':      ob.next_increment_date\n          });\n        });\n        this.setState({empList: emp});\n      }\n    }\n  }\n\n  render () {\n    let table = (this.state.empList.length > 0)\n      ? <SalaryList {...this.props} empList={this.state.empList} />\n      : '';\n    return (\n      <div>\n        <Menu {...this.props} />\n        <div id=\"content\" className=\"app-content box-shadow-z0\" role=\"main\">\n          <Header pageTitle={'View Salary'} showLoading={this.props.frontend.show_loading} />\n          <div className=\"app-body\" id=\"view\">\n            <div className=\"padding\">\n              {table}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nfunction mapStateToProps (state) {\n  return {\n    frontend:   state.frontend.toJS(),\n    loggedUser: state.logged_user.userLogin,\n    usersList:  state.usersList.toJS(),\n    employee:   state.empSalaryList.toJS()\n  };\n}\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onIsAlreadyLogin: () => {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    onFetchUserSalaryDetails: () => {\n      return dispatch(actions_salary.fetchUserSalaryDetails());\n    }\n  };\n};\n\nconst VisibleViewSalary = connect(mapStateToProps, mapDispatchToProps)(ViewSalary);\n\nconst RouterVisibleViewSalary = withRouter(VisibleViewSalary);\n\nexport default RouterVisibleViewSalary;\n"]},"metadata":{},"sourceType":"module"}