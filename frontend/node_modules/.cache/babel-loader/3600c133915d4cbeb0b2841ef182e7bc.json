{"ast":null,"code":"import _classCallCheck from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/var/www/html/ReactReduxHR/frontend/src/modules/leave/containers/applyLeave.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport * as _ from 'lodash';\nimport { notify } from '../../../services/notify';\nimport Menu from '../../../components/generic/Menu';\nimport { isNotUserValid } from '../../../services/generic';\nimport { CONFIG } from '../../../config/index';\nimport UsersList from '../../../components/generic/UsersList';\nimport Header from '../../../components/generic/Header';\nimport UsersListHeader from '../../../components/generic/UsersListHeader';\nimport ApplyLeaveForm from '../../../modules/leave/components/applyLeave/ApplyLeaveForm';\nimport * as actions from '../../../redux/actions';\nimport * as actions_usersList from '../../../redux/generic/actions/usersList';\nimport * as actions_policy from '../../../redux/policyDocuments/actions/index';\nimport * as actions_apply_leave from '../../../redux/leave/actions/applyLeave';\nimport * as actions_manageLeave from \"../../../redux/leave/actions/manageLeave\";\n\nvar ApplyLeave =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ApplyLeave, _React$Component);\n\n  function ApplyLeave(props) {\n    var _this;\n\n    _classCallCheck(this, ApplyLeave);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ApplyLeave).call(this, props));\n\n    _this.props.onIsAlreadyLogin();\n\n    _this.state = {\n      'defaultUserDisplay': '',\n      'selected_user_name': '',\n      'selected_user_image': '',\n      'selected_user_jobtitle': '',\n      'selected_user_id': '',\n      'show_status_message': true\n    };\n    _this.onUserClick = _this.onUserClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.doApplyLeave = _this.doApplyLeave.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ApplyLeave, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.onFetchUserPolicyDocument();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      window.scrollTo(0, 0);\n      var isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n\n      if (isNotValid.status) {\n        this.props.history.push(isNotValid.redirectTo);\n      }\n\n      if (props.loggedUser.data.role === CONFIG.ADMIN || props.loggedUser.data.role === CONFIG.HR) {\n        if (this.state.defaultUserDisplay === '') {\n          props.onUsersList();\n        }\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.loggedUser.data.role === CONFIG.ADMIN || this.props.loggedUser.data.role === CONFIG.HR) {\n        if (this.state.defaultUserDisplay === '') {\n          if (this.props.usersList.users.length > 0) {\n            var firstUser = this.props.usersList.users[0];\n            var defaultUserId = firstUser.user_Id;\n            this.onUserClick(defaultUserId);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"onUserClick\",\n    value: function onUserClick(userid) {\n      var selected_user_name = '';\n      var selected_user_image = '';\n      var selected_user_jobtitle = '';\n      var selected_user_id = '';\n\n      if (this.props.usersList.users.length > 0) {\n        var userDetails = _.find(this.props.usersList.users, {\n          'user_Id': userid\n        });\n\n        if (typeof userDetails !== 'undefined') {\n          selected_user_name = userDetails.name;\n          selected_user_image = userDetails.slack_profile.image_192;\n          selected_user_jobtitle = userDetails.jobtitle;\n          selected_user_id = userDetails.user_Id;\n        }\n      }\n\n      this.setState({\n        'defaultUserDisplay': userid,\n        'selected_user_name': selected_user_name,\n        'selected_user_image': selected_user_image,\n        'selected_user_jobtitle': selected_user_jobtitle,\n        'selected_user_id': selected_user_id,\n        'show_status_message': false\n      });\n    }\n  }, {\n    key: \"doApplyLeave\",\n    value: function doApplyLeave(start, end, days, reason, userid, day_status, leaveType, late_reason) {\n      this.setState({\n        show_status_message: true\n      });\n      this.props.onApplyLeave(start, end, days, reason, userid, day_status, leaveType, late_reason).then(function (data) {\n        notify('Success !', data, 'success');\n      }).catch(function (error) {\n        notify('Error !', error, 'error');\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var status_message = '';\n\n      if (this.props.applyLeave.status_message !== '' && this.state.show_status_message === true) {\n        status_message = React.createElement(\"span\", {\n          className: \"well\",\n          style: {\n            background: '#60cffa',\n            padding: '5px',\n            marginLeft: '8px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, this.props.applyLeave.status_message);\n      }\n\n      var mainDivs = this.props.loggedUser.data.role === CONFIG.ADMIN || this.props.loggedUser.data.role === CONFIG.HR ? React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-3 hidden-xs\",\n        id: \"fixedScroll\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(UsersList, {\n        users: this.props.usersList.users,\n        selectedUserId: this.state.selected_user_id,\n        onUserClick: this.onUserClick,\n        props: this.props,\n        top: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-xs-12 col-sm-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"p-a text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"\",\n        className: \"text-md m-t block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, this.state.selected_user_name), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, this.state.selected_user_jobtitle)))), React.createElement(\"div\", {\n        className: \"box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"box-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(ApplyLeaveForm, Object.assign({\n        forAdmin: true,\n        doApplyLeave: this.doApplyLeave,\n        selectedUserId: this.state.selected_user_id\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      })))))) : React.createElement(\"div\", {\n        className: \"box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"box-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(ApplyLeaveForm, Object.assign({\n        doApplyLeave: this.doApplyLeave,\n        forAdmin: false\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }))));\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Menu, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"content\",\n        className: \"app-content box-shadow-z0\",\n        role: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Header, {\n        pageTitle: 'Apply Leave',\n        status: status_message,\n        showLoading: this.props.frontend.show_loading,\n        userListHeader: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), React.createElement(UsersListHeader, {\n        users: this.props.usersList.users,\n        selectedUserId: this.state.selected_user_id,\n        onUserClick: this.onUserClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"app-body\",\n        id: \"view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"padding p-t-lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, mainDivs))));\n    }\n  }]);\n\n  return ApplyLeave;\n}(React.Component);\n\nApplyLeave.styles = {\n  height100per: {\n    'minHeight': '150px'\n  }\n};\n\nfunction mapStateToProps(state) {\n  return {\n    frontend: state.frontend.toJS(),\n    loggedUser: state.logged_user.userLogin,\n    usersList: state.usersList.toJS(),\n    applyLeave: state.applyLeave.toJS(),\n    policyDocuments: state.policyDocuments.policyDocument\n  };\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onIsAlreadyLogin: function onIsAlreadyLogin() {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    onApplyLeave: function onApplyLeave(from_date, to_date, no_of_days, reason, userId, day_status, leaveType, late_reason) {\n      return dispatch(actions_apply_leave.apply_leave(from_date, to_date, no_of_days, reason, userId, day_status, leaveType, late_reason));\n    },\n    onDaysBetweenLeaves: function onDaysBetweenLeaves(startDate, endDate) {\n      return dispatch(actions_apply_leave.getDaysBetweenLeaves(startDate, endDate));\n    },\n    onUsersList: function onUsersList() {\n      return dispatch(actions_usersList.get_users_list());\n    },\n    onFetchUserPolicyDocument: function onFetchUserPolicyDocument() {\n      return dispatch(actions.requestUserPolicyDocument());\n    },\n    onDocRequired: function onDocRequired(leaveid, data, comment) {\n      return dispatch(actions_manageLeave.docRequired(leaveid, data, comment));\n    }\n  };\n};\n\nvar VisibleApplyLeave = connect(mapStateToProps, mapDispatchToProps)(ApplyLeave);\nvar RouterVisibleApplyLeave = withRouter(VisibleApplyLeave);\nexport default RouterVisibleApplyLeave;","map":{"version":3,"sources":["/var/www/html/ReactReduxHR/frontend/src/modules/leave/containers/applyLeave.jsx"],"names":["React","connect","withRouter","_","notify","Menu","isNotUserValid","CONFIG","UsersList","Header","UsersListHeader","ApplyLeaveForm","actions","actions_usersList","actions_policy","actions_apply_leave","actions_manageLeave","ApplyLeave","props","onIsAlreadyLogin","state","onUserClick","bind","doApplyLeave","onFetchUserPolicyDocument","window","scrollTo","isNotValid","location","pathname","loggedUser","status","history","push","redirectTo","data","role","ADMIN","HR","defaultUserDisplay","onUsersList","usersList","users","length","firstUser","defaultUserId","user_Id","userid","selected_user_name","selected_user_image","selected_user_jobtitle","selected_user_id","userDetails","find","name","slack_profile","image_192","jobtitle","setState","start","end","days","reason","day_status","leaveType","late_reason","show_status_message","onApplyLeave","then","catch","error","status_message","applyLeave","background","padding","marginLeft","mainDivs","frontend","show_loading","Component","styles","height100per","mapStateToProps","toJS","logged_user","userLogin","policyDocuments","policyDocument","mapDispatchToProps","dispatch","isAlreadyLogin","from_date","to_date","no_of_days","userId","apply_leave","onDaysBetweenLeaves","startDate","endDate","getDaysBetweenLeaves","get_users_list","requestUserPolicyDocument","onDocRequired","leaveid","comment","docRequired","VisibleApplyLeave","RouterVisibleApplyLeave"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router';\nimport * as _ from 'lodash';\nimport {notify} from '../../../services/notify';\nimport Menu from '../../../components/generic/Menu';\nimport {isNotUserValid} from '../../../services/generic';\nimport {CONFIG} from '../../../config/index';\nimport UsersList from '../../../components/generic/UsersList';\nimport Header from '../../../components/generic/Header';\nimport UsersListHeader from '../../../components/generic/UsersListHeader';\nimport ApplyLeaveForm from '../../../modules/leave/components/applyLeave/ApplyLeaveForm';\nimport * as actions from '../../../redux/actions';\nimport * as actions_usersList from '../../../redux/generic/actions/usersList';\nimport * as actions_policy from '../../../redux/policyDocuments/actions/index';\nimport * as actions_apply_leave from '../../../redux/leave/actions/applyLeave';\nimport * as actions_manageLeave from \"../../../redux/leave/actions/manageLeave\";\n\nclass ApplyLeave extends React.Component {\n  constructor (props) {\n    super(props);\n    this.props.onIsAlreadyLogin();\n    this.state = {\n      'defaultUserDisplay':     '',\n      'selected_user_name':     '',\n      'selected_user_image':    '',\n      'selected_user_jobtitle': '',\n      'selected_user_id':       '',\n      'show_status_message':    true\n    };\n    this.onUserClick = this.onUserClick.bind(this);\n    this.doApplyLeave = this.doApplyLeave.bind(this);\n  }\n  componentWillMount () {\n    this.props.onFetchUserPolicyDocument();\n  }\n  componentWillReceiveProps (props) {\n    window.scrollTo(0, 0);\n    let isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n    if (isNotValid.status) {\n      this.props.history.push(isNotValid.redirectTo);\n    }\n    if (props.loggedUser.data.role === CONFIG.ADMIN || props.loggedUser.data.role === CONFIG.HR) {\n      if (this.state.defaultUserDisplay === '') {\n        props.onUsersList();\n      }\n    }\n  }\n  componentDidUpdate () {\n    if (this.props.loggedUser.data.role === CONFIG.ADMIN || this.props.loggedUser.data.role === CONFIG.HR) {\n      if (this.state.defaultUserDisplay === '') {\n        if (this.props.usersList.users.length > 0) {\n          let firstUser = this.props.usersList.users[0];\n          let defaultUserId = firstUser.user_Id;\n          this.onUserClick(defaultUserId);\n        }\n      }\n    }\n  }\n  onUserClick (userid) {\n    let selected_user_name = '';\n    let selected_user_image = '';\n    let selected_user_jobtitle = '';\n    let selected_user_id = '';\n\n    if (this.props.usersList.users.length > 0) {\n      let userDetails = _.find(this.props.usersList.users, {'user_Id': userid});\n      if (typeof userDetails !== 'undefined') {\n        selected_user_name = userDetails.name;\n        selected_user_image = userDetails.slack_profile.image_192;\n        selected_user_jobtitle = userDetails.jobtitle;\n        selected_user_id = userDetails.user_Id;\n      }\n    }\n    this.setState({\n      'defaultUserDisplay':     userid,\n      'selected_user_name':     selected_user_name,\n      'selected_user_image':    selected_user_image,\n      'selected_user_jobtitle': selected_user_jobtitle,\n      'selected_user_id':       selected_user_id,\n      'show_status_message':    false\n    });\n  }\n  doApplyLeave (start, end, days, reason, userid, day_status, leaveType, late_reason) {\n    this.setState({show_status_message: true});\n    this.props.onApplyLeave(start, end, days, reason, userid, day_status, leaveType, late_reason).then((data) => {\n      notify('Success !', data, 'success');\n    }).catch((error) => {\n      notify('Error !', error, 'error');\n    });\n  }\n  \n  render () {\n    let status_message = '';\n    if (this.props.applyLeave.status_message !== '' && this.state.show_status_message === true) {\n      status_message = <span className=\"well\" style={{background: '#60cffa', padding: '5px', marginLeft: '8px'}}>\n        {this.props.applyLeave.status_message}</span>;\n    }\n\n    let mainDivs = (this.props.loggedUser.data.role === CONFIG.ADMIN || this.props.loggedUser.data.role === CONFIG.HR\n      ? <div className=\"row\">\n        <div className=\"col-sm-3 hidden-xs\" id=\"fixedScroll\">\n          <UsersList users={this.props.usersList.users} selectedUserId={this.state.selected_user_id} onUserClick={this.onUserClick} props={this.props} top={10} />\n        </div>\n        <div className=\"col-xs-12 col-sm-9\">\n          <div className=\"box\">\n            <div className=\"p-a text-center\">\n              <a href=\"\" className=\"text-md m-t block\">{this.state.selected_user_name}</a>\n              <p>\n                <small>{this.state.selected_user_jobtitle}</small>\n              </p>\n            </div>\n          </div>\n          <div className=\"box\">\n            <div className=\"box-body\">\n              <ApplyLeaveForm forAdmin doApplyLeave={this.doApplyLeave} selectedUserId={this.state.selected_user_id} {...this.props} />\n            </div>\n          </div>\n        </div>\n      </div>\n      : <div className=\"box\">\n        <div className=\"box-body\">\n          <ApplyLeaveForm doApplyLeave={this.doApplyLeave} forAdmin={false} {...this.props} />\n        </div>\n      </div>);\n\n    return (\n      <div >\n        <Menu {...this.props} />\n        <div id=\"content\" className=\"app-content box-shadow-z0\" role=\"main\">\n          <Header pageTitle={'Apply Leave'} status={status_message} showLoading={this.props.frontend.show_loading} userListHeader />\n          <UsersListHeader users={this.props.usersList.users} selectedUserId={this.state.selected_user_id} onUserClick={this.onUserClick} />\n          <div className=\"app-body\" id=\"view\">\n            <div className=\"padding p-t-lg\">\n              {mainDivs}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nApplyLeave.styles = {\n  height100per: {\n    'minHeight': '150px'\n  }\n};\n\nfunction mapStateToProps (state) {\n  return {\n    frontend:        state.frontend.toJS(),\n    loggedUser:      state.logged_user.userLogin,\n    usersList:       state.usersList.toJS(),\n    applyLeave:      state.applyLeave.toJS(),\n    policyDocuments: state.policyDocuments.policyDocument\n  };\n}\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onIsAlreadyLogin: () => {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    onApplyLeave: (from_date, to_date, no_of_days, reason, userId, day_status, leaveType, late_reason) => {\n      return dispatch(actions_apply_leave.apply_leave(from_date, to_date, no_of_days, reason, userId, day_status, leaveType, late_reason));\n    },\n    onDaysBetweenLeaves: (startDate, endDate) => {\n      return dispatch(actions_apply_leave.getDaysBetweenLeaves(startDate, endDate));\n    },\n    onUsersList: () => {\n      return dispatch(actions_usersList.get_users_list());\n    },\n    onFetchUserPolicyDocument: () => {\n      return dispatch(actions.requestUserPolicyDocument());\n    },\n    onDocRequired: (leaveid, data, comment) => {\n      return dispatch(actions_manageLeave.docRequired(leaveid, data, comment));\n    }\n  };\n};\n\nconst VisibleApplyLeave = connect(mapStateToProps, mapDispatchToProps)(ApplyLeave);\n\nconst RouterVisibleApplyLeave = withRouter(VisibleApplyLeave);\n\nexport default RouterVisibleApplyLeave;\n"]},"metadata":{},"sourceType":"module"}