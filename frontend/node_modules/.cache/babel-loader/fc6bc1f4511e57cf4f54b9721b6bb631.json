{"ast":null,"code":"import _classCallCheck from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/var/www/html/ReactReduxHR/frontend/src/modules/attendance/containers/Home.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { withRouter } from 'react-router';\nimport { notify } from '../../../services/notify';\nimport Menu from '../../../components/generic/Menu';\nimport { isNotUserValid } from '../../../services/generic';\nimport UsersList from '../../../components/generic/UsersList';\nimport Header from '../../../components/generic/Header';\nimport UserMonthlyAttendance from '../../../components/attendance/UserMonthlyAttendance';\nimport UserDaySummary from '../../../modules/attendance/components/UserDaySummary'; // import * as actionsUsersList from '../../../redux/generic/actions/usersList';\n// import * as actionsMonthlyAttendance from '../../../redux/attendance/actions/monthlyAttendance';\n// import * as actionsUserDaySummary from '../../../redux/attendance/actions/userDaySummary';\n\nimport * as actions from '../../../redux/actions';\n\nvar Home =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n\n    _this.props.isAlreadyLogin();\n\n    _this.state = {\n      'defaultUserDisplay': '',\n      'daysummary_userid': '',\n      'daysummary_date': '',\n      year: '',\n      month: ''\n    };\n    _this.onUserClick = _this.onUserClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onShowDaySummary = _this.onShowDaySummary.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.monthToggle = _this.monthToggle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.requestUsersList();\n      var d = new Date();\n      var year = d.getFullYear();\n      var month = d.getMonth() + 1; // +1 since getMonth starts from 0\n\n      this.setState({\n        year: year,\n        month: month\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      var isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n\n      if (isNotValid.status) {\n        this.props.history.push(isNotValid.redirectTo);\n      }\n\n      if (props.userDaySummary.status_message !== '') {\n        notify(props.userDaySummary.status_message);\n      }\n\n      if (this.state.defaultUserDisplay === '') {\n        if (props.usersList.users && props.usersList.users.length > 0) {\n          var firstUser = props.usersList.users[0];\n          var defaultUserId = firstUser.user_Id;\n          this.onUserClick(defaultUserId);\n        }\n      }\n    }\n  }, {\n    key: \"onUserClick\",\n    value: function onUserClick(userid) {\n      this.setState({\n        'defaultUserDisplay': userid\n      });\n      this.props.requestUserAttendance({\n        userid: userid,\n        year: this.state.year,\n        month: this.state.month\n      });\n    }\n  }, {\n    key: \"monthToggle\",\n    value: function monthToggle(u, y, m) {\n      this.setState({\n        year: y,\n        month: m\n      });\n      this.props.requestUserAttendance({\n        userid: u,\n        year: y,\n        month: m\n      });\n    }\n  }, {\n    key: \"onShowDaySummary\",\n    value: function onShowDaySummary(userid, date) {\n      this.setState({\n        daysummary_userid: userid,\n        daysummary_date: date\n      });\n      this.props.requestUserDaySummary({\n        userid: userid,\n        date: date\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Menu, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })), React.createElement(UserDaySummary, Object.assign({\n        userid: this.state.daysummary_userid,\n        date: this.state.daysummary_date,\n        year: this.state.year,\n        month: this.state.month\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"content\",\n        className: \"app-content box-shadow-z0\",\n        role: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Header, {\n        pageTitle: 'Users',\n        showLoading: this.props.frontend.show_loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"app-body\",\n        id: \"view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-2\",\n        id: \"fixedScroll\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(UsersList, {\n        users: this.props.usersList.users,\n        onUserClick: this.onUserClick,\n        selectedUserId: this.props.monthlyAttendance.userid,\n        top: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(UserMonthlyAttendance, {\n        monthlyAttendance: this.props.monthlyAttendance,\n        monthToggle: this.monthToggle,\n        onShowDaySummary: this.onShowDaySummary,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return Home;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    frontend: state.frontend.toJS(),\n    loggedUser: state.logged_user.userLogin,\n    usersList: state.usersList.toJS(),\n    monthlyAttendance: state.monthlyAttendance.toJS(),\n    userDaySummary: state.userDaySummary.toJS()\n  };\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators(actions, dispatch);\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Home));","map":{"version":3,"sources":["/var/www/html/ReactReduxHR/frontend/src/modules/attendance/containers/Home.jsx"],"names":["React","connect","bindActionCreators","withRouter","notify","Menu","isNotUserValid","UsersList","Header","UserMonthlyAttendance","UserDaySummary","actions","Home","props","isAlreadyLogin","state","year","month","onUserClick","bind","onShowDaySummary","monthToggle","requestUsersList","d","Date","getFullYear","getMonth","setState","isNotValid","location","pathname","loggedUser","status","history","push","redirectTo","userDaySummary","status_message","defaultUserDisplay","usersList","users","length","firstUser","defaultUserId","user_Id","userid","requestUserAttendance","u","y","m","date","daysummary_userid","daysummary_date","requestUserDaySummary","frontend","show_loading","monthlyAttendance","Component","mapStateToProps","toJS","logged_user","userLogin","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {withRouter} from 'react-router';\nimport {notify} from '../../../services/notify';\nimport Menu from '../../../components/generic/Menu';\nimport {isNotUserValid} from '../../../services/generic';\nimport UsersList from '../../../components/generic/UsersList';\nimport Header from '../../../components/generic/Header';\nimport UserMonthlyAttendance from '../../../components/attendance/UserMonthlyAttendance';\nimport UserDaySummary from '../../../modules/attendance/components/UserDaySummary';\n// import * as actionsUsersList from '../../../redux/generic/actions/usersList';\n// import * as actionsMonthlyAttendance from '../../../redux/attendance/actions/monthlyAttendance';\n// import * as actionsUserDaySummary from '../../../redux/attendance/actions/userDaySummary';\nimport * as actions from '../../../redux/actions';\n\nclass Home extends React.Component {\n  constructor (props) {\n    super(props);\n    this.props.isAlreadyLogin();\n    this.state = {\n      'defaultUserDisplay': '',\n      'daysummary_userid':  '',\n      'daysummary_date':    '',\n      year:                 '',\n      month:                ''\n    };\n    this.onUserClick = this.onUserClick.bind(this);\n    this.onShowDaySummary = this.onShowDaySummary.bind(this);\n    this.monthToggle = this.monthToggle.bind(this);\n  }\n  componentDidMount () {\n    this.props.requestUsersList();\n    let d = new Date();\n    let year = d.getFullYear();\n    let month = d.getMonth() + 1; // +1 since getMonth starts from 0\n    this.setState({year: year, month: month});\n  }\n  componentWillReceiveProps (props) {\n    let isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n    if (isNotValid.status) {\n      this.props.history.push(isNotValid.redirectTo);\n    }\n\n    if (props.userDaySummary.status_message !== '') {\n      notify(props.userDaySummary.status_message);\n    }\n\n    if (this.state.defaultUserDisplay === '') {\n      if (props.usersList.users && props.usersList.users.length > 0) {\n        let firstUser = props.usersList.users[0];\n        let defaultUserId = firstUser.user_Id;\n        this.onUserClick(defaultUserId);\n      }\n    }\n  }\n  onUserClick (userid) {\n    this.setState({'defaultUserDisplay': userid});\n    this.props.requestUserAttendance({userid, year: this.state.year, month: this.state.month});\n  }\n  monthToggle (u, y, m) {\n    this.setState({year: y, month: m});\n    this.props.requestUserAttendance({userid: u, year: y, month: m});\n  }\n  onShowDaySummary (userid, date) {\n    this.setState({daysummary_userid: userid, daysummary_date: date});\n    this.props.requestUserDaySummary({userid, date});\n  }\n  render () {\n    return (\n      <div>\n        <Menu {...this.props} />\n        <UserDaySummary userid={this.state.daysummary_userid} date={this.state.daysummary_date} year={this.state.year} month={this.state.month} {...this.props} />\n        <div id=\"content\" className=\"app-content box-shadow-z0\" role=\"main\">\n          <Header pageTitle={'Users'} showLoading={this.props.frontend.show_loading} />\n          <div className=\"app-body\" id=\"view\">\n            <div className=\"padding\">\n              <div className=\"row\">\n                <div className=\"col-md-2\" id=\"fixedScroll\">\n                  <UsersList users={this.props.usersList.users} onUserClick={this.onUserClick} selectedUserId={this.props.monthlyAttendance.userid} top={10} />\n                </div>\n                <div className=\"col-md-10\">\n                  <UserMonthlyAttendance monthlyAttendance={this.props.monthlyAttendance} monthToggle={this.monthToggle} onShowDaySummary={this.onShowDaySummary} />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps (state) {\n  return {\n    frontend:          state.frontend.toJS(),\n    loggedUser:        state.logged_user.userLogin,\n    usersList:         state.usersList.toJS(),\n    monthlyAttendance: state.monthlyAttendance.toJS(),\n    userDaySummary:    state.userDaySummary.toJS()\n  };\n}\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(actions, dispatch);\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Home));\n"]},"metadata":{},"sourceType":"module"}