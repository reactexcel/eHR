{"ast":null,"code":"import _classCallCheck from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/var/www/html/ReactReduxHR/frontend/src/modules/attendance/containers/monthlyAttendance.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { withRouter } from 'react-router';\nimport Menu from '../../../components/generic/Menu';\nimport { isNotUserValid } from '../../../services/generic';\nimport Header from '../../../components/generic/Header';\nimport { notify } from '../../../services/notify';\nimport EmpDaySummary from '../../../modules/attendance/components/empDaySummary';\nimport UserMonthlyAttendance from '../../../components/attendance/UserMonthlyAttendance'; // import * as actionsUserDaySummary from '../../../redux/attendance/actions/userDaySummary';\n\nimport * as actions from '../../../redux/actions';\nimport isEqual from \"lodash/isEqual\";\n\nvar MonthlyAttendance =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MonthlyAttendance, _React$Component);\n\n  function MonthlyAttendance(props) {\n    var _this;\n\n    _classCallCheck(this, MonthlyAttendance);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MonthlyAttendance).call(this, props));\n\n    _this.props.isAlreadyLogin();\n\n    _this.state = {\n      'defaultUserDisplay': '',\n      'daysummary_userid': '',\n      'daysummary_date': '',\n      'year': '',\n      'month': ''\n    };\n    _this.onUserClick = _this.onUserClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onShowDaySummary = _this.onShowDaySummary.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.monthToggle = _this.monthToggle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MonthlyAttendance, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.isAlreadyLogin();\n      var userId = this.props.loggedUser.data.id;\n      this.setState({\n        'defaultUserDisplay': userId\n      });\n      var d = new Date();\n      var year = d.getFullYear();\n      var month = d.getMonth() + 1; // +1 since getMonth starts from 0\n\n      this.setState({\n        year: year,\n        month: month\n      });\n      this.props.requestUserAttendance({\n        userid: userId,\n        year: year,\n        month: month\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      var userId = props.loggedUser.data.id;\n      var isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n\n      if (isNotValid.status) {\n        this.props.history.push(isNotValid.redirectTo);\n      }\n\n      if (userId && !isEqual(props, this.props)) {\n        this.props.requestUserAttendance({\n          userid: userId,\n          year: this.state.year,\n          month: this.state.month\n        });\n      }\n    }\n  }, {\n    key: \"onShowDaySummary\",\n    value: function onShowDaySummary(userid, date) {\n      this.setState({\n        daysummary_userid: userid,\n        daysummary_date: date\n      });\n      this.props.requestUserDaySummary({\n        userid: userid,\n        date: date\n      });\n    }\n  }, {\n    key: \"onUserClick\",\n    value: function onUserClick(userid) {\n      this.setState({\n        'defaultUserDisplay': userid\n      });\n      this.props.requestUserAttendance({\n        userid: userid,\n        year: this.state.year,\n        month: this.state.month\n      });\n    }\n  }, {\n    key: \"monthToggle\",\n    value: function monthToggle(u, y, m) {\n      this.setState({\n        year: y,\n        month: m\n      });\n      this.props.requestUserAttendance({\n        userid: u,\n        year: y,\n        month: m\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(Menu, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      })), React.createElement(EmpDaySummary, Object.assign({\n        userid: this.state.daysummary_userid,\n        date: this.state.daysummary_date,\n        year: this.state.year,\n        month: this.state.month\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"content\",\n        className: \"app-content box-shadow-z0\",\n        role: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(Header, {\n        pageTitle: 'My Attendance',\n        showLoading: this.props.frontend.show_loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"app-body\",\n        id: \"view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-md-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(UserMonthlyAttendance, {\n        monthlyAttendance: this.props.monthlyAttendance,\n        monthToggle: this.monthToggle,\n        onShowDaySummary: this.onShowDaySummary,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return MonthlyAttendance;\n}(React.Component);\n\nMonthlyAttendance.styles = {\n  height100per: {\n    'minHeight': '150px'\n  }\n};\n\nfunction mapStateToProps(state) {\n  return {\n    frontend: state.frontend.toJS(),\n    userDaySummary: state.userDaySummary.toJS(),\n    empDaySummary: state.empDaySummary,\n    loggedUser: state.logged_user.userLogin,\n    monthlyAttendance: state.monthlyAttendance.toJS()\n  };\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators(actions, dispatch);\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(MonthlyAttendance));","map":{"version":3,"sources":["/var/www/html/ReactReduxHR/frontend/src/modules/attendance/containers/monthlyAttendance.jsx"],"names":["React","connect","bindActionCreators","withRouter","Menu","isNotUserValid","Header","notify","EmpDaySummary","UserMonthlyAttendance","actions","isEqual","MonthlyAttendance","props","isAlreadyLogin","state","onUserClick","bind","onShowDaySummary","monthToggle","userId","loggedUser","data","id","setState","d","Date","year","getFullYear","month","getMonth","requestUserAttendance","userid","isNotValid","location","pathname","status","history","push","redirectTo","date","daysummary_userid","daysummary_date","requestUserDaySummary","u","y","m","frontend","show_loading","monthlyAttendance","Component","styles","height100per","mapStateToProps","toJS","userDaySummary","empDaySummary","logged_user","userLogin","mapDispatchToProps","dispatch"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,kBAAR,QAAiC,OAAjC;AACA,SAAQC,UAAR,QAAyB,cAAzB;AACA,OAAOC,IAAP,MAAiB,kCAAjB;AACA,SAAQC,cAAR,QAA6B,2BAA7B;AACA,OAAOC,MAAP,MAAmB,oCAAnB;AACA,SAAQC,MAAR,QAAqB,0BAArB;AACA,OAAOC,aAAP,MAA0B,sDAA1B;AACA,OAAOC,qBAAP,MAAkC,sDAAlC,C,CACA;;AACA,OAAO,KAAKC,OAAZ,MAAyB,wBAAzB;AACA,OAAOC,OAAP,MAAoB,gBAApB;;IAEMC,iB;;;;;AACJ,6BAAaC,KAAb,EAAoB;AAAA;;AAAA;;AAClB,2FAAMA,KAAN;;AACA,UAAKA,KAAL,CAAWC,cAAX;;AACA,UAAKC,KAAL,GAAa;AACX,4BAAsB,EADX;AAEX,2BAAsB,EAFX;AAGX,yBAAsB,EAHX;AAIX,cAAsB,EAJX;AAKX,eAAsB;AALX,KAAb;AAOA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBC,IAAjB,uDAAnB;AACA,UAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBD,IAAtB,uDAAxB;AACA,UAAKE,WAAL,GAAmB,MAAKA,WAAL,CAAiBF,IAAjB,uDAAnB;AAZkB;AAanB;;;;yCACqB;AACpB,WAAKJ,KAAL,CAAWC,cAAX;AACA,UAAIM,MAAM,GAAG,KAAKP,KAAL,CAAWQ,UAAX,CAAsBC,IAAtB,CAA2BC,EAAxC;AACA,WAAKC,QAAL,CAAc;AAAC,8BAAsBJ;AAAvB,OAAd;AACA,UAAIK,CAAC,GAAG,IAAIC,IAAJ,EAAR;AACA,UAAIC,IAAI,GAAGF,CAAC,CAACG,WAAF,EAAX;AACA,UAAIC,KAAK,GAAGJ,CAAC,CAACK,QAAF,KAAe,CAA3B,CANoB,CAMU;;AAC9B,WAAKN,QAAL,CAAc;AAACG,QAAAA,IAAI,EAAEA,IAAP;AAAaE,QAAAA,KAAK,EAAEA;AAApB,OAAd;AACA,WAAKhB,KAAL,CAAWkB,qBAAX,CAAiC;AAACC,QAAAA,MAAM,EAAEZ,MAAT;AAAiBO,QAAAA,IAAI,EAAEA,IAAvB;AAA6BE,QAAAA,KAAK,EAACA;AAAnC,OAAjC;AAED;;;8CAC0BhB,K,EAAO;AAChC,UAAMO,MAAM,GAACP,KAAK,CAACQ,UAAN,CAAiBC,IAAjB,CAAsBC,EAAnC;AACA,UAAIU,UAAU,GAAG5B,cAAc,CAAC,KAAKQ,KAAL,CAAWqB,QAAX,CAAoBC,QAArB,EAA+BtB,KAAK,CAACQ,UAArC,CAA/B;;AACA,UAAIY,UAAU,CAACG,MAAf,EAAuB;AACrB,aAAKvB,KAAL,CAAWwB,OAAX,CAAmBC,IAAnB,CAAwBL,UAAU,CAACM,UAAnC;AACD;;AACD,UAAGnB,MAAM,IAAK,CAACT,OAAO,CAACE,KAAD,EAAO,KAAKA,KAAZ,CAAtB,EAAyC;AACvC,aAAKA,KAAL,CAAWkB,qBAAX,CAAiC;AAACC,UAAAA,MAAM,EAAEZ,MAAT;AAAiBO,UAAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWY,IAAlC;AAAwCE,UAAAA,KAAK,EAAE,KAAKd,KAAL,CAAWc;AAA1D,SAAjC;AACD;AACF;;;qCACiBG,M,EAAQQ,I,EAAM;AAC9B,WAAKhB,QAAL,CAAc;AAACiB,QAAAA,iBAAiB,EAAET,MAApB;AAA4BU,QAAAA,eAAe,EAAEF;AAA7C,OAAd;AACA,WAAK3B,KAAL,CAAW8B,qBAAX,CAAiC;AAACX,QAAAA,MAAM,EAANA,MAAD;AAASQ,QAAAA,IAAI,EAAJA;AAAT,OAAjC;AACD;;;gCACYR,M,EAAQ;AACnB,WAAKR,QAAL,CAAc;AAAC,8BAAsBQ;AAAvB,OAAd;AACA,WAAKnB,KAAL,CAAWkB,qBAAX,CAAiC;AAACC,QAAAA,MAAM,EAANA,MAAD;AAASL,QAAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWY,IAA1B;AAAgCE,QAAAA,KAAK,EAAE,KAAKd,KAAL,CAAWc;AAAlD,OAAjC;AACD;;;gCACYe,C,EAAGC,C,EAAGC,C,EAAG;AACpB,WAAKtB,QAAL,CAAc;AAACG,QAAAA,IAAI,EAAEkB,CAAP;AAAUhB,QAAAA,KAAK,EAAEiB;AAAjB,OAAd;AACA,WAAKjC,KAAL,CAAWkB,qBAAX,CAAiC;AAACC,QAAAA,MAAM,EAAEY,CAAT;AAAYjB,QAAAA,IAAI,EAAEkB,CAAlB;AAAqBhB,QAAAA,KAAK,EAAEiB;AAA5B,OAAjC;AACD;;;6BACS;AACR,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD,oBAAU,KAAKjC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,EAEE,oBAAC,aAAD;AAAe,QAAA,MAAM,EAAE,KAAKE,KAAL,CAAW0B,iBAAlC;AAAqD,QAAA,IAAI,EAAE,KAAK1B,KAAL,CAAW2B,eAAtE;AAAuF,QAAA,IAAI,EAAE,KAAK3B,KAAL,CAAWY,IAAxG;AAA8G,QAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWc;AAAhI,SAA2I,KAAKhB,KAAhJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAFF,EAGE;AAAK,QAAA,EAAE,EAAC,SAAR;AAAkB,QAAA,SAAS,EAAC,2BAA5B;AAAwD,QAAA,IAAI,EAAC,MAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAE,eAAnB;AAAoC,QAAA,WAAW,EAAE,KAAKA,KAAL,CAAWkC,QAAX,CAAoBC,YAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAK,QAAA,SAAS,EAAC,UAAf;AAA0B,QAAA,EAAE,EAAC,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,qBAAD;AAAuB,QAAA,iBAAiB,EAAE,KAAKnC,KAAL,CAAWoC,iBAArD;AAAwE,QAAA,WAAW,EAAE,KAAK9B,WAA1F;AAAuG,QAAA,gBAAgB,EAAE,KAAKD,gBAA9H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAFF,CADF,CADF,CAFF,CAHF,CADF;AAoBD;;;;EArE6BlB,KAAK,CAACkD,S;;AAwEtCtC,iBAAiB,CAACuC,MAAlB,GAA2B;AACzBC,EAAAA,YAAY,EAAE;AACZ,iBAAa;AADD;AADW,CAA3B;;AAMA,SAASC,eAAT,CAA0BtC,KAA1B,EAAiC;AAC/B,SAAO;AACLgC,IAAAA,QAAQ,EAAWhC,KAAK,CAACgC,QAAN,CAAeO,IAAf,EADd;AAELC,IAAAA,cAAc,EAAKxC,KAAK,CAACwC,cAAN,CAAqBD,IAArB,EAFd;AAGLE,IAAAA,aAAa,EAAMzC,KAAK,CAACyC,aAHpB;AAILnC,IAAAA,UAAU,EAASN,KAAK,CAAC0C,WAAN,CAAkBC,SAJhC;AAKLT,IAAAA,iBAAiB,EAAElC,KAAK,CAACkC,iBAAN,CAAwBK,IAAxB;AALd,GAAP;AAOD;;AACD,IAAMK,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,EAAc;AACvC,SAAO1D,kBAAkB,CAACQ,OAAD,EAAUkD,QAAV,CAAzB;AACD,CAFD;;AAIA,eAAezD,UAAU,CAACF,OAAO,CAACoD,eAAD,EAAkBM,kBAAlB,CAAP,CAA6C/C,iBAA7C,CAAD,CAAzB","sourcesContent":["import React from 'react';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {withRouter} from 'react-router';\nimport Menu from '../../../components/generic/Menu';\nimport {isNotUserValid} from '../../../services/generic';\nimport Header from '../../../components/generic/Header';\nimport {notify} from '../../../services/notify';\nimport EmpDaySummary from '../../../modules/attendance/components/empDaySummary';\nimport UserMonthlyAttendance from '../../../components/attendance/UserMonthlyAttendance';\n// import * as actionsUserDaySummary from '../../../redux/attendance/actions/userDaySummary';\nimport * as actions from '../../../redux/actions';\nimport isEqual from \"lodash/isEqual\";\n\nclass MonthlyAttendance extends React.Component {\n  constructor (props) {\n    super(props);\n    this.props.isAlreadyLogin();\n    this.state = {\n      'defaultUserDisplay': '',\n      'daysummary_userid':  '',\n      'daysummary_date':    '',\n      'year':               '',\n      'month':              ''\n    };\n    this.onUserClick = this.onUserClick.bind(this);\n    this.onShowDaySummary = this.onShowDaySummary.bind(this);\n    this.monthToggle = this.monthToggle.bind(this);\n  }\n  componentWillMount () {    \n    this.props.isAlreadyLogin();\n    let userId = this.props.loggedUser.data.id;    \n    this.setState({'defaultUserDisplay': userId});\n    let d = new Date();\n    let year = d.getFullYear();\n    let month = d.getMonth() + 1; // +1 since getMonth starts from 0\n    this.setState({year: year, month: month});\n    this.props.requestUserAttendance({userid: userId, year: year, month:month});\n\n  }\n  componentWillReceiveProps (props) {    \n    const userId=props.loggedUser.data.id;\n    let isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n    if (isNotValid.status) {\n      this.props.history.push(isNotValid.redirectTo);\n    }\n    if(userId  && !isEqual(props,this.props)){\n      this.props.requestUserAttendance({userid: userId, year: this.state.year, month: this.state.month});\n    }\n  }\n  onShowDaySummary (userid, date) {\n    this.setState({daysummary_userid: userid, daysummary_date: date});\n    this.props.requestUserDaySummary({userid, date});\n  }\n  onUserClick (userid) {\n    this.setState({'defaultUserDisplay': userid});\n    this.props.requestUserAttendance({userid, year: this.state.year, month: this.state.month});\n  }\n  monthToggle (u, y, m) {\n    this.setState({year: y, month: m});\n    this.props.requestUserAttendance({userid: u, year: y, month: m});\n  }\n  render () {\n    return (\n      <div >\n        <Menu {...this.props} />\n        <EmpDaySummary userid={this.state.daysummary_userid} date={this.state.daysummary_date} year={this.state.year} month={this.state.month} {...this.props} />\n        <div id=\"content\" className=\"app-content box-shadow-z0\" role=\"main\">\n          <Header pageTitle={'My Attendance'} showLoading={this.props.frontend.show_loading} />\n          <div className=\"app-body\" id=\"view\">\n            <div className=\"padding\">\n              <div className=\"row\">\n                <div className=\"col-md-1\"></div>\n                <div className=\"col-md-10\">\n                  <UserMonthlyAttendance monthlyAttendance={this.props.monthlyAttendance} monthToggle={this.monthToggle} onShowDaySummary={this.onShowDaySummary} />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nMonthlyAttendance.styles = {\n  height100per: {\n    'minHeight': '150px'\n  }\n};\n\nfunction mapStateToProps (state) {\n  return {\n    frontend:          state.frontend.toJS(),\n    userDaySummary:    state.userDaySummary.toJS(),\n    empDaySummary:     state.empDaySummary,\n    loggedUser:        state.logged_user.userLogin,\n    monthlyAttendance: state.monthlyAttendance.toJS()\n  };\n}\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(actions, dispatch);\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(MonthlyAttendance));\n"]},"metadata":{},"sourceType":"module"}