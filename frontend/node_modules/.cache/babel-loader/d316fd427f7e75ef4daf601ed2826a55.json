{"ast":null,"code":"import _classCallCheck from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/var/www/html/ReactReduxHR/frontend/src/modules/workingHours/containers/manageUserPendingHours.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { notify } from '../../../services/notify';\nimport Menu from '../../../components/generic/Menu';\nimport LoadingIcon from '../../../components/generic/LoadingIcon';\nimport { isNotUserValid } from '../../../services/generic';\nimport Header from '../../../components/generic/Header';\nimport UsersList from '../../../components/generic/UsersList';\nimport AddAsLeaveHour from '../components/AddAsLeaveHour';\nimport * as actions from '../../../redux/actions';\nimport UserPendingHoursList from '../components/UserPendingHoursList';\nimport * as actionsUsersList from '../../../redux/generic/actions/usersList';\nimport * as actionPendingHour from '../../../redux/workingHours/actions/managePendingLeave';\nimport * as actions_apply_leave from '../../../redux/leave/actions/applyLeave';\nimport * as actionsManageUserPendingHours from '../../../redux/workingHours/actions/manageUserPendingHour';\n\nvar ManageUserPendingHours =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ManageUserPendingHours, _React$Component);\n\n  function ManageUserPendingHours(props) {\n    var _this;\n\n    _classCallCheck(this, ManageUserPendingHours);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ManageUserPendingHours).call(this, props));\n\n    _this.props.onIsAlreadyLogin();\n\n    _this.state = {\n      'defaultUserDisplay': '',\n      'daysummary_date': '',\n      status_message: '',\n      active: 'active',\n      firstArrow: 'show',\n      secondArrow: 'hidden',\n      thirdArrow: 'hidden',\n      pendingList: 'show',\n      pendingUserList: 'hidden',\n      open: false,\n      edit: false\n    };\n    _this.callAddUserPendingHours = _this.callAddUserPendingHours.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.callFetchPendingUserList = _this.callFetchPendingUserList.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.doApplyLeave = _this.doApplyLeave.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.callOnDaysBetweenLeaves = _this.callOnDaysBetweenLeaves.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ManageUserPendingHours, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var d = new Date();\n      var year = d.getFullYear().toString();\n      var months = ('0' + (d.getMonth() + 1)).slice(-2).toString();\n      this.props.onUserPendingHoursData(year, months);\n      this.props.onUsersList();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      var isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n\n      if (isNotValid.status) {\n        this.props.history.push(isNotValid.redirectTo);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.state.defaultUserDisplay === '') {\n        if (this.props.usersList.users.length > 0) {\n          var firstUser = this.props.usersList.users[0];\n          var defaultUserName = firstUser.username;\n        }\n      }\n    }\n  }, {\n    key: \"callAddUserPendingHours\",\n    value: function callAddUserPendingHours(userid, pendingHour, empId) {\n      this.setState({\n        show_status_message: true\n      });\n      this.props.onAddUserPendingHours(userid, pendingHour, empId).then(function (message) {// notify('Success !', message, 'success');\n      }).catch(function (error) {\n        notify('Error !', error, 'error');\n      });\n    }\n  }, {\n    key: \"callFetchPendingUserList\",\n    value: function callFetchPendingUserList() {\n      this.onUserPendingHoursData();\n    }\n  }, {\n    key: \"doApplyLeave\",\n    value: function doApplyLeave(start, end, days, reason, userid, day_status, leaveType, late_reason, pending_id, year, month) {\n      this.setState({\n        show_status_message: true\n      });\n      this.props.onApplyLeave(start, end, days, reason, userid, day_status, leaveType, late_reason, pending_id, year, month).then(function (data) {\n        notify('Success !', data, 'success');\n      }).catch(function (error) {\n        notify('Error !', error, 'error');\n      });\n    }\n  }, {\n    key: \"callOnDaysBetweenLeaves\",\n    value: function callOnDaysBetweenLeaves() {\n      this.props.onDaysBetweenLeaves();\n    }\n  }, {\n    key: \"openPage\",\n    value: function openPage(toDisplay) {\n      if (toDisplay === 'pending_hour_list') {\n        this.setState({\n          pendingList: 'row',\n          firstArrow: 'show',\n          pendingUserList: 'hidden',\n          secondArrow: 'hidden'\n        });\n      } else if (toDisplay === 'view_user_pending_hours') {\n        this.setState({\n          pendingList: 'hidden',\n          firstArrow: 'hidden',\n          pendingUserList: 'row',\n          secondArrow: 'show'\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var pending_hour_list = React.createElement(UserPendingHoursList, Object.assign({\n        callFetchPendingUserList: this.callFetchPendingUserList,\n        manageUserPendingHours: this.props.manageUserPendingHours,\n        onUserPendingHoursData: this.props.onUserPendingHoursData,\n        doApplyLeave: this.props.doApplyLeave,\n        doApplyHalfLeave: this.props.doApplyHalfLeave,\n        callOnDaysBetweenLeaves: this.props.callOnDaysBetweenLeaves\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }));\n      var statusMessage = '';\n\n      if (this.props.manageUserPendingHours.status_message !== '') {\n        statusMessage = React.createElement(\"span\", {\n          className: \"label label-lg primary pos-rlt m-r-xs\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          className: \"arrow left b-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }), this.props.manageUserPendingHours.status_message);\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(Menu, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"content\",\n        className: \"app-content box-shadow-z0\",\n        role: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(Header, Object.assign({\n        pageTitle: 'Manage Employee Pending Hours'\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"app-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"app-body\",\n        id: \"view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(LoadingIcon, {\n        loading: this.props.frontend.show_loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }))), this.state.secondArrow === 'show' ? null : React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          marginTop: '2%',\n          marginLeft: '4%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-11 col-xs-offset-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"dker p-x\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-6 pull-sm-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"p-y-md clearfix nav-active-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"nav nav-pills nav-sm\",\n        style: {\n          marginLeft: '4%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        onClick: function onClick() {\n          _this2.openPage('pending_hour_list');\n        },\n        className: \"nav-item \".concat(this.state.active),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"nav-link\",\n        href: \"\",\n        \"data-toggle\": \"tab\",\n        \"data-target\": \"#tab_1\",\n        \"aria-expanded\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"Pending Hour List\"), React.createElement(\"div\", {\n        className: this.state.firstArrow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"arrow bottom b-accent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      })))))))), React.createElement(\"div\", {\n        className: \"padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: this.state.pendingList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, pending_hour_list)))));\n    }\n  }]);\n\n  return ManageUserPendingHours;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    frontend: state.frontend.toJS(),\n    loggedUser: state.logged_user.userLogin,\n    usersList: state.usersList.toJS(),\n    manageUserPendingHours: state.manageUserPendingHours.toJS(),\n    applyLeave: state.applyLeave.toJS()\n  };\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onIsAlreadyLogin: function onIsAlreadyLogin() {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    onUsersList: function onUsersList() {\n      return dispatch(actionsUsersList.get_users_list());\n    },\n    onUserPendingHoursData: function onUserPendingHoursData(year, month) {\n      return dispatch(actionsManageUserPendingHours.getUserPendingHourList(year, month));\n    },\n    onAddUserPendingHours: function onAddUserPendingHours(userId, pendingHour, empId, year, month) {\n      return dispatch(actionsManageUserPendingHours.addUserPendingHour(userId, pendingHour, empId, year, month));\n    },\n    onApplyHalfLeave: function onApplyHalfLeave(no_of_days, userId, day_status, pending_id, year, month) {\n      return dispatch(actionPendingHour.applyPendingLeave(no_of_days, userId, day_status, pending_id, year, month));\n    },\n    onApplyLeave: function onApplyLeave(from_date, to_date, no_of_days, reason, userId, day_status, leaveType, late_reason, pending_id, year, month) {\n      return dispatch(actions_apply_leave.apply_leave(from_date, to_date, no_of_days, reason, userId, day_status, leaveType, late_reason, pending_id, year, month));\n    },\n    onDaysBetweenLeaves: function onDaysBetweenLeaves(startDate, endDate) {\n      return dispatch(actions_apply_leave.getDaysBetweenLeaves(startDate, endDate));\n    }\n  };\n};\n\nvar VisibleManageUserPendingHours = connect(mapStateToProps, mapDispatchToProps)(ManageUserPendingHours);\nvar RouterVisibleManageUserPendingHours = withRouter(VisibleManageUserPendingHours);\nexport default RouterVisibleManageUserPendingHours;","map":{"version":3,"sources":["/var/www/html/ReactReduxHR/frontend/src/modules/workingHours/containers/manageUserPendingHours.jsx"],"names":["React","connect","withRouter","notify","Menu","LoadingIcon","isNotUserValid","Header","UsersList","AddAsLeaveHour","actions","UserPendingHoursList","actionsUsersList","actionPendingHour","actions_apply_leave","actionsManageUserPendingHours","ManageUserPendingHours","props","onIsAlreadyLogin","state","status_message","active","firstArrow","secondArrow","thirdArrow","pendingList","pendingUserList","open","edit","callAddUserPendingHours","bind","callFetchPendingUserList","doApplyLeave","callOnDaysBetweenLeaves","d","Date","year","getFullYear","toString","months","getMonth","slice","onUserPendingHoursData","onUsersList","isNotValid","location","pathname","loggedUser","status","history","push","redirectTo","defaultUserDisplay","usersList","users","length","firstUser","defaultUserName","username","userid","pendingHour","empId","setState","show_status_message","onAddUserPendingHours","then","message","catch","error","start","end","days","reason","day_status","leaveType","late_reason","pending_id","month","onApplyLeave","data","onDaysBetweenLeaves","toDisplay","pending_hour_list","manageUserPendingHours","doApplyHalfLeave","statusMessage","frontend","show_loading","marginTop","marginLeft","openPage","Component","mapStateToProps","toJS","logged_user","userLogin","applyLeave","mapDispatchToProps","dispatch","isAlreadyLogin","get_users_list","getUserPendingHourList","userId","addUserPendingHour","onApplyHalfLeave","no_of_days","applyPendingLeave","from_date","to_date","apply_leave","startDate","endDate","getDaysBetweenLeaves","VisibleManageUserPendingHours","RouterVisibleManageUserPendingHours"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router';\nimport {notify} from '../../../services/notify';\nimport Menu from '../../../components/generic/Menu';\nimport LoadingIcon from '../../../components/generic/LoadingIcon';\nimport {isNotUserValid} from '../../../services/generic';\nimport Header from '../../../components/generic/Header';\nimport UsersList from '../../../components/generic/UsersList';\nimport AddAsLeaveHour from '../components/AddAsLeaveHour';\nimport * as actions from '../../../redux/actions';\nimport UserPendingHoursList from '../components/UserPendingHoursList';\nimport * as actionsUsersList from '../../../redux/generic/actions/usersList';\nimport * as actionPendingHour from '../../../redux/workingHours/actions/managePendingLeave';\nimport * as actions_apply_leave from '../../../redux/leave/actions/applyLeave';\nimport * as actionsManageUserPendingHours from '../../../redux/workingHours/actions/manageUserPendingHour';\n\nclass ManageUserPendingHours extends React.Component {\n  constructor (props) {\n    super(props);\n    this.props.onIsAlreadyLogin();\n    this.state = {\n      'defaultUserDisplay': '',\n      'daysummary_date':    '',\n      status_message:       '',\n      active:               'active',\n      firstArrow:           'show',\n      secondArrow:          'hidden',\n      thirdArrow:           'hidden',\n      pendingList:          'show',\n      pendingUserList:      'hidden',\n      open:                 false,\n      edit:                 false\n    };\n    this.callAddUserPendingHours = this.callAddUserPendingHours.bind(this);\n    this.callFetchPendingUserList = this.callFetchPendingUserList.bind(this);\n    this.doApplyLeave = this.doApplyLeave.bind(this);\n    this.callOnDaysBetweenLeaves = this.callOnDaysBetweenLeaves.bind(this);\n  }\n  componentWillMount () {\n    let d = new Date();\n    let year = d.getFullYear().toString();\n    let months = ('0' + (d.getMonth() + 1)).slice(-2).toString();\n    this.props.onUserPendingHoursData(year, months);\n    this.props.onUsersList();\n  }\n  componentWillReceiveProps (props) {\n    let isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n    if (isNotValid.status) {\n      this.props.history.push(isNotValid.redirectTo);\n    }\n  }\n\n  componentDidUpdate () {\n    if (this.state.defaultUserDisplay === '') {\n      if (this.props.usersList.users.length > 0) {\n        let firstUser = this.props.usersList.users[0];\n        let defaultUserName = firstUser.username;\n      }\n    }\n  }\n\n  callAddUserPendingHours (userid, pendingHour, empId) {\n    this.setState({show_status_message: true});\n    this.props.onAddUserPendingHours(userid, pendingHour, empId).then((message) => {\n      // notify('Success !', message, 'success');\n    }).catch((error) => {\n      notify('Error !', error, 'error');\n    });\n  }\n\n  callFetchPendingUserList () {\n    this.onUserPendingHoursData();\n  }\n\n  doApplyLeave (start, end, days, reason, userid, day_status, leaveType, late_reason, pending_id, year, month) {\n    this.setState({show_status_message: true});\n    this.props.onApplyLeave(start, end, days, reason, userid, day_status, leaveType, late_reason, pending_id, year, month).then((data) => {\n      notify('Success !', data, 'success');\n    }).catch((error) => {\n      notify('Error !', error, 'error');\n    });\n  }\n\n  callOnDaysBetweenLeaves () {\n    this.props.onDaysBetweenLeaves();\n  }\n  openPage (toDisplay) {\n    if (toDisplay === 'pending_hour_list') {\n      this.setState({\n        pendingList:     'row',\n        firstArrow:      'show',\n        pendingUserList: 'hidden',\n        secondArrow:     'hidden'\n      });\n    } else if ((toDisplay === 'view_user_pending_hours')) {\n      this.setState({\n        pendingList:     'hidden',\n        firstArrow:      'hidden',\n        pendingUserList: 'row',\n        secondArrow:     'show'\n      });\n    }\n  }\n\n  render () {\n    let pending_hour_list = <UserPendingHoursList\n      callFetchPendingUserList={this.callFetchPendingUserList}\n      manageUserPendingHours={this.props.manageUserPendingHours}\n      onUserPendingHoursData={this.props.onUserPendingHoursData}\n      doApplyLeave={this.props.doApplyLeave}\n      doApplyHalfLeave={this.props.doApplyHalfLeave}\n      callOnDaysBetweenLeaves={this.props.callOnDaysBetweenLeaves}\n      {...this.props} />;\n\n    let statusMessage = '';\n    if (this.props.manageUserPendingHours.status_message !== '') {\n      statusMessage = <span className=\"label label-lg primary pos-rlt m-r-xs\">\n        <b className=\"arrow left b-primary\"></b>{this.props.manageUserPendingHours.status_message}</span>;\n    }\n\n    return (\n      <div>\n        <Menu {...this.props} />\n\n        <div id=\"content\" className=\"app-content box-shadow-z0\" role=\"main\">\n          <Header pageTitle={'Manage Employee Pending Hours'} {...this.props} />\n          <div className=\"app-footer\">\n            <div></div>\n          </div>\n          <div className=\"app-body\" id=\"view\">\n            <div className=\"row\">\n              <div className=\"col-12\">\n                <LoadingIcon loading={this.props.frontend.show_loading} />\n              </div>\n            </div>\n            {this.state.secondArrow === 'show' ? null\n              : <div className=\"row\" style={{marginTop: '2%', marginLeft: '4%'}}>\n                <div className=\"col-md-11 col-xs-offset-0\">\n                </div>\n              </div>\n            }\n            <div className=\"dker p-x\">\n              <div className=\"row\">\n                <div className=\"col-sm-6 pull-sm-6\">\n                  <div className=\"p-y-md clearfix nav-active-primary\">\n                    <ul className=\"nav nav-pills nav-sm\" style={{marginLeft: '4%'}}>\n                      <li\n                        onClick={() => { this.openPage('pending_hour_list'); }}\n                        className={`nav-item ${this.state.active}`}>\n                        <a className=\"nav-link\"\n                          href=\"\"\n                          data-toggle=\"tab\"\n                          data-target=\"#tab_1\"\n                          aria-expanded=\"true\">Pending Hour List</a>\n                        <div className={this.state.firstArrow}>\n                          <span className=\"arrow bottom b-accent\"></span></div>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"padding\">\n              <div className={this.state.pendingList}>\n                {pending_hour_list}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps (state) {\n  return {\n    frontend:               state.frontend.toJS(),\n    loggedUser:             state.logged_user.userLogin,\n    usersList:              state.usersList.toJS(),\n    manageUserPendingHours: state.manageUserPendingHours.toJS(),\n    applyLeave:             state.applyLeave.toJS()\n  };\n}\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onIsAlreadyLogin: () => {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    onUsersList: () => {\n      return dispatch(actionsUsersList.get_users_list());\n    },\n    onUserPendingHoursData: (year, month) => {\n      return dispatch(actionsManageUserPendingHours.getUserPendingHourList(year, month));\n    },\n    onAddUserPendingHours: (userId, pendingHour, empId, year, month) => {\n      return dispatch(actionsManageUserPendingHours.addUserPendingHour(userId, pendingHour, empId, year, month));\n    },\n    onApplyHalfLeave: (no_of_days, userId, day_status, pending_id, year, month) => {\n      return dispatch(actionPendingHour.applyPendingLeave(no_of_days, userId, day_status, pending_id, year, month));\n    },\n    onApplyLeave: (from_date, to_date, no_of_days, reason, userId, day_status, leaveType, late_reason, pending_id, year, month) => {\n      return dispatch(actions_apply_leave.apply_leave(from_date, to_date, no_of_days, reason, userId, day_status, leaveType, late_reason, pending_id, year, month));\n    },\n    onDaysBetweenLeaves: (startDate, endDate) => {\n      return dispatch(actions_apply_leave.getDaysBetweenLeaves(startDate, endDate));\n    }\n\n  };\n};\n\nconst VisibleManageUserPendingHours = connect(mapStateToProps, mapDispatchToProps)(ManageUserPendingHours);\n\nconst RouterVisibleManageUserPendingHours = withRouter(VisibleManageUserPendingHours);\n\nexport default RouterVisibleManageUserPendingHours;\n"]},"metadata":{},"sourceType":"module"}