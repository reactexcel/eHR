{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/html/ReactReduxHR/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(loginRequest),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(isAlreadyLoggedIn),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(forgotPassword),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(logout);\n\nimport { setLoggedUser, getLoggedUser, resetLoggedUser } from '../../../services/generic';\nimport { fireAjax } from '../../../services/index';\nimport { call, put } from 'redux-saga/effects';\nimport * as actions from '../../../redux/actions';\nexport function loginRequest(action) {\n  var response, _response$data, token, userid;\n\n  return _regeneratorRuntime.wrap(function loginRequest$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return call(fireAjax, 'POST', '', {\n            'action': 'login',\n            'username': action.payload.username,\n            'password': action.payload.password\n          });\n\n        case 3:\n          response = _context.sent;\n\n          if (!(response.error === 0)) {\n            _context.next = 10;\n            break;\n          }\n\n          _response$data = response.data, token = _response$data.token, userid = _response$data.userid;\n          _context.next = 8;\n          return put(actions.userLoginSuccess(setLoggedUser(token, userid)));\n\n        case 8:\n          _context.next = 13;\n          break;\n\n        case 10:\n          if (!(response.error === 1)) {\n            _context.next = 13;\n            break;\n          }\n\n          _context.next = 13;\n          return put(actions.userLoginFail(response.data.message || 'Invalid Login...'));\n\n        case 13:\n          _context.next = 20;\n          break;\n\n        case 15:\n          _context.prev = 15;\n          _context.t0 = _context[\"catch\"](0);\n          _context.next = 19;\n          return put(actions.userLoginError('Error Occurs !!'));\n\n        case 19:\n          console.warn('Some error found in \"logingRequest\" action\\n', _context.t0);\n\n        case 20:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 15]]);\n}\nexport function isAlreadyLoggedIn(action) {\n  var _getLoggedUser, token, data;\n\n  return _regeneratorRuntime.wrap(function isAlreadyLoggedIn$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _getLoggedUser = getLoggedUser(), token = _getLoggedUser.token, data = _getLoggedUser.data;\n\n          if (!token) {\n            _context2.next = 6;\n            break;\n          }\n\n          _context2.next = 4;\n          return put(actions.userLoginSuccess(setLoggedUser(token, data.id)));\n\n        case 4:\n          _context2.next = 8;\n          break;\n\n        case 6:\n          _context2.next = 8;\n          return put(actions.logoutSuccess());\n\n        case 8:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\nexport function forgotPassword(action) {\n  var _response;\n\n  return _regeneratorRuntime.wrap(function forgotPassword$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return call(fireAjax, 'POST', '', {\n            'action': 'forgot_password',\n            'username': action.payload.username\n          });\n\n        case 3:\n          _response = _context3.sent;\n\n          if (!(_response.error == 1)) {\n            _context3.next = 9;\n            break;\n          }\n\n          _context3.next = 7;\n          return put(actions.forgotPasswordError(_response.data.message));\n\n        case 7:\n          _context3.next = 11;\n          break;\n\n        case 9:\n          _context3.next = 11;\n          return put(actions.forgotPasswordSuccess(_response.data.message));\n\n        case 11:\n          _context3.next = 18;\n          break;\n\n        case 13:\n          _context3.prev = 13;\n          _context3.t0 = _context3[\"catch\"](0);\n          _context3.next = 17;\n          return put(actions.forgotPasswordError('Error Occurs !!'));\n\n        case 17:\n          console.warn('Some error found in \"forgotPassword\" action\\n', _context3.t0);\n\n        case 18:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[0, 13]]);\n}\nexport function logout(action) {\n  return _regeneratorRuntime.wrap(function logout$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return call(fireAjax, 'POST', '', {\n            'action': 'logout'\n          });\n\n        case 3:\n          resetLoggedUser();\n          _context4.next = 6;\n          return put(actions.logoutSuccess());\n\n        case 6:\n          _context4.next = 11;\n          break;\n\n        case 8:\n          _context4.prev = 8;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.warn('Some error found in \"logout\" action\\n', _context4.t0);\n\n        case 11:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[0, 8]]);\n}","map":{"version":3,"sources":["/var/www/html/ReactReduxHR/frontend/src/redux/auth/actions/index.js"],"names":["loginRequest","isAlreadyLoggedIn","forgotPassword","logout","setLoggedUser","getLoggedUser","resetLoggedUser","fireAjax","call","put","actions","action","payload","username","password","response","error","data","token","userid","userLoginSuccess","userLoginFail","message","userLoginError","console","warn","id","logoutSuccess","forgotPasswordError","forgotPasswordSuccess"],"mappings":"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","sourcesContent":["import {setLoggedUser, getLoggedUser, resetLoggedUser} from '../../../services/generic';\nimport {fireAjax} from '../../../services/index';\nimport {call, put} from 'redux-saga/effects';\nimport * as actions from '../../../redux/actions';\n\nexport function* loginRequest (action) {\n  try {\n    const response = yield call(fireAjax, 'POST', '', {\n      'action':   'login',\n      'username': action.payload.username,\n      'password': action.payload.password\n    });\n    if (response.error === 0) {\n      let {token, userid} = response.data;\n      yield put(actions.userLoginSuccess(setLoggedUser(token, userid)));\n    } else if (response.error === 1) {\n      yield put(actions.userLoginFail(response.data.message || 'Invalid Login...'));\n    }\n  } catch (e) {\n    yield put(actions.userLoginError('Error Occurs !!'));\n    console.warn('Some error found in \"logingRequest\" action\\n', e);\n  }\n}\n\nexport function* isAlreadyLoggedIn (action) { \n  let {token, data} = getLoggedUser();\n  if (token) {\n    yield put(actions.userLoginSuccess(setLoggedUser(token, data.id)));\n  } else {\n    yield put(actions.logoutSuccess());\n  }\n}\n\nexport function* forgotPassword (action) {\n  try {\n    const response = yield call(fireAjax, 'POST', '', {\n      'action':   'forgot_password',\n      'username': action.payload.username\n    });\n    if (response.error == 1) {\n      yield put(actions.forgotPasswordError(response.data.message));\n    } else {\n      yield put(actions.forgotPasswordSuccess(response.data.message));\n    }\n  } catch (e) {\n    yield put(actions.forgotPasswordError('Error Occurs !!'));\n    console.warn('Some error found in \"forgotPassword\" action\\n', e);\n  }\n}\n\nexport function* logout (action) {\n  try {\n    yield call(fireAjax, 'POST', '', {\n      'action': 'logout'\n    });\n    resetLoggedUser();\n    yield put(actions.logoutSuccess());\n  } catch (e) {\n    console.warn('Some error found in \"logout\" action\\n', e);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}