{"version":3,"sources":["components/leave/leavesSummary/LeavesSummary.jsx","components/leave/leavesSummary/ViewLeavesSummary.jsx","redux/leave/actions/leavesSummary.js","modules/leave/containers/leavesSummary.jsx"],"names":["LeavesSummary","_ref","user","pendingPunchingDays","_","map","attendance","day","key","checkClass","day_type","in_time","out_time","showText","total_time","react_default","a","createElement","className","concat","display_date","day_text","name","jobtitle","ViewLeavesSummary","componentData","on_all_leaves_summary","_onChangeMonth","check","previousMonth","year","month","nextMonth","current_year","current_monthName","monthName","summaryHtml","leavesSummary","userLeaveSummary","leavesSummary_LeavesSummary","id","role","type","onClick","get_all_leaves_summary","dispatch","getState","Promise","resolve","reject","show_loading","fireAjax","action","async_get_all_leaves_summary","then","json","data","hide_loading","error","createAction","constants","empty_leaves_summary","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onIsAlreadyLogin","state","defaultUserDisplay","daysummary_userid","daysummary_date","d","Date","getFullYear","getMonth","window","scrollTo","isNotValid","isNotUserValid","location","pathname","loggedUser","status","history","push","redirectTo","Menu","Header","pageTitle","showLoading","frontend","leavesSummary_ViewLeavesSummary","React","Component","VisibleLeavesSummary","connect","toJS","logged_user","userLogin","actions","actions_leavesSummary","RouterVisibleLeavesSummary","withRouter"],"mappings":"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","file":"static/js/58.9416f3c8.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\n\nconst LeavesSummary = ({user}) => {\n  let pendingPunchingDays = _.map(user.attendance, (day, key) => {\n    let checkClass = 'b-success';\n    if (day.day_type === 'WORKING_DAY') {\n      if (day.in_time === '' || day.out_time === '') {\n        checkClass = 'b-danger';\n      }\n    }\n    let showText = '';\n    if (day.day_type === 'HALF_DAY') {\n      checkClass = 'b-warn';\n      showText = day.day_type + ' / ' + 'Timings : ' + day.in_time + ' - ' + day.out_time + ' / Total Time : ' + day.total_time;\n    }\n    return (\n      <div key={key} className={`sl-item ${checkClass}`}>\n        <div className=\"sl-icon\">\n          <i className=\"fa fa-check\"></i>\n        </div>\n        <div className=\"sl-content\">\n          <div className=\"\">{day.display_date}</div>\n          <div>{day.day_text}</div>\n          <div>{showText}</div>\n        </div>\n      </div>\n    );\n  });\n  return (\n    <div className=\"col-12\">\n      <div className=\"col-sm-4 col-md-4 col-xs-12  \">\n        <div className=\"box box-responsive-5 scroll\">\n          <div className=\"box-header\">\n            <h3>{user.name}</h3>\n            <small>{user.jobtitle}</small>\n          </div>\n          <div className=\"box-body\">\n            <div className=\"streamline b-l m-l\">\n              {pendingPunchingDays}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nLeavesSummary.propTypes = {\n  user: PropTypes.shape({\n    attendance: PropTypes.array.isRequired,\n    name:       PropTypes.string.isRequired,\n    jobtitle:   PropTypes.string.isRequired\n  }).isRequired\n};\n\nexport default LeavesSummary;\n","import React from 'react';\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport LeavesSummary from './LeavesSummary';\n\nconst styles = {\n  height100per: {\n    'minHeight': '150px'\n  }\n};\n\nconst ViewLeavesSummary = ({componentData, on_all_leaves_summary}) => {\n  const _onChangeMonth = (check) => {\n    if (check == 'previous') {\n      on_all_leaves_summary(componentData.previousMonth.year, componentData.previousMonth.month)\n    } else if (check == 'next') {\n      on_all_leaves_summary(componentData.nextMonth.year, componentData.nextMonth.month)\n    }\n  }\n  let current_month = typeof componentData.month != 'undefined'? componentData.month : '';\n  let current_year = typeof componentData.year != 'undefined' ? componentData.year : '';\n  let current_monthName = typeof componentData.monthName != 'undefined'? componentData.monthName : '';\n  let summaryHtml = _.map(componentData.leavesSummary, (userLeaveSummary, key) => {\n    return <LeavesSummary key={key} user={userLeaveSummary} />\n  });\n  return (\n    <div className=\"app-body\" id=\"view\">\n      <div className=\"padding\">\n        <div id=\"content\" className=\"app-content box-shadow-z0\" role=\"main\">\n          <div className=\"app-body\" id=\"view\">\n            <div>\n              <div className=\"fullcalendar fc fc-ltr fc-unthemed\">\n                <div className=\"fc-toolbar\">\n                  <div className=\"fc-left\">\n                    <button type=\"button\" className=\"fc-prev-button fc-button fc-state-default fc-corner-left fc-corner-right\" onClick={() => _onChangeMonth('previous')}>\n                      <span className=\"fc-icon fc-icon-left-single-arrow\"></span>\n                    </button>\n                  </div>\n                  <div className=\"fc-right\">\n                    <button type=\"button\" className=\"fc-next-button fc-button fc-state-default fc-corner-left fc-corner-right\" onClick={() => _onChangeMonth('next')}>\n                      <span className=\"fc-icon fc-icon-right-single-arrow\"></span>\n                    </button>\n                  </div>\n                  <div className=\"fc-center\">\n                    <h2>\n                      {current_monthName}\n                      - {current_year}</h2>\n                  </div>\n                  <div className=\"fc-clear\"></div>\n                </div>\n                <br/>\n                <div className=\"fc-view fc-month-view fc-basic-view\">\n                  {summaryHtml}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nViewLeavesSummary.propTypes = {\n  componentData: PropTypes.shape({\n    leavesSummary: PropTypes.array.isRequired,\n    month: PropTypes.number,\n    monthName: PropTypes.string,\n    username: PropTypes.string,\n    previousMonth: PropTypes.object.isRequired,\n    nextMonth: PropTypes.object.isRequired,\n    year: PropTypes.number\n  }).isRequired,\n  on_all_leaves_summary: PropTypes.func.isRequired\n}\n\nexport default ViewLeavesSummary;\n","import {createAction} from 'redux-actions';\nimport * as _ from 'lodash';\nimport {CONFIG} from '../../../config/index';\nimport {fireAjax} from '../../../services/index';\nimport {show_loading, hide_loading} from '../../../redux/generic/actions/frontend';\nimport * as constants from '../../../redux/constants';\n\nexport function success_leaves_summary (data) {\n  return createAction(constants.ACTION_SUCCESS_LEAVES_SUMMARY)(data);\n}\n\nexport function empty_leaves_summary (data) {\n  return createAction(constants.ACTION_EMPTY_LEAVES_SUMMARY)(data);\n}\n\nexport function error_leaves_summary (data) {\n  return createAction(constants.ACTION_ERROR_LEAVES_SUMMARY)(data);\n}\n\nfunction async_get_all_leaves_summary (year, month) {\n  return fireAjax('POST', '', {\n    action: 'get_all_leaves_summary',\n    year:   year,\n    month:  month\n  });\n}\n\nexport function get_all_leaves_summary (year, month) {\n  //  console.log(userid, year, month);\n  return function (dispatch, getState) {\n    return new Promise((resolve, reject) => {\n      dispatch(show_loading()); // show loading icon\n      async_get_all_leaves_summary(year, month).then((json) => {\n        resolve(json);\n        // console.log(json);\n        dispatch(hide_loading()); // hide loading icon\n        if (json.error == 0) {\n          dispatch(success_leaves_summary(json.data));\n        } else {\n          dispatch(empty_leaves_summary({}));\n        }\n      }, (error) => {\n        dispatch(hide_loading()); // hide loading icon\n        dispatch(error_leaves_summary({}));\n      });\n    });\n  };\n}\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router';\nimport Menu from '../../../components/generic/Menu';\nimport {isNotUserValid} from '../../../services/generic';\nimport Header from '../../../components/generic/Header';\nimport ViewLeavesSummary from '../../../components/leave/leavesSummary/ViewLeavesSummary';\nimport * as actions from '../../../redux/actions';\nimport * as actions_leavesSummary from '../../../redux/leave/actions/leavesSummary';\n\nclass LeavesSummary extends React.Component {\n  constructor (props) {\n    super(props);\n    this.props.onIsAlreadyLogin();\n    this.state = {\n      'defaultUserDisplay': '',\n      'daysummary_userid':  '',\n      'daysummary_date':    ''\n    };\n  }\n  componentWillMount () {\n    let d = new Date();\n    let year = d.getFullYear();\n    let month = d.getMonth() + 1; // +1 since getMonth starts from 0\n    this.props.on_all_leaves_summary(year, month);\n  }\n  componentWillReceiveProps (props) {\n    window.scrollTo(0, 0);\n    let isNotValid = isNotUserValid(this.props.location.pathname, props.loggedUser);\n    if (isNotValid.status) {\n      this.props.history.push(isNotValid.redirectTo);\n    }\n  }\n  render () {\n    return (\n      <div>\n        <Menu {...this.props} />\n        <div id=\"content\" className=\"app-content box-shadow-z0\" role=\"main\">\n          <Header pageTitle={'Leaves Summary'} showLoading={this.props.frontend.show_loading} />\n          <ViewLeavesSummary componentData={this.props.leavesSummary} on_all_leaves_summary={this.props.on_all_leaves_summary} />\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps (state) {\n  return {\n    frontend:      state.frontend.toJS(),\n    loggedUser:    state.logged_user.userLogin,\n    leavesSummary: state.leavesSummary.toJS()\n  };\n}\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onIsAlreadyLogin: () => {\n      return dispatch(actions.isAlreadyLogin());\n    },\n    on_all_leaves_summary: (year, month) => {\n      return dispatch(actions_leavesSummary.get_all_leaves_summary(year, month));\n    }\n  };\n};\n\nconst VisibleLeavesSummary = connect(mapStateToProps, mapDispatchToProps)(LeavesSummary);\n\nconst RouterVisibleLeavesSummary = withRouter(VisibleLeavesSummary);\n\nexport default RouterVisibleLeavesSummary;\n"],"sourceRoot":""}