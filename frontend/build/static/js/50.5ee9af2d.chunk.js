(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1156:function(e,t,n){"use strict";n.r(t);var a=n(26),r=n(27),i=n(29),o=n(28),c=n(30),s=n(0),d=n.n(s),m=n(129),u=n(262),l=n(36),f=n(4),p=n(24),y=n(176),g=n(574),_=n(580),b=n(37),h=n(825),j=n(71),v=n.n(j),O=n(178),E=n(565),P=function(e){function t(){var e;Object(a.a)(this,t),(e=Object(i.a)(this,Object(o.a)(t).call(this))).onMonthChange=function(t){e.setState({month:t.target.value}),e.props.auditList(Object(b.c)(),t.target.value,e.state.year)},e.onYearChange=function(t){e.setState({year:t.target.value}),e.props.auditList(Object(b.c)(),e.state.month,t.target.value)};var n=new Date;return e.state={month:n.getMonth()+1,year:n.getYear()+1900},e.Year=[],e}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){this.props.onIsAlreadyLogin(),this.props.onUsersList();for(var e=0;e<5;e++)this.Year.push(parseInt(this.state.year)+e-1);this.props.auditList(Object(b.c)(),this.state.month,this.state.year)}},{key:"render",value:function(){var e=null,t=[],n=p.a.inventory_images,a=Object(O.a)().months.map(function(e,t){return d.a.createElement("option",{key:t,value:t+1},e)}),r=this.Year.map(function(e,t){return d.a.createElement("option",{key:t,value:e},e)});return 0!==Object.keys(this.props.manageDevice.auditData).length&&(e=this.props.manageDevice.auditData.audit_list.map(function(e,a){return t.push({"Inventory Id":e.id,"Inventory Name":e.machine_name,"Inventory Type":e.machine_type,"Assigned To":e.assigned_name,"Assigned Id":e.assigned_user_id,Comment:e.comment,"Audit By Name":e.audit_done_by,"Audit By User Id":e.audit_done_by_user_id,Month:e.month,Year:e.year}),d.a.createElement("tr",{key:a},d.a.createElement("td",{style:{width:"5%"}},a+1),d.a.createElement("td",{style:{width:"10%"}},e.id),d.a.createElement("td",{style:{width:"15%"}},e.machine_type),d.a.createElement("td",{style:{width:"7%"}},d.a.createElement(E.a,{to:"/inventory_system/".concat(e.machine_type,"/").concat(e.id)},e.machine_name),e.file_name&&d.a.createElement("div",{className:"thumbnail"},d.a.createElement("img",{src:n+e.file_name}))),d.a.createElement("td",{style:{width:"10%"}},e.assigned_to&&d.a.createElement("div",null,e.assigned_to," (",e.assigned_user_id,")")),d.a.createElement("td",null,e.comment&&d.a.createElement("div",null,d.a.createElement("div",null,d.a.createElement("b",null,d.a.createElement("i",null,"By: ",e.audit_done_by," (",e.audit_done_by_user_id,")"))),e.comment)))})),console.log(this.props),d.a.createElement("div",null,d.a.createElement(m.a,this.props),d.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},d.a.createElement(u.a,{pageTitle:"Inventories Audit",showLoading:this.props.frontend.show_loading}),d.a.createElement("div",{className:"app-body",id:"view"},d.a.createElement("div",{className:"padding"},d.a.createElement("div",{style:{overflow:"auto",backgroundColor:"white"}},d.a.createElement("div",{className:"col-sm-2 col-xs-12",style:{paddingTop:"10px"}},d.a.createElement("h4",null,"Audit Summary")),d.a.createElement("div",{className:"col-sm-10"},d.a.createElement("div",{className:"row no-gutter"},d.a.createElement("div",{className:"col-xs-12 col-sm-3 day-color-referance white",style:{padding:"5px"}},d.a.createElement("h4",null,0!==Object.keys(this.props.manageDevice.auditData).length&&this.props.manageDevice.auditData.stats.total_inventories),d.a.createElement("div",{className:"text-u-c text-sm",style:{fontSize:"11px"}},"Total Inventory")),d.a.createElement("div",{className:"col-xs-12 col-sm-3 day-color-referance red",style:{padding:"5px"}},d.a.createElement("h4",null,0!==Object.keys(this.props.manageDevice.auditData).length&&this.props.manageDevice.auditData.stats.audit_pending),d.a.createElement("div",{className:"text-u-c text-sm",style:{fontSize:"11px"}}," Pending Audit")),d.a.createElement("div",{className:"col-xs-12 col-sm-3 day-color-referance green",style:{padding:"5px"}},d.a.createElement("h4",null,0!==Object.keys(this.props.manageDevice.auditData).length&&this.props.manageDevice.auditData.stats.audit_done),d.a.createElement("div",{className:"text-u-c text-sm",style:{fontSize:"11px"}},"Done Audit")),d.a.createElement("div",{className:"col-xs-12 col-sm-3 day-color-referance indigo",style:{padding:"5px"}},d.a.createElement("h4",null,0!==Object.keys(this.props.manageDevice.auditData).length&&this.props.manageDevice.auditData.stats.unassigned_inventories),d.a.createElement("div",{className:"text-u-c text-sm",style:{fontSize:"11px"}},"Unassigned Inventory"))))),d.a.createElement("div",{style:{marginTop:"20px",backgroundColor:"white"}},d.a.createElement("div",{className:"row",style:{padding:"10px 10px 20px 10px",position:"relative"}},d.a.createElement("div",{className:"col-md-2"},d.a.createElement("select",{className:"form-control",onChange:this.onYearChange,value:this.state.year},r)),d.a.createElement("div",{className:"col-md-2"},d.a.createElement("select",{className:"form-control",onChange:this.onMonthChange,value:this.state.month},a)),d.a.createElement(h.CSVLink,{style:{position:"absolute",right:"2%",bottom:"4px",color:"#337ab7",textDecoration:"underline"},data:t,filename:"audit-".concat(v()().format("MMM-YYYY-DD-MMM-YYYY"),".csv")},"   Download Report")),d.a.createElement("div",{style:{overflow:"auto",overflowY:"hidden"}},d.a.createElement("table",{key:"",className:"table table-responsive table-hover table-striped"},d.a.createElement("thead",{className:"success text-center"},d.a.createElement("tr",{style:{padding:0}},d.a.createElement("th",{style:{width:"5%"}},"#"),d.a.createElement("th",{style:{width:"10%"}},"Device Id"),d.a.createElement("th",{style:{width:"15%"}},"Device Type"),d.a.createElement("th",{style:{width:"7%"}},"Device Name"),d.a.createElement("th",{style:{width:"10%"}},"Assigned To"),d.a.createElement("th",{className:"text-center"},"Comments"))),d.a.createElement("tbody",null,e))))))))}}]),t}(s.Component);t.default=Object(l.b)(function(e){return{frontend:e.frontend.toJS(),usersList:e.usersList.toJS(),manageUsers:e.manageUsers.toJS(),loggedUser:e.logged_user.userLogin,manageDevice:e.manageDevice.toJS()}},function(e){return{onIsAlreadyLogin:function(){return e(f.isAlreadyLogin())},onUsersList:function(){return e(y.c())},onUserProfileDetails:function(t,n){return e(g.i(t,n))},auditList:function(t,n,a){return e(_.l(t,n,a))}}})(P)},574:function(e,t,n){"use strict";n.d(t,"i",function(){return u}),n.d(t,"j",function(){return f}),n.d(t,"a",function(){return y}),n.d(t,"h",function(){return _}),n.d(t,"e",function(){return b}),n.d(t,"c",function(){return h}),n.d(t,"g",function(){return O}),n.d(t,"d",function(){return E}),n.d(t,"b",function(){return w}),n.d(t,"f",function(){return x});var a=n(5),r=n(10),i=n(582),o=n.n(i),c=n(12),s=n(33),d=n(1),m=n(71);function u(e,t){return function(n,r){return new Promise(function(r,i){n(Object(s.b)()),function(e){return Object(c.b)("POST","",{action:"get_user_profile_detail_by_id",user_id:e})}(e).then(function(e){var r;n(Object(s.a)()),0==e.error?n(function(e,t){return{type:d.Ac,payload:e,username:t}}(e.data,t)):n((r=e.data.message,Object(a.a)(d.l)(r)))},function(e){var t;n(Object(s.a)()),n((t="error occurs!!!",Object(a.a)(d.eb)(t)))})})}}function l(e){return Object(a.a)(d.Z)(e)}function f(e){return function(t,n){var r="",i="",o="",f="",p="",y="",g="",_="",b="",h="",j="",v="",O="",E="",P="",w="",D=e.send_slack_msg,x=e.slack_msg,k="",N="",S="",T="";if("undefined"!==typeof e.user_id&&(r=e.user_id),"undefined"!==typeof e.name&&(i=e.name),"undefined"!==typeof e.jobtitle&&(o=e.jobtitle),"undefined"!==typeof e.team&&(f=e.team),"undefined"!==typeof e.dateofjoining&&null!=e.dateofjoining&&(p=e.dateofjoining),"undefined"!==typeof e.training_month&&null!=e.training_month&&(T=e.training_month),"undefined"!==typeof e.work_email&&(y=e.work_email),"undefined"!==typeof e.other_email&&(g=e.other_email),"undefined"!==typeof e.gender&&(_=e.gender),"undefined"!==typeof e.dob&&null!=e.dob){var Y=new Date(e.dob);Y&&(b=m(Y).format("YYYY-MM-DD"))}return"undefined"!==typeof e.marital_status&&(h=e.marital_status),"undefined"!==typeof e.address1&&(j=e.address1),"undefined"!==typeof e.address2&&(v=e.address2),"undefined"!==typeof e.emergency_ph1&&(O=e.emergency_ph1),"undefined"!==typeof e.emergency_ph2&&(E=e.emergency_ph2),"undefined"!==typeof e.blood_group&&(P=e.blood_group),"undefined"!==typeof e.medical_condition&&(w=e.medical_condition),"undefined"!==typeof e.training_completion_date&&null!=e.training_completion_date&&(k=e.training_completion_date),"undefined"!==typeof e.termination_date&&null!=e.termination_date&&(N=e.termination_date),"undefined"!==typeof e.holding_comments&&(S=e.holding_comments),""===r.trim()?Promise.reject("User id is empty"):""===i.trim()?Promise.reject("Name is empty"):""===o.trim()?Promise.reject("Jobtitle is empty"):""===p.trim()?Promise.reject("Joining date is empty"):""===y.trim()?Promise.reject("Work email is empty"):""===g.trim()?Promise.reject("Personal email is empty"):""===_.trim()?Promise.reject("Gender is empty"):""===b.trim()?Promise.reject("Date of birth is empty"):""===h.trim()?Promise.reject("Marital status not selected"):""===j.trim()?Promise.reject("Current address is empty"):""===v.trim()?Promise.reject("Permanent address is empty"):""===O.trim()?Promise.reject("Emmergency contact 1 is empty"):""===E.trim()?Promise.reject("Emmergency contact 2 is empty"):""===P.trim()?Promise.reject("Blood group not selected"):""===w.trim()?Promise.reject("Any medical conditions is empty"):""===T.trim()?Promise.reject("Training month is Empty"):new Promise(function(e,n){t(Object(s.b)()),function(e,t,n,a,r,i,o,s,d,m,u,l,f,p,y,g,_,b,h,j,v,O){return Object(c.b)("POST","",{action:"update_user_profile_detail_by_id",user_id:e,marital_status:m,name:t,jobtitle:n,team:a,dateofjoining:r,work_email:i,other_email:o,gender:s,dob:d,permanent_address:l,current_address:u,emergency_ph1:f,emergency_ph2:p,blood_group:y,medical_condition:g,training_completion_date:_,termination_date:b,training_month:j,holding_comments:h,send_slack_msg:v,slack_msg:O})}(r,i,o,f,p,y,g,_,b,h,j,v,O,E,P,w,k,N,S,T,D,x).then(function(e){var i;t(Object(s.a)()),0==e.error?(t(u(r)),t((i=e.data.message,Object(a.a)(d.vc)(i)))):(t(l(e.data.message)),n(e.data))},function(e){t(Object(s.a)()),t(l("error occurs!!!"))})})}}function p(e){return Object(a.a)(d.p)(e)}function y(e){return function(t,n){var r="",i="",o="",m="",u="",l="",f="",y="";return"undefined"===typeof e.dateofjoining||""==e.dateofjoining?Promise.reject("Date of Joining is empty"):(r=e.dateofjoining,"undefined"===typeof e.name||""==e.name?Promise.reject("Name is empty"):(i=e.name,"undefined"===typeof e.jobtitle||""==e.jobtitle?Promise.reject("Job Title is empty"):(o=e.jobtitle,"undefined"===typeof e.gender||""==e.gender?Promise.reject("Gender is empty"):(m=e.gender,"undefined"===typeof e.dob||""==e.dob?Promise.reject("Date of birth is empty"):(u=e.dob,"undefined"===typeof e.gender||""==e.gender?Promise.reject("Gender is empty"):(m=e.gender,"undefined"===typeof e.username||""==e.username?Promise.reject("Username is empty"):(l=e.username,"undefined"===typeof e.training_month||""==e.training_month?Promise.reject("training month is empty"):(f=e.training_month,"undefined"===typeof e.workemail||""==e.workemail?Promise.reject("Work email is empty"):(y=e.workemail,new Promise(function(e,n){t(Object(s.b)()),function(e,t,n,a,r,i,o,s){return Object(c.b)("POST","",{action:"add_new_employee",dateofjoining:e,name:t,jobtitle:n,gender:a,dob:r,username:i,training_month:o,workemail:s})}(r,i,o,m,u,l,f,y).then(function(r){var i;t(Object(s.a)()),0==r.error?(t((i=r.data,Object(a.a)(d.Db)(i))),e(r.data)):(t(p(r.data.message)),n(r.data.message))},function(e){t(Object(s.a)()),t(p("error occurs!!!")),n("error occurs!!!")})}))))))))))}}function g(e){return Object(a.a)(d.bb)(e)}function _(e){return function(t,n){return new Promise(function(n,r){t(Object(s.b)()),function(e){return Object(c.b)("POST","",{action:"get_user_document_by_id",user_id:e})}(e).then(function(e){var n;t(Object(s.a)()),0==e.error?t((n=e.data,Object(a.a)(d.xc)(n))):t(g(e.data.message))},function(e){t(Object(s.a)()),t(g("error occurs!!!"))})})}}function b(e){return function(t,n){return new Promise(function(n,a){t(Object(s.b)()),function(e){return Object(c.b)("POST","",{action:"delete_user_document",id:e})}(e).then(function(e){t(Object(s.a)()),0==e.error?n(e.data.message):a(e.data.message)},function(e){t(Object(s.a)()),a("error occurs!!")})})}}function h(e,t){return function(n,a){return new Promise(function(n,a){(function(e,t){return Object(c.b)("POST","",{action:"change_employee_status",user_id:e,status:t})})(e,t).then(function(e){0===e.error?n("User disabled"):a(e.data.message)},function(e){a("error occurs!!")})})}}function j(e){return Object(a.a)(d.ec)(e)}function v(e){return Object(a.a)(d.K)(e)}o()(function(e,t,n){return Object(c.b)("POST","",{action:"get_employee_life_cycle",userid:e}).then(function(e){0==e.error?t(j(e.data)):t(v())})},1);function O(e){return function(t,n){return new Promise(function(n,a){(function(e){return Object(c.b)("POST","",{action:"get_employee_life_cycle",userid:e})})(e).then(function(e){0==e.error?(n(e.message),t(j(e.data))):(a(e.data.message),t(v(e.data.message)))},function(e){a("error occurs!!")})})}}function E(e,t){return function(n,r){return new Promise(function(r,i){(function(e,t){return Object(c.b)("POST","",{action:"update_employee_life_cycle",userid:e,stepid:t})})(e,t).then(function(e){var t;0==e.error?r(e.data.message):(i(e.data.message),n((t=e.data.message,Object(a.a)(d.J)(t))))},function(e){i("error occurs!!")})})}}function P(e){return Object(a.a)(d.r)(e)}function w(e){return function(t,n){var r="",i="",o="",m="",u="",l="",f="",p="";return"undefined"!==typeof e.user_id&&(r=e.user_id),"undefined"!==typeof e.signature&&(p=e.signature),"undefined"!==typeof e.permanent_address&&(i=e.permanent_address),"undefined"!==typeof e.emergency_ph1&&(o=e.emergency_ph1),"undefined"!==typeof e.emergency_ph2&&(m=e.emergency_ph2),"undefined"!==typeof e.blood_group&&(u=e.blood_group),"undefined"!==typeof e.medical_condition&&(l=e.medical_condition),"undefined"!==typeof e.holding_comments&&(f=e.holding_comments),""===r.trim()?Promise.reject("User id is empty"):""===p.trim()?Promise.reject("signature is empty"):""===i.trim()?Promise.reject("Permanent address is empty"):""===o.trim()?Promise.reject("Emmergency contact 1 is empty"):""===m.trim()?Promise.reject("Emmergency contact 2 is empty"):""===u.trim()?Promise.reject("Blood group not selected"):""===l.trim()?Promise.reject("Any medical conditions is empty"):new Promise(function(e,n){t(Object(s.b)()),function(e,t,n,a,r,i,o,s){return Object(c.b)("POST","",{action:"update_user_profile_detail_by_id",user_id:e,permanent_address:t,emergency_ph1:n,emergency_ph2:a,blood_group:r,medical_condition:i,holding_comments:o,signature:s})}(r,i,o,m,u,l,f,p).then(function(n){var r;t(Object(s.a)()),0==n.error?(e(n.data),t((r=n.data,Object(a.a)(d.Fb)(r)))):t(P(n.data))},function(e){t(Object(s.a)()),t(P("error occurs!!!"))})})}}function D(e){return Object(a.a)(d.Fe)(e)}function x(){return function(e,t){return new Promise(function(t,n){e(Object(s.b)()),Object(c.b)("POST","",{action:"get_enabled_users_brief_details"}).then(function(n){var i;0==n.error?(t(n.data),e(D(n.data)),n.data.length&&e(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(a,i){return new Promise(function(i,o){var d=t[n].user_Id;a(Object(s.b)()),function(e){return Object(c.b)("POST","",{action:"get_user_salary_info_by_id",user_id:e})}(d).then(function(i){if("undefined"!==typeof i.data&&"undefined"!==typeof i.data.salary_details&&i.data.salary_details.length>0){i.data;var o=r.orderBy(i.data.salary_details,["date"],["desc"]);t[n].current_salary=o[0].test&&o[0].test.total_salary,a(D(t))}a(Object(s.a)()),t.length>++n&&a(e(t,n))},function(r){a(Object(s.a)()),t.length>++n&&a(e(t,n))})})}}(n.data))):e((i=n.data,Object(a.a)(d.Qc)(i))),e(Object(s.a)())},function(t){console.log("error",t),e(Object(s.a)())})})}}}}]);
//# sourceMappingURL=50.5ee9af2d.chunk.js.map