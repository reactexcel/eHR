(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{1160:function(e,t,a){"use strict";a.r(t);var n=a(26),l=a(27),r=a(29),s=a(28),c=a(30),o=a(0),i=a.n(o),u=a(36),m=a(566),d=a(129),p=a(37),v=a(262),h=a(13),b=a(10),E=a(130),f=a.n(E),y=a(45),O=a(24),j=function(e){var t=e.leave,a=e.handleOpen,n=e.cancelLeave,l=t.status,r=l.charAt(0),s="";return"Approved"===l?s="green-A200":"Pending"===l?s="blue":"Rejected"===l?s="red-500":"Cancelled Request"===l&&(s="red-100"),i.a.createElement("div",{className:"list-item b-l b-l-2x b-".concat(s)},i.a.createElement("div",{className:"list-left"},i.a.createElement("span",{className:"w-40 avatar ".concat(s)},r)),i.a.createElement("div",{className:"list-body"},i.a.createElement("div",{className:"pull-right text-muted text-xs"}),"restricted"===t.leave_type.toLowerCase()&&i.a.createElement("div",null,i.a.createElement("h3",{className:"_500"},i.a.createElement("b",null,"RH"))),i.a.createElement("div",null,i.a.createElement("span",{className:"_500"},"Status : ",t.status)),i.a.createElement("div",null,i.a.createElement("span",{className:"_500"},"Apply on : ",t.applied_on)),i.a.createElement("div",null,i.a.createElement("span",{className:"_500"},"From ",t.from_date," to ",t.to_date),"\xa0\xa0\xa0",i.a.createElement("span",{className:"label cyan"},t.no_of_days," Day"),i.a.createElement("span",{className:"label cyan m-l-xs",onClick:function(){return n(t.user_Id,t.from_date)}},"Cancel")),i.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Reason : ",t.reason),""!==t.leave_type?i.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Leave Type : ",t.leave_type):null,""!==t.late_reason?i.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Reason For Late Applying : ",t.late_reason):null,""!==t.comment?i.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"comment : ",t.comment):null),i.a.createElement("div",{className:"row"},"0"!==t.doc_require?i.a.createElement("div",{className:"col-xs-12 row"},i.a.createElement("button",{onClick:function(){a(t.id)},className:"btn btn-info btn-responsive btn-res col-xs-2"},"Upload Leave Document"),""===t.doc_link?null:i.a.createElement("div",null,i.a.createElement("form",{method:"get",target:"_blank",action:t.doc_link},i.a.createElement("button",{className:"btn btn-primary btn-responsive btn-res col-xs-2"},"View Document"))),i.a.createElement("div",{className:"col-xs-12 row"},i.a.createElement("small",{className:"uploadnotic"},"* Upload file size should be less than 1 MB"))):null))},_=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={open:!1,id:"",user_token:""},a.cancelLeave=a.cancelLeave.bind(Object(h.a)(Object(h.a)(a))),a.handleOpen=a.handleOpen.bind(Object(h.a)(Object(h.a)(a))),a.handleClose=a.handleClose.bind(Object(h.a)(Object(h.a)(a))),a.callUpdateDocuments=a.callUpdateDocuments.bind(Object(h.a)(Object(h.a)(a))),a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({user_token:Object(p.c)()})}},{key:"cancelLeave",value:function(e,t){this.props.onCancelLeave(e,t).then(function(e){Object(y.b)(e)}).catch(function(e){Object(y.b)(e)})}},{key:"handleOpen",value:function(e){this.setState({open:!0,id:e})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"callUpdateDocuments",value:function(e){var t=!1;""===this.refs.file.value&&(t=!0,Object(y.b)("Please select a file")),t&&e.preventDefault()}},{key:"render",value:function(){var e=this,t=window.location.href,a=b.map(this.props.userLeaves.leaves,function(t,a){return i.a.createElement(j,{key:a,leave:t,handleOpen:e.handleOpen,cancelLeave:e.cancelLeave})});return i.a.createElement("div",{className:"row"},i.a.createElement(f.a,{title:"Upload Leave Document",modal:!1,open:this.state.open,onRequestClose:this.handleClose,contentClassName:"dialog-content",autoScrollBodyContent:!0},i.a.createElement("div",null,i.a.createElement("form",{action:O.a.upload_leave_url,method:"POST",encType:"multipart/form-data"},i.a.createElement("input",{type:"hidden",name:"token",value:this.state.user_token}),i.a.createElement("input",{type:"hidden",name:"leaveid",value:this.state.id}),i.a.createElement("input",{type:"hidden",name:"page_url",value:t}),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Attachment"),i.a.createElement("input",{type:"file",className:"form-control",ref:"file",name:"docProof"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{type:"submit",name:"submit",value:"Upload",className:"col-xs-12 md-btn md-raised indigo",onClick:function(t){e.callUpdateDocuments(t)}}))))),i.a.createElement("div",{className:"normal-text"},i.a.createElement("b",null,"Leaves")),i.a.createElement("div",{className:"row-col"},i.a.createElement("div",{className:"list white"},a)))}}]),t}(i.a.Component),g=a(4),N=a(5),L=(a(134),a(12)),R=a(1),H=a(33);function w(){return function(e,t){return new Promise(function(t,a){e(Object(H.b)()),Object(L.b)("POST","",{action:"get_my_leaves"}).then(function(t){var a;e(Object(H.a)()),0==t.error?e((a=t.data,Object(N.a)(R.tb)(a))):e((t.data.message,Object(N.a)(R.rb)([])))},function(t){e(Object(H.a)()),e((t.data.message,Object(N.a)(R.sb)("Error Occurs !!")))})})}}function C(e,t){return function(a,n){return new Promise(function(n,l){a(Object(H.b)()),function(e,t){return Object(L.b)("POST","",{action:"cancel_applied_leave",user_id:e,date:t})}(e,t).then(function(e){a(Object(H.a)()),0==e.error?a(w()):l(e.data.message)},function(e){a(Object(H.a)()),l(e.data.message)})})}}function x(e,t){return function(a,n){return new Promise(function(n,l){a(Object(H.b)()),function(e,t){return Object(L.b)("POST","",{action:"get_my_rh_leaves",year:e,user_id:t})}(e,t).then(function(e){var t;a(Object(H.a)()),0==e.error?a((t=e.data,Object(N.a)(R.Yd)(t))):l(e.data.message)},function(e){a(Object(H.a)()),a(Object(N.a)(R.Xd)("Error Occurs !!"))})})}}function S(e,t){return function(a,n){return new Promise(function(n,l){a(Object(H.b)()),function(e,t){return Object(L.b)("POST","",{action:"get_user_rh_stats",year:e,user_id:t})}(e,t).then(function(e){var t;a(Object(H.a)()),0==e.error?a((t=e.data,Object(N.a)(R.ae)(t))):l(e.data)},function(e){a(Object(H.a)()),a(Object(N.a)(R.Zd)("Error Occurs !!"))})})}}a(596),a(107);var k=function(e){var t=e.leave,a=e.handleApplyClick,n=t.status,l=n.charAt(0),r="";return r="Approved"===n?"green-A200":"Pending"===n?"blue":"Rejected"===n?"red":"Cancelled Request"===n?"red-100":"green",i.a.createElement("div",{className:"list-item b-l b-l-2x b-".concat(r)},i.a.createElement("div",{className:"list-left"},i.a.createElement("span",{className:"w-40 avatar ".concat(r)},l)),i.a.createElement("div",{className:"list-body"},i.a.createElement("div",{className:"col-xs-8"},i.a.createElement("div",null,i.a.createElement("span",{className:"_500"},"Holiday : ",t.name)),i.a.createElement("div",null,i.a.createElement("span",{className:"_500"},"Date : ",t.date)),i.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Month : ",t.month),i.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Day : ",t.day),""!==t.leave_type?i.a.createElement("div",{className:"text-ellipsis text-muted text-sm"},"Leave Type : ",t.type_text):null),i.a.createElement("div",null,!t.status&&i.a.createElement("div",{className:"save-btn"},i.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){a(t)}},"Apply")),t.status&&i.a.createElement("div",{className:"status_text text-".concat(r)},i.a.createElement("b",null,t.status)))))},A=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.yearArray,n=t.RHLeaveList,l=t.handleApplyClick,r=(t.RHStatus,i.a.createElement("img",{src:"./socialMediaIcons/holidays.svg",className:"w-40 img-circle m-x-md"}));return i.a.createElement("div",{className:"row rh-leaves"},i.a.createElement("div",{className:"rh-wrapper"},i.a.createElement("div",{className:"col-md-8 col-xs-8 rh-text"},i.a.createElement("b",null,"RH Status")),i.a.createElement("div",{className:"col-md-4 col-xs-4"},i.a.createElement("select",{className:"form-control",onChange:this.props.handleYearChange,value:this.props.stateData.year},a&&a.map(function(e,t){return i.a.createElement("option",{key:t,value:e},e)}))),i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"list-item white"},i.a.createElement("div",null,i.a.createElement("b",null,"Total RH Available: "),i.a.createElement("b",null,this.props.RHStatus.rh_can_be_taken)),i.a.createElement("div",null,i.a.createElement("span",null,"RH Approved : "),i.a.createElement("span",null,this.props.RHStatus.rh_approved)),i.a.createElement("div",null,i.a.createElement("span",null,"RH Cancelled : "),i.a.createElement("span",null,this.props.RHStatus.rh_rejected)),i.a.createElement("div",null,i.a.createElement("span",null,"Pending RH You can Apply : "),i.a.createElement("span",null,this.props.RHStatus.rh_left)),i.a.createElement("div",null,i.a.createElement("span",null,"Cancelled RH Compensation Used : "),i.a.createElement("span",null,this.props.RHStatus.rh_compensation_used)),i.a.createElement("div",null,i.a.createElement("span",null,"Pending Cancelled RH to be used as Compensation : "),i.a.createElement("span",null,this.props.RHStatus.rh_compensation_pending))))),i.a.createElement("div",{className:"rh-wrapper"},i.a.createElement("div",{className:"col-md-12 col-xs-12 rh-text"},i.a.createElement("b",null,"RH List")),i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"list white"},n?b.map(this.props.RHLeaveList,function(t,a){return i.a.createElement(k,{key:a,leave:t,handleApply:e.handleApply,cancelLeave:e.cancelLeave,handleApplyClick:l})}):i.a.createElement("h2",null,r," No RH This Year.")))))}}]),t}(i.a.Component),P=a(1157),T=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.handleHide,n=e.onApplyRHLeave,l=e.inputValue,r=e.stateData;return i.a.createElement(P.a,{id:"termination-modal",bsClass:"termination-modal entity-page-cancel-modal modal",animation:!1,backdrop:"static",keyboard:!1,onHide:a,show:t,restoreFocus:!1,container:this},i.a.createElement(P.a.Header,null,i.a.createElement("div",{className:"rh-modal"},i.a.createElement("div",null,"RH Name : ".concat(r.currentRH&&r.currentRH.name)),i.a.createElement("div",null,"Date : ".concat(r.currentRH&&r.currentRH.date)),i.a.createElement("div",null,"Day : ".concat(r.currentRH&&r.currentRH.day)))),i.a.createElement(P.a.Body,null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"reason"},"Reason : "),i.a.createElement("input",{type:"text",className:"form-control",id:"reason",value:l,onChange:this.props.inputChange,placeholder:"Enter reason here",required:!0}),r.showError&&i.a.createElement("div",{id:"error-text"},"* This field is required"))),i.a.createElement(P.a.Footer,null,i.a.createElement("div",{className:"apply-btn"},i.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:n},"Apply"),i.a.createElement("button",{type:"button",className:"btn btn-default",onClick:a},"Close"))))}}]),t}(o.Component),D=a(643),U=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).handleYearChange=function(e){var t=a.props.loggedUser.data.id;a.setState({year:e.target.value}),a.props.getRHList(e.target.value,t),a.props.getRHStatus(e.target.value,t)},a.handleApplyClick=function(e){a.setState({currentRH:e,showModal:!0})},a.onApplyRHLeave=function(){var e=a.props.loggedUser.data.id,t=a.state.currentRH,n=(t.date,t.type_text),l=t.raw_date;a.props.onApplyLeave(l,l,1,a.state.inputValue,"","",n).then(function(){a.props.onMyLeavesList(),a.props.getRHList(a.year[3],e),a.props.getRHStatus(a.year[3],e),Object(y.a)("RH is Successfully Applied","","success")}).catch(function(e){Object(y.b)(e,"","error")}),a.state.inputValue?a.setState({showModal:!1,inputValue:"",showError:!1}):a.setState({showError:!0})},a.onInputChange=function(e){a.setState({inputValue:e.target.value})},a.state={year:"",showModal:!1,inputValue:"",showerror:!1,reCall:!0},a.props.onIsAlreadyLogin(),a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.onMyLeavesList(),this.year=Object(p.d)(),this.setState({year:"".concat(this.year[3])})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.loggedUser.data.id;window.scrollTo(0,0);var a=Object(p.e)(this.props.location.pathname,e.loggedUser);a.status&&this.props.history.push(a.redirectTo),t&&this.state.reCall&&(this.props.getRHList(this.year[3],t),this.props.getRHStatus(this.year[3],t),this.setState({reCall:!1}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(d.a,this.props),i.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},i.a.createElement(T,{show:this.state.showModal,handleHide:function(){e.setState({showModal:!1,inputValue:"",showError:!1})},onApplyRHLeave:this.onApplyRHLeave,inputChange:this.onInputChange,inputValue:this.state.inputValue,stateData:this.state}),i.a.createElement(v.a,{pageTitle:"My Leaves",showLoading:this.props.frontend.show_loading}),i.a.createElement("div",{className:"app-body",id:"view"},i.a.createElement("div",{className:"padding"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6"},i.a.createElement(_,this.props)),i.a.createElement("div",{className:"col-md-6 rh-leave-container"},i.a.createElement(A,{stateData:this.state,yearArray:this.year,handleYearChange:this.handleYearChange,RHLeaveList:this.props.RHLeaveList.RHLeaves.rh_list,RHStatus:this.props.RHLeaveList.RHStatus,handleApplyClick:this.handleApplyClick})))))))}}]),t}(i.a.Component);var M=Object(u.b)(function(e){return{frontend:e.frontend.toJS(),loggedUser:e.logged_user.userLogin,userLeaves:e.userLeaves.toJS(),applyLeave:e.applyLeave.toJS(),RHLeaveList:e.userLeaves.toJS()}},function(e){return{onIsAlreadyLogin:function(){return e(g.isAlreadyLogin())},onMyLeavesList:function(){return e(w())},onApplyLeave:function(t,a,n,l,r,s,c,o){return e(D.a(t,a,n,l,r,s,c,o))},onCancelLeave:function(t,a){return e(C(t,a))},getRHList:function(t,a){return e(x(t,a))},getRHStatus:function(t,a){return e(S(t,a))}}})(U),V=Object(m.a)(M);t.default=V},643:function(e,t,a){"use strict";a.d(t,"a",function(){return m}),a.d(t,"b",function(){return d});var n=a(5),l=a(10),r=(a(134),a(24),a(12)),s=a(1),c=a(33);function o(e){return Object(n.a)(s.nb)(e)}function i(e){return Object(n.a)(s.jb)("Leave Apply Fail")}function u(e){return Object(n.a)(s.ib)("Error Occurs !!")}function m(e,t,a,n,s,m,d,p,v,h,b){return function(h,b){return l.isEmpty(e)?Promise.reject("From date is empty"):l.isEmpty(t)?Promise.reject("To date is empty"):""==a?Promise.reject("No of days is empty"):l.isEmpty(n)?Promise.reject("Reason is empty"):new Promise(function(l,b){h(Object(c.b)()),""==s?function(e,t,a,n,l,s,c,o,i,u,m){return Object(r.b)("POST","",{action:"apply_leave",from_date:e,to_date:t,no_of_days:a,reason:n,day_status:l,leave_type:s,late_reason:c,pending_id:o})}(e,t,a,n,m,d,p,v).then(function(e){h(Object(c.a)()),0==e.error?(h(o(e.data.message)),l()):(h(i(e.data.message)),b(e.data.message))},function(e){h(Object(c.a)()),h(u())}):function(e,t,a,n,l,s,c,o,i,u,m){return Object(r.b)("POST","",{action:"admin_user_apply_leave",from_date:e,to_date:t,no_of_days:a,reason:n,user_id:l,day_status:s,leave_type:c,late_reason:o,pending_id:i})}(e,t,a,n,s,m,d,p,v).then(function(e){h(Object(c.a)()),0==e.error?(l(e.data.message),h(o(e.data.message))):(h(i(e.data.message)),b(e.data.message))},function(e){h(Object(c.a)()),h(u()),b("error occurs")})})}}function d(e,t){return function(a,l){return new Promise(function(l,o){a(Object(c.b)()),function(e,t){return Object(r.b)("POST","",{action:"get_days_between_leaves",start_date:e,end_date:t})}(e,t).then(function(e){var t;a(Object(c.a)()),0==e.error?a((t=e.data,Object(n.a)(s.c)(t))):a(function(e){return Object(n.a)(s.b)(e)}(e.data))},function(e){var t;a(Object(c.a)()),a((t="error occurs",Object(n.a)(s.a)(t)))})})}}}}]);
//# sourceMappingURL=51.541b99a3.chunk.js.map