(window.webpackJsonp=window.webpackJsonp||[]).push([[36,39],{1153:function(e,t,a){"use strict";a.r(t);var n=a(26),r=a(27),o=a(29),s=a(28),i=a(30),l=a(13),c=a(0),u=a.n(c),m=a(129),p=a(37),d=a(36),f=a(566),h=a(4),b=a(133),g=a(262),v=(a(898),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={userid:""},a.props.onIsAlreadyLogin(),a.onUserClick=a.onUserClick.bind(Object(l.a)(Object(l.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){window.scrollTo(0,0);var t=Object(p.e)(this.props.location.pathname,e.loggedUser);t.status&&this.props.history.push(t.redirectTo)}},{key:"componentDidMount",value:function(){this.props.requestUsersList()}},{key:"onUserClick",value:function(e){this.props.history.push("/add_documents/".concat(e))}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(m.a,this.props),u.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},u.a.createElement(g.a,{pageTitle:"Add Documents",showLoading:this.props.frontend.show_loading}),u.a.createElement("div",{className:"app-body",id:"view"},u.a.createElement("div",{className:"padding"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-12",id:"fixedScroll"},u.a.createElement(b.a,{users:this.props.usersList.users,onUserClick:this.onUserClick})))))))}}]),t}(c.Component));var O=Object(d.b)(function(e){return{frontend:e.frontend.toJS(),loggedUser:e.logged_user.userLogin,usersList:e.usersList.toJS()}},function(e){return{onIsAlreadyLogin:function(){return e(h.isAlreadyLogin())},requestUsersList:function(){return e(h.requestUsersList())}}})(v),E=Object(f.a)(O);t.default=E},583:function(e,t,a){"use strict";a.d(t,"b",function(){return l}),a.d(t,"a",function(){return c});var n=a(5),r=(a(24),a(12)),o=a(33),s=a(1);function i(e){return Object(n.a)(s.O)(e)}function l(){return function(e,t){return new Promise(function(t,a){e(Object(o.b)()),Object(r.b)("POST","",{action:"get_user_document"}).then(function(t){var a;e(Object(o.a)()),0===t.error?e((a=t.data,Object(n.a)(s.jc)(a))):e(i(t.data.message))},function(t){e(Object(o.a)()),e(i("error occurs!!!"))})})}}function c(e){return function(t,a){return new Promise(function(a,n){t(Object(o.b)()),function(e){return Object(r.b)("POST","",{action:"delete_user_document",id:e})}(e).then(function(e){t(Object(o.a)()),0===e.error?a(e.data.message):n(e.data.message)},function(e){t(Object(o.a)()),n("error occurs!!")})})}}},609:function(e,t,a){"use strict";var n=a(26),r=a(27),o=a(29),s=a(28),i=a(30),l=a(13),c=a(0),u=a.n(c),m=a(635),p=a(45),d=a(36),f=a(178),h=a(181),b=a.n(h),g=a(105),v=a.n(g),O=a(580),E=a(12),y=(a(33),a(583)),j=(a(637),function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(o.a)(this,Object(s.a)(t).call(this))).state={loading:!1},e.handleSubmit=e.handleSubmit.bind(Object(l.a)(Object(l.a)(e))),e}return Object(i.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.params,n=this.props.file,r=this.props.fileName,o=this.props.url;if(n)if(n.type.includes("image")){this.setState({loading:!0});var s=Object(f.b)(n);(new m.a).compress(n,{quality:s}).then(function(e){var n=new FormData;for(var s in a)n.append(s,a[s]);n.delete("imageUrl"),n.append(r,e,e.name),n.append("submit","Upload"),b.a.post(o,n).then(function(e){if(Object(p.b)("Success !","File uploaded successfully","success"),t.setState({loading:!1}),"Admin"===t.props.loggedUser.data.role)t.props.onFetchDevice(),t.props.onFetchUnapprovedUser(),t.props.onGetMyDocuments();else{if("HR"===t.props.loggedUser.data.role)return;t.props.onGetMyDocuments()}}).catch(function(e){413===e.request.status?(Object(p.b)("Error","File too large to upload","error"),t.setState({loading:!1})):(Object(p.b)("Error",e.request.statusText,"error"),t.setState({loading:!1}))})})}else{var i=new FormData,l=this.props.loggedUser.data.role;for(var c in a)i.append(c,a[c]);i.delete("imageUrl"),i.append(r,n),i.append("submit","Upload"),this.props.onUploadFile(i,o,l)}}},{key:"render",value:function(){var e=this;return u.a.createElement("div",null,this.props.loading||this.state.loading?u.a.createElement(v.a,{size:30,thickness:3,style:{marginLeft:"50%"}}):u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("input",{type:"submit",name:"submit",value:"Upload",className:"col-xs-12 md-btn md-raised indigo",onClick:function(t){return e.props.callUpdateDocuments(t)}})))}}]),t}(c.Component));t.a=Object(d.b)(function(e){return{loading:e.uploadImage.loading,loggedUser:e.logged_user.userLogin}},function(e){return{onFetchDevice:function(){return e(O.p())},onUploadFile:function(){return e(function(e){e({type:"UPLOADING_FILE"}),Object(E.c)(t,a).then(function(t){if(e({type:"UPLOAD_FILE",payload:t}),Object(p.b)("Success !","File uploaded successfully","success"),"Admin"===n)e(O.p()),e(O.s()),e(y.b());else{if("HR"===n)return;e(y.b())}}).catch(function(t){e({type:"UPLOAD_FILE",payload:!1}),Object(p.b)("Error",t,"error")})});var t,a,n},onFetchUnapprovedUser:function(){return e(O.s())},onGetMyDocuments:function(){return e(y.b())}}})(j)},898:function(e,t,a){"use strict";a.r(t);var n=a(26),r=a(27),o=a(29),s=a(28),i=a(30),l=a(13),c=a(0),u=a.n(c),m=a(24),p=a(45),d=a(129),f=a(37),h=a(4),b=a(262),g=a(609),v=a(36),O=a(566),E=a(130),y=a.n(E),j=a(131),U=a.n(j),C=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1})},a.handleOpen=function(){a.setState({open:!0})},a.state={document_type:"",token:"",file:[],user_id:a.props.match.params.userId,page_url:window.location.href,imageUrl:""},a.props.onIsAlreadyLogin(),a.handleFileChange=a.handleFileChange.bind(Object(l.a)(Object(l.a)(a))),a.callUpdateDocuments=a.callUpdateDocuments.bind(Object(l.a)(Object(l.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.toggleCollapse)}},{key:"callUpdateDocuments",value:function(e){var t=this.state.document_type,a=this.refs.file.value,n=(this.state.file[0],!1);this.props.match.params.userId?""===t?(n=!0,Object(p.b)("Warning!","Please select document type.","warning")):""===a&&(n=!0,Object(p.b)("Warning!","Please select a file","warning")):(n=!0,Object(p.b)("Warning!","Please select a User.","warning")),n&&e.preventDefault()}},{key:"componentWillMount",value:function(e){this.setState({token:Object(f.c)()})}},{key:"handleFileChange",value:function(e){var t=this;this.setState({file:Array.from(e.target.files)});var a=this.refs.file.files[0],n=new FileReader;n.onloadend=function(){t.setState({imageUrl:n.result})},a?(n.readAsDataURL(a),this.setState({imageUrl:n.result})):this.setState({imageUrl:""})}},{key:"render",value:function(){var e=this,t=[u.a.createElement(U.a,{label:"Close",primary:!0,onClick:this.handleClose})];return u.a.createElement("div",null,u.a.createElement(d.a,this.props),u.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},u.a.createElement(b.a,{pageTitle:"Add Documents",showLoading:this.props.frontend.show_loading}),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("div",{className:"row p-t-md"},u.a.createElement("div",{className:"col-sm-offset-3 col-sm-6 p-x-md"},u.a.createElement("h6",{id:"uploadMyDoc",className:"text-center pointer"},"Upload Documents"),u.a.createElement("div",{className:"row box p-a-md m-b-lg ",id:"uploadDoc"},u.a.createElement("form",{encType:"multipart/form-data"},u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{className:"col-sm-12"},"Document Type"),u.a.createElement("select",{className:"form-control",ref:"document_type",onChange:function(){e.setState({document_type:e.refs.document_type.value,file:[]}),e.refs.file.value=""},value:this.state.document_type},u.a.createElement("option",{value:""},"--- Select Doc Type ---"),u.a.createElement("option",{value:"CV"},"CV"),u.a.createElement("option",{value:"PAN Card"},"PAN Card"),u.a.createElement("option",{value:"Address Proof"},"Address Proof"),u.a.createElement("option",{value:"Photo"},"Photo"),u.a.createElement("option",{value:"Offer Letter"},"Offer Letter"),u.a.createElement("option",{value:"Appointment Letter"},"Appointment Letter"),u.a.createElement("option",{value:"Previous Company Experience Letter"},"Previous Company Experience Letter"),u.a.createElement("option",{value:"Previous Company Offer Letter"},"Previous Company Offer Letter"),u.a.createElement("option",{value:"Previous Company Salary Slip"},"Previous Company Salary Slip"),u.a.createElement("option",{value:"Previous Company Other Documents"},"Previous Company Other Documents"),u.a.createElement("option",{value:"Qualification Certificate"},"Qualification Certificate"),u.a.createElement("option",{value:"Other Documents"},"Other Documents"))),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{className:"col-sm-12"},"Attachment "),u.a.createElement("input",{type:"file",className:"form-control",ref:"file",name:"link_1",multiple:"multiple",onChange:this.handleFileChange})),u.a.createElement("div",{className:"form-group"},this.state.file[0]?u.a.createElement("div",null,u.a.createElement("label",{className:"col-xs-12"},"Image Preview "),u.a.createElement("img",{src:this.state.imageUrl,onClick:function(){e.handleOpen()},className:"small"}),u.a.createElement("br",null)):null,u.a.createElement(y.a,{actions:t,modal:!1,open:this.state.open,onRequestClose:this.handleClose,autoScrollBodyContent:!0},u.a.createElement("div",{className:"thumbnail"},u.a.createElement("img",{src:this.state.imageUrl})))),u.a.createElement("div",{className:"form-group col-sm-12"},u.a.createElement(g.a,{callUpdateDocuments:this.callUpdateDocuments,url:m.a.upload_url,params:this.state,file:this.state.file[0],fileName:"link_1"})))),u.a.createElement("button",{className:"col-xs-8 col-xs-offset-2 col-md-4 col-md-offset-4 md-btn md-raised indigo",onClick:function(){e.props.history.push("manage_users")}}," ","Go to Employee Page")))))}}]),t}(c.Component);var L=Object(v.b)(function(e){return{frontend:e.frontend.toJS(),loggedUser:e.logged_user.userLogin,usersList:e.usersList.toJS()}},function(e){return{onIsAlreadyLogin:function(){return e(h.isAlreadyLogin())},requestUsersList:function(){return e(h.requestUsersList())}}})(C),w=Object(O.a)(L);t.default=w}}]);
//# sourceMappingURL=36.f9e62b15.chunk.js.map