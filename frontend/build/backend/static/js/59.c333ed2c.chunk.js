(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{1165:function(e,t,a){"use strict";a.r(t);var r=a(26),s=a(27),n=a(29),o=a(28),i=a(30),c=a(13),l=a(0),m=a.n(l),u=a(36),d=a(566),p=a(45),h=a(129),b=a(262),g=a(37),E=a(133),f=a(269),v=a(10),k=a.n(v),y=function(e){var t=e.row;return m.a.createElement("div",{className:"sl-item b-success"},m.a.createElement("div",{className:"sl-icon"},m.a.createElement("i",{className:"fa fa-check"})),m.a.createElement("div",{className:"sl-content"},m.a.createElement("div",null," ",t.working_hours," Hours"),m.a.createElement("div",null," ",t.date," "),m.a.createElement("div",{className:"sl-date text-muted"},"Reason : ",t.reason)))},N=function(e){var t=e.displayData,a=k.a.map(t,function(e,t){return m.a.createElement(y,{key:t,row:e})});return m.a.createElement("div",{className:"row box"},m.a.createElement("div",{className:"box-body"},m.a.createElement("div",{className:"streamline b-l m-l"},a)))},j=a(41),U=a.n(j),O=a(704),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(o.a)(t).call(this,e))).state={userid:"",date:"",working_hours:"",reason:""},a.handleDateChange=a.handleDateChange.bind(Object(c.a)(Object(c.a)(a))),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){U()(".timepickerInput").timepicker({minTime:"5:00",maxTime:"12:00",timeFormat:"h:i",step:10})}},{key:"handleDateChange",value:function(e){var t=e.format("YYYY-MM-DD");this.setState({date:t})}},{key:"componentWillReceiveProps",value:function(e){this.setState({userid:e.userid})}},{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"row no-gutter"},m.a.createElement("div",{className:"col-md-6 col-xs-12 b-r"},m.a.createElement("div",{className:"p-a block text-center table-responsive"},m.a.createElement("h6",{className:""},"Select Date"),m.a.createElement(O.Calendar,{onInit:this.handleDateChange,onChange:this.handleDateChange}))),m.a.createElement("div",{className:"col-md-6 col-xs-12 b-r"},m.a.createElement("div",{className:"p-a block text-center"},m.a.createElement("h6",null,"Selected Date"),this.state.date,m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("h6",null,"Select Time"),m.a.createElement("input",{type:"text",className:"timepickerInput",ref:"workingtime",onBlur:function(){return e.setState({working_hours:e.refs.workingtime.value})},value:this.state.working_hours}),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("h6",null,"Enter Reason"),m.a.createElement("input",{type:"text",className:"md-input",ref:"reason",onChange:function(){return e.setState({reason:e.refs.reason.value})},value:this.state.reason}),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("button",{className:"md-btn md-raised indigo",onClick:function(){return e.props.callAddUserWorkingHours(e.state.userid,e.state.date,e.state.working_hours,e.state.reason)}},"Add"))))}}]),t}(m.a.Component),x=a(4),_=a(176),D=a(5),W=a(12),H=a(1),S=a(33);function C(e){return function(t,a){return new Promise(function(a,r){t(Object(S.b)()),function(e){return Object(W.b)("POST","",{action:"get_managed_user_working_hours",userid:e})}(e).then(function(e){var a;t(Object(S.a)()),0===e.error?t((a=e.data,Object(D.a)(H.Cc)(a))):t(function(e){return Object(D.a)(H.n)(e)}(e.data))},function(e){var a;t(Object(S.a)()),t((a={},Object(D.a)(H.gb)(a)))})})}}function L(e){return Object(D.a)(H.x)(e)}function A(e,t,a,r){return function(s,n){return k.a.isEmpty(t)?Promise.reject("date is empty"):k.a.isEmpty(a)?Promise.reject("Time is empty"):k.a.isEmpty(r)?Promise.reject("Reason is empty"):new Promise(function(n,o){s(Object(S.b)()),function(e,t,a,r){return Object(W.b)("POST","",{action:"add_user_working_hours",userid:e,date:t,working_hours:a,reason:r})}(e,t,a,r).then(function(t){var a;s(Object(S.a)()),0==t.error?(s((a=t.data.message,Object(D.a)(H.Lb)(a))),s(C(e))):s(L(t.data.message))},function(e){s(Object(S.a)()),s(L("error occurs"))})})}}var I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(o.a)(t).call(this,e))).props.onIsAlreadyLogin(),a.state={defaultUserDisplay:"",daysummary_userid:"",daysummary_date:""},a.onUserClick=a.onUserClick.bind(Object(c.a)(Object(c.a)(a))),a.onShowDaySummary=a.onShowDaySummary.bind(Object(c.a)(Object(c.a)(a))),a.callAddUserWorkingHours=a.callAddUserWorkingHours.bind(Object(c.a)(Object(c.a)(a))),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.onUsersList()}},{key:"componentWillReceiveProps",value:function(e){var t=Object(g.e)(this.props.location.pathname,e.loggedUser);if(t.status&&this.props.history.push(t.redirectTo),""===this.state.defaultUserDisplay&&e.usersList.users.length>0){var a=e.usersList.users[0].user_Id;this.onUserClick(a)}}},{key:"onUserClick",value:function(e){this.setState({defaultUserDisplay:e}),this.props.onUserWorkingHoursData(e)}},{key:"onShowDaySummary",value:function(e,t){this.setState({daysummary_userid:e,daysummary_date:t}),this.props.onUserDaySummary(e,t)}},{key:"callAddUserWorkingHours",value:function(e,t,a,r){this.props.onAddUserWorkingHours(e,t,a,r).then(function(e){},function(e){Object(p.b)(e)})}},{key:"render",value:function(){var e="";""!==this.props.manageUserWorkingHours.status_message&&(e=m.a.createElement("span",{className:"label label-lg primary pos-rlt m-r-xs"},m.a.createElement("b",{className:"arrow left b-primary"}),this.props.manageUserWorkingHours.status_message));var t="",a="",r="";try{t=this.props.manageUserWorkingHours.userInfo.slack_profile.profile.image_192,a=this.props.manageUserWorkingHours.userInfo.name,r=this.props.manageUserWorkingHours.userInfo.jobtitle,this.props.manageUserWorkingHours.userInfo.user_Id}catch(s){}return m.a.createElement("div",null,m.a.createElement(h.a,this.props),m.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},m.a.createElement(b.a,{pageTitle:"Manage Employees Working Hours"+e,showLoading:this.props.frontend.show_loading,userListHeader:!0}),m.a.createElement(f.a,{users:this.props.usersList.users,selectedUserId:this.state.selected_user_id,onUserClick:this.onUserClick}),m.a.createElement("div",{className:"app-body",id:"view"},m.a.createElement("div",{className:"padding"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-sm-3 hidden-xs",id:"fixedScroll"},m.a.createElement(E.a,{users:this.props.usersList.users,selectedUserId:this.state.defaultUserDisplay,onUserClick:this.onUserClick,top:10})),m.a.createElement("div",{className:"col-md-9 col-xs-12 col-sm-9"},m.a.createElement("div",{className:"box"},m.a.createElement("div",{className:"item"},m.a.createElement("div",{className:"item-bg"},m.a.createElement("img",{src:t,className:"blur"})),m.a.createElement("div",{className:"p-a-lg pos-rlt text-center"},m.a.createElement("img",{src:t,className:"img-circle w-56"}))),m.a.createElement("div",{className:"p-a text-center"},m.a.createElement("a",{href:"",className:"text-md m-t block"},a),m.a.createElement("p",null,m.a.createElement("small",null,r)))),m.a.createElement("div",{className:"row no-gutter b-t box "},m.a.createElement("div",{className:"col-md-9 col-xs-12 b-r box"},m.a.createElement("div",{className:"p-a block"},m.a.createElement("h6",{className:"text-center"},"Add New"),m.a.createElement("hr",null),m.a.createElement(w,Object.assign({},this.props,{userid:this.state.defaultUserDisplay,callAddUserWorkingHours:this.callAddUserWorkingHours})))),m.a.createElement("div",{className:"col-md-3 col-xs-12  b-r box "},m.a.createElement("div",{className:"p-a block "},m.a.createElement("h6",{className:"text-center"},"Existing Working Hours"),m.a.createElement("hr",null),m.a.createElement("div",{className:"hour-overflow "},m.a.createElement(N,{displayData:this.props.manageUserWorkingHours.displayData})))))))))))}}]),t}(m.a.Component);var P=Object(u.b)(function(e){return{frontend:e.frontend.toJS(),loggedUser:e.logged_user.userLogin,usersList:e.usersList.toJS(),manageUserWorkingHours:e.manageUserWorkingHours.toJS()}},function(e){return{onIsAlreadyLogin:function(){return e(x.isAlreadyLogin())},onUsersList:function(){return e(_.c())},onUserWorkingHoursData:function(t){return e(C(t))},onAddUserWorkingHours:function(t,a,r,s){return e(A(t,a,r,s))}}})(I),T=Object(d.a)(P);t.default=T}}]);
//# sourceMappingURL=59.c333ed2c.chunk.js.map