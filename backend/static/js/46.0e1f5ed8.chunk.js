(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1175:function(e,t,a){"use strict";a.r(t);var n=a(26),r=a(27),c=a(29),o=a(28),l=a(30),i=a(13),m=a(0),s=a.n(m),u=a(36),d=a(566),f=a(45),y=a(129),p=a(37),g=a(262),h=a(672),E=function(e){var t=e.workingHoursSummary,a=e.onWorkingHoursChange,n=e.onWorkingHoursSummary,r=function(e){"previous"===e?n(t.previousMonth.year,t.previousMonth.month):"next"===e&&n(t.nextMonth.year,t.nextMonth.month)};return s.a.createElement("div",null,s.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},s.a.createElement("div",{className:"app-body",id:"view"},s.a.createElement("div",null,s.a.createElement("div",{className:"fullcalendar fc fc-ltr fc-unthemed"},s.a.createElement("div",{className:"fc-toolbar"},s.a.createElement("div",{className:"fc-left"},s.a.createElement("button",{type:"button",className:"fc-prev-button fc-button fc-state-default fc-corner-left fc-corner-right",onClick:function(){return r("previous")}},s.a.createElement("span",{className:"fc-icon fc-icon-left-single-arrow"}))),s.a.createElement("div",{className:"fc-right"},s.a.createElement("button",{type:"button",className:"fc-next-button fc-button fc-state-default fc-corner-left fc-corner-right",onClick:function(){return r("next")}},s.a.createElement("span",{className:"fc-icon fc-icon-right-single-arrow"}))),s.a.createElement("div",{className:"fc-center"},s.a.createElement("h2",null,t.monthName,"-",t.year)),s.a.createElement("div",{className:"fc-clear"})),s.a.createElement("br",null),s.a.createElement("div",{className:"fc-view-container"},s.a.createElement("div",{className:"fc-view fc-month-view fc-basic-view"},s.a.createElement("div",{className:"fc-body"},s.a.createElement("div",{className:"fc-widget-content"},s.a.createElement("div",{className:"fc-day-grid-container"},s.a.createElement("div",{className:"fc-day-grid"},s.a.createElement(h.a,{month:t.monthSummary,onWorkingHoursChange:a}))))))))))))},v=a(4),k=a(5),b=a(10),w=a.n(b),_=a(12),N=a(1),O=a(33);function H(e){return Object(k.a)(N.L)(e)}function W(e,t){return function(a,n){return new Promise(function(n,r){a(Object(O.b)()),function(e,t){return Object(_.b)("POST","",{action:"working_hours_summary",year:e,month:t})}(e,t).then(function(e){var t;a(Object(O.a)()),0===e.error?a((t=e.data,Object(k.a)(N.gc)(t))):a(H({}))},function(e){a(Object(O.a)()),a(H({}))})})}}function D(e,t){return function(a,n){return w.a.isEmpty(e)?Promise.reject("date is empty"):w.a.isEmpty(t)?Promise.reject("time is empty"):new Promise(function(n,r){a(Object(O.b)()),function(e,t){return Object(_.b)("POST","",{action:"update_day_working_hours",date:e,time:t})}(e,t).then(function(e){var t;a(Object(O.a)()),0===e.error?a(W(e.data.monthYear.year,e.data.monthYear.month)):a((t=e.data.message,Object(k.a)(N.j)(t)))},function(e){var t;a(Object(O.a)()),a((t="",Object(k.a)(N.U)(t)))})})}}var S=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).props.onIsAlreadyLogin(),a.state={defaultUserDisplay:"",daysummary_userid:"",daysummary_date:""},a.onWorkingHoursChange=a.onWorkingHoursChange.bind(Object(i.a)(Object(i.a)(a))),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;this.props.onWorkingHoursSummary(t,a)}},{key:"componentWillReceiveProps",value:function(e){var t=Object(p.e)(this.props.location.pathname,e.loggedUser);t.status&&this.props.history.push(t.redirectTo),""!==e.workingHoursSummary.status_message&&Object(f.b)(e.workingHoursSummary.status_message)}},{key:"onWorkingHoursChange",value:function(e,t){""!==t&&this.props.onUpdateDayWorkingHours(e,t).then(function(e){},function(e){Object(f.b)(e)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(y.a,this.props),s.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},s.a.createElement(g.a,{pageTitle:"Manage Working Hours",showLoading:this.props.frontend.show_loading}),s.a.createElement("div",{className:"app-body",id:"view"},s.a.createElement("div",{className:"padding"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(E,{workingHoursSummary:this.props.workingHoursSummary,onWorkingHoursChange:this.onWorkingHoursChange,onWorkingHoursSummary:this.props.onWorkingHoursSummary})))))))}}]),t}(s.a.Component);var j=Object(u.b)(function(e){return{frontend:e.frontend.toJS(),loggedUser:e.logged_user.userLogin,userDaySummary:e.userDaySummary.toJS(),workingHoursSummary:e.workingHoursSummary.toJS()}},function(e){return{onIsAlreadyLogin:function(){return e(v.isAlreadyLogin())},onWorkingHoursSummary:function(t,a){return e(W(t,a))},onUpdateDayWorkingHours:function(t,a){return e(D(t,a))}}})(S),x=Object(d.a)(j);t.default=x},672:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(10),o=a(41),l=a.n(o),i=function(e){var t=e.block,a=e.classname,n=e.dataToDisplay,c=e.time,o=e.title,l=e.officeTime,i="";return"type1"===t?i=r.a.createElement("span",null,r.a.createElement("span",{className:"fc-time"},c),r.a.createElement("span",{className:"fc-title"},o,l?r.a.createElement("i",{className:"officetime"},"- ".concat(l," hrs")):"")):"type2"===t&&(i=n),r.a.createElement("div",{className:a},r.a.createElement("div",{className:"fc-content"},i))},m={timeInputBox:{width:"40px"}},s=function(e){var t=e.dayData,a=(e.classname,e.forEmployeeHours),n=(e.day,e.userid),c=e.showDaySummary,o=e.onWorkingHoursChange;l()(document).ready(function(){l()("input.timepicker").timepicker({minTime:"5:00",maxTime:"12:00",timeFormat:"h:i",step:10})});var s=t,u=s.office_working_hours,d="",f="fc-day-grid-event fc-h-event fc-event fc-start fc-end fc-draggable ",y="",p=s.date,g="dark-white",h=s.total_time+" - Total Work Time";return"-"===s.extra_time_status?y="red":"+"===s.extra_time_status&&(y="green"),1===s.admin_alert&&(p+=" * ",g="indigo",h=s.admin_alert_message),a||"WORKING_DAY"!==s.day_type?a||"NON_WORKING_DAY"!==s.day_type?a||"FUTURE_WORKING_DAY"!==s.day_type?a||"LEAVE_DAY"!==s.day_type?a||"HALF_DAY"!==s.day_type?a&&"WORKING_DAY"===s.day_type?d=r.a.createElement("div",{"data-toggle":"modal"},r.a.createElement(i,{classname:f+"dark-white",block:"type1",time:r.a.createElement("h5",null,s.date),title:s.day,officeTime:s.office_working_hours}),r.a.createElement(i,{classname:f+"dark-white",block:"type1",time:r.a.createElement("h6",null,"Hours : ",u),title:""}),r.a.createElement("div",{className:"fc-day-grid-event fc-h-event fc-event fc-start fc-end dark-white fc-draggable"},r.a.createElement("div",{className:"fc-content"},r.a.createElement("span",{className:"fc-title"},"Change to \xa0:\xa0"),r.a.createElement("span",{className:"fc-time"},r.a.createElement("input",{type:"text",className:"timepicker",style:m.timeInputBox,onBlur:function(e){return o(t.full_date,e.target.value)}}))))):a&&"NON_WORKING_DAY"===s.day_type&&(d=r.a.createElement("div",null,r.a.createElement(i,{classname:f+"yellow",block:"type1",time:r.a.createElement("h5",null,s.date),title:s.day}),r.a.createElement(i,{classname:f+"yellow",block:"type1",time:"Non Working day"}),r.a.createElement(i,{classname:f+"yellow",block:"type1",time:s.day_text,title:""}),r.a.createElement("div",{className:"fc-day-grid-event fc-h-event fc-event fc-start fc-end dark-white fc-draggable"},r.a.createElement("div",{className:"fc-content"},r.a.createElement("span",{className:"fc-title"},"Change to \xa0:\xa0"),r.a.createElement("span",{className:"fc-time"},r.a.createElement("input",{type:"text",className:"timepicker",style:m.timeInputBox,onBlur:function(e){return o(t.full_date,e.target.value)}})))))):d=r.a.createElement("div",null,r.a.createElement(i,{classname:f+"red-100",block:"type1",time:r.a.createElement("h5",null,s.date),title:s.day,officeTime:s.office_working_hours}),r.a.createElement(i,{classname:f+"red-100",block:"type1",time:"Half day",title:""}),r.a.createElement(i,{classname:f+"red-100",block:"type1",time:s.day_text,title:""})):d=r.a.createElement("div",null,r.a.createElement(i,{classname:f+"red",block:"type1",time:r.a.createElement("h5",null,s.date),title:s.day,officeTime:s.office_working_hours}),r.a.createElement(i,{classname:f+"red",block:"type1",time:"On Leave",title:""}),r.a.createElement(i,{classname:f+"red",block:"type1",time:s.day_text,title:""})):d=r.a.createElement("div",null,r.a.createElement(i,{classname:f+"dark-white",block:"type1",time:r.a.createElement("h5",null,s.date),title:s.day,officeTime:s.office_working_hours}),r.a.createElement(i,{classname:f+"dark-white",block:"type1",time:"",title:""}),r.a.createElement(i,{classname:f+"dark-white",block:"type1",dataToDi:!0,splay:s.day_text}),r.a.createElement(i,{classname:f+"dark-white center",block:"type2",dataToDisplay:h})):d=r.a.createElement("div",null,r.a.createElement(i,{classname:f+"yellow",block:"type1",time:r.a.createElement("h5",null,s.date),title:s.day}),r.a.createElement(i,{classname:f+"yellow",block:"type1",time:"Non Working day"}),r.a.createElement(i,{classname:f+"yellow",block:"type1",time:s.day_text})):d=r.a.createElement("div",{"data-toggle":"modal","data-target":"#modalUserDaySummary",onClick:function(){return c(n,t.full_date)}},r.a.createElement(i,{classname:f+g,block:"type1",time:r.a.createElement("h5",null,p),title:s.day,officeTime:s.office_working_hours}),r.a.createElement(i,{classname:f+"dark-white",block:"type1",time:s.in_time+" - "+s.out_time,title:""}),r.a.createElement(i,{classname:f+"dark-white center",block:"type2",dataToDisplay:h}),r.a.createElement(i,{classname:f+y,block:"type1",time:s.extra_time,title:""})),r.a.createElement("div",null,d)},u=function(e){var t=e.userId,a=e.dayData,n=e.onShowDaySummary,c=e.onWorkingHoursChange,o=function(){var e=l()("#calendar").width(),t=parseInt(e/100);if(t<7&&e%100>0){var a=parseInt(e/t);l()("#calendar .calendar-day").css({width:a+"px"})}else t>=7&&l()("#calendar .calendar-day").css({width:e/7+"px"})};l()(document).ready(function(){l()(window).on("resize",function(){o()}),o()});var i="";return i=t?r.a.createElement(s,{forEmployeeHours:!1,dayData:a,showDaySummary:n,userid:t}):r.a.createElement(s,{forEmployeeHours:!0,dayData:a,onWorkingHoursChange:c}),r.a.createElement("div",{id:"calendarDay",className:"calendar-day"},r.a.createElement("div",{className:"fc-event-container",id:"".concat(a.full_date)},i))};t.a=function(e){var t=e.userId,a=e.month,n=e.onShowDaySummary,o=e.onWorkingHoursChange,l=c.map(a,function(e,a){return r.a.createElement(u,{key:a,userId:t,dayData:e,onShowDaySummary:n,onWorkingHoursChange:o})});return r.a.createElement("div",{id:"calendar"},l)}}}]);
//# sourceMappingURL=46.0e1f5ed8.chunk.js.map