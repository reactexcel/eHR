(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1168:function(e,t,a){"use strict";a.r(t);var n=a(26),s=a(27),i=a(29),l=a(28),c=a(30),r=a(13),o=a(0),d=a.n(o),m=a(36),u=a(566),h=a(45),p=a(129),v=a(37),g=a(262),E=a(10),b=a.n(E),y=a(71),A=a.n(y),f=a(24),_=a(105),N=a.n(_),D=f.a.inventory_images,C=function(e){var t=e.userAssignMachine,a=e.unassignDevice,n=e.loggedUser,s=e.handleAuditClick,i=(e.activeAuditId,e.activeAudits),l=e.showPending,c=b.a.map(t,function(e,t){var c=!1!==e.audit_current_month_status.status?e.audit_current_month_status.status.audit_comment:"";return d.a.createElement("tr",{key:t},d.a.createElement("td",{style:{width:"180px"}},e.id,d.a.createElement("br",null),d.a.createElement("br",null),e.fileInventoryPhoto?d.a.createElement("a",{className:"thumbnail"},d.a.createElement("img",{src:D+e.fileInventoryPhoto})):null),d.a.createElement("td",null,e.machine_type),d.a.createElement("td",null,e.machine_name),d.a.createElement("td",null,e.bill_number),d.a.createElement("td",null,e.serial_number),d.a.createElement("td",{style:{width:"100px"}},e.assign_date),d.a.createElement("td",{style:{width:"240px"}},!1===e.audit_current_month_status.status?d.a.createElement("button",{className:"btn btn-primary btn-responsives audit-btn","data-toggle":"modal","data-target":"#modalAudit",onClick:function(){return s(e)},style:{background:i.includes(e.id)&&!l?"green":"red",fontSize:"13px"},disabled:i.includes(e.id)&&!l},i.includes(e.id)&&!l?d.a.createElement(N.a,{size:15,thickness:3,style:{marginLeft:"0%"}}):"Audit Pending"):d.a.createElement("div",{style:{width:"inherit"}},d.a.createElement("div",{style:{width:"inherit"}},d.a.createElement("p",{title:c,className:c.length>100?"audit-comment":""},c)),d.a.createElement("div",null,"Audited On -",A()(e.audit_current_month_status.status.updated_at).format("Do MMMM YYYY, h:mm:ss a")))),d.a.createElement("td",{style:{textAlign:"center"}},"Admin"===n.data.role?d.a.createElement("i",{className:"fa fa-lg fa fa-trash",onClick:function(){return a(e)},"aria-hidden":"true",style:{color:"rgb(183, 28, 28)",textAlign:"center",cursor:"pointer"}}):null))});return b.a.isEmpty(c)&&(c=d.a.createElement("tr",null,d.a.createElement("td",{colSpan:"5"},d.a.createElement("h5",{className:"text-center text-danger"},"Device Not Asssigned")))),d.a.createElement("div",{className:"row no-gutter box"},d.a.createElement("h6",{className:"text-center"},"Assigned Device Details"),d.a.createElement("div",{className:"table-responsive"},d.a.createElement("table",{className:"table table-striped table-hover"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"ID"),d.a.createElement("th",null,"Device Type"),d.a.createElement("th",null,"Name"),d.a.createElement("th",null,"Excellence Bill Number"),d.a.createElement("th",null,"Serial Number"),d.a.createElement("th",null,"Assign Date"),d.a.createElement("th",null,"Audit Status"),"Admin"===n.data.role?d.a.createElement("th",{style:{textAlign:"center"}},"Unassign"):null)),d.a.createElement("tbody",null,c))))},O=a(636),w=a(4),U=a(580),j=a(130),k=a.n(j),S=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleChange=function(e){a.setState({comment:e.target.value,inventory_id:a.props.device.id})},a.resetForm=function(){a.setState(a.baseState)},a.state={comment:"",inventory_id:""},a.baseState=a.state,a.handleAddUserComment=a.handleAddUserComment.bind(Object(r.a)(Object(r.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"handleAddUserComment",value:function(){var e=this.state,t=e.inventory_id,a=e.comment;this.props.callAddUserComment({inventory_id:t,comment:a}),this.setState({comment:""})}},{key:"render",value:function(){var e=this;return d.a.createElement("div",null,d.a.createElement(k.a,{title:"Unassign Device",titleStyle:{opacity:"0.56"},modal:!1,open:this.props.open,onRequestClose:function(){e.props.handleClose(),e.resetForm()},contentStyle:{width:"70%",maxWidth:"none"},autoScrollBodyContent:!0},d.a.createElement("div",{className:"col-md-12"},d.a.createElement("div",{className:"row -py-sm"},d.a.createElement("div",{className:"col-sm-3"},d.a.createElement("p",{style:{opacity:"0.56"}},"Device Name:")),d.a.createElement("div",{className:"col-sm-2"},d.a.createElement("p",null,this.props.device.machine_name)),d.a.createElement("div",{className:"col-sm-3"},d.a.createElement("p",{style:{opacity:"0.56"}},"Device Type:")),d.a.createElement("div",{className:"col-sm-4"},d.a.createElement("p",null,this.props.device.machine_type))),d.a.createElement("div",{className:"row p-y-sm"},d.a.createElement("div",{className:"col-sm-3"},d.a.createElement("p",{style:{opacity:"0.56"}},"Assign Date:")),d.a.createElement("div",{className:"col-sm-2"},d.a.createElement("p",null,this.props.device.assign_date)),d.a.createElement("div",{className:"col-sm-3"},d.a.createElement("p",{style:{opacity:"0.56"}},"Serial Number:")),d.a.createElement("div",{className:"col-sm-4"},d.a.createElement("p",null,this.props.device.serial_number))),d.a.createElement("div",{className:"row p-y-sm"},d.a.createElement("div",{className:"col-md-12",style:{opacity:"0.56"}},"Comment:",d.a.createElement("textarea",{value:this.state.comment,style:{width:"100%"},onChange:this.handleChange}))),d.a.createElement("button",{className:"col-md-12 md-btn md-raised m-b-sm indigo",onClick:function(){e.handleAddUserComment(),e.resetForm()},style:{opacity:"0.76",marginTop:"2%"}},"Unassign Device"))))}}]),t}(d.a.Component),x=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={},a.handleOpen=a.handleOpen.bind(Object(r.a)(Object(r.a)(a))),a.handleAssign=a.handleAssign.bind(Object(r.a)(Object(r.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"handleOpen",value:function(e){e.stopPropagation(),this.props.handleAddDialog()}},{key:"handleAssign",value:function(e,t){this.props.callAssignDevice({inventory_id:e,user_id:t})}},{key:"render",value:function(){var e=this,t=E.map(this.props.unassignDeviceList,function(t,a){return d.a.createElement("tr",{key:a,style:{background:"green",padding:"20px",borderBottom:"2px solid white"}},d.a.createElement("td",{style:{marginRight:"0%",width:"5%",cursor:"pointer"}},a+1),d.a.createElement("td",{style:{marginRight:"0%",width:"5%",cursor:"pointer"}},t.machine_type),d.a.createElement("td",{style:{marginRight:"0%",width:"5%",cursor:"pointer"}},t.machine_name),d.a.createElement("td",{style:{marginRight:"0%",width:"5%",cursor:"pointer"}},"MAC Address : ",t.mac_address,d.a.createElement("br",null),"Date of purchase : ",t.date_of_purchase),d.a.createElement("td",{style:{marginRight:"0%",width:"5%",cursor:"pointer"}},t.status),d.a.createElement("td",null,d.a.createElement("button",{onClick:function(){return e.handleAssign(t.id,e.props.user_id)},className:"col-md-14 md-btn md-raised m-b-sm indigo",style:{opacity:"0.76",marginTop:"2%"}},"Assign Device")))});return d.a.createElement("div",{className:"p-y"},"Admin"===this.props.loggedUser.data.role?d.a.createElement("button",{className:"md-btn md-raised m-b-sm indigo",onClick:this.handleOpen},"Assign Device"):null,d.a.createElement(k.a,{title:"Assign Device",titleStyle:{opacity:"0.56"},modal:!1,open:this.props.openAssign,onRequestClose:this.props.handleCloseAssign,contentStyle:{width:"70%",maxWidth:"none"},autoScrollBodyContent:!0},d.a.createElement("div",{className:"col-md-12"},d.a.createElement("div",{className:"row -py-sm"},d.a.createElement("div",{className:"col-12"},d.a.createElement("div",{className:"box p-y"},d.a.createElement("div",{className:"box-divider m-a-0"}),d.a.createElement("div",{className:"table-responsive"},d.a.createElement("table",{key:"",className:"table"},d.a.createElement("thead",{className:"success"},d.a.createElement("tr",null,d.a.createElement("th",null,"Sr. No"),d.a.createElement("th",null,"Device"),d.a.createElement("th",null,"Name"),d.a.createElement("th",null,"Informations"),d.a.createElement("th",null,"Status/Commments"),d.a.createElement("th",null,"Assign"))),d.a.createElement("tbody",null,t)))))))))}}]),t}(d.a.Component),I=a(41),P=a.n(I),M=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleAuditClick=function(e){a.setState({activeAuditId:e.id,activeItemName:e.machine_name})},a.handleAuditSubmit=function(e,t){var n=a.state.activeAudits.concat(e);a.setState({activeAudits:n}),P()("#modalAudit").modal("hide"),a.props.onAddAuditComment(e,t).then(function(e){a.props.onGetMyInventory()}).catch(function(){var t=b.a.filter(a.state.activeAudits,function(t){return t!==e});a.setState({activeAudits:t})}),a.setState({auditMsg:""})},a.state={user_id:[],status_message:"",openUnassigned:!1,openAssigned:!1,user_profile_detail:{},user_assign_machine:[],device:[],unassignDeviceList:[],activeAuditId:"",auditMsg:"",activeItemName:"",show_alert_message:!0,activeAudits:[]},a.props.onIsAlreadyLogin(),a.callUpdateUserDeviceDetails=a.callUpdateUserDeviceDetails.bind(Object(r.a)(Object(r.a)(a))),a.unassignDevice=a.unassignDevice.bind(Object(r.a)(Object(r.a)(a))),a.handleClose=a.handleClose.bind(Object(r.a)(Object(r.a)(a))),a.handleAddDialog=a.handleAddDialog.bind(Object(r.a)(Object(r.a)(a))),a.handleCloseAssign=a.handleCloseAssign.bind(Object(r.a)(Object(r.a)(a))),a.callAddUserComment=a.callAddUserComment.bind(Object(r.a)(Object(r.a)(a))),a.callAssignDevice=a.callAssignDevice.bind(Object(r.a)(Object(r.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.onUnassignDeviceList(),this.props.onMyProfileDetails(),this.props.onGetMyInventory()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=Object(v.e)(this.props.location.pathname,e.loggedUser);a.status&&"/my_inventory"!==a.redirectTo&&this.props.history.push(a.redirectTo),this.setState({user_profile_detail:e.myProfile.user_profile_detail,user_assign_machine:e.myProfile.myInventory,show_alert_message:!0}),e&&e.myProfile&&e.myProfile.myInventory&&b.a.map(e.myProfile.myInventory,function(e){e.audit_current_month_status.status||t.setState({show_alert_message:!1})})}},{key:"callUpdateUserDeviceDetails",value:function(e){this.props.onUpdateDeviceDetails(e)}},{key:"callAssignDevice",value:function(e){var t=this;this.props.onAssignDevice(e).then(function(e){t.props.onGetMyInventory(),Object(h.b)("Success!",e,"success")},function(e){Object(h.b)("Error!",e,"error")})}},{key:"unassignDevice",value:function(e){this.setState({openUnassigned:!0,status_message:"",device:e})}},{key:"handleClose",value:function(){this.setState({openUnassigned:!1,status_message:""})}},{key:"handleCloseAssign",value:function(){this.setState({openAssigned:!1,status_message:""})}},{key:"handleAddDialog",value:function(){this.setState({user_id:this.props.loggedUser.data.id,unassignDeviceList:this.props.unassignedDeviceList.unassignedDeviceList,openAssigned:!0,status_message:""})}},{key:"callAddUserComment",value:function(e){this.props.onAddUserComment(e),this.setState({openUnassigned:!1,status_message:""})}},{key:"render",value:function(){var e=this,t=this.state,a=t.auditMsg,n=t.activeAuditId,s=t.activeItemName,i=t.show_alert_message;return d.a.createElement("div",null,d.a.createElement(p.a,this.props),d.a.createElement("div",{id:"content",className:"app-content box-shadow-z0",role:"main"},d.a.createElement(g.a,Object.assign({pageTitle:"My Inventory"},this.props)),d.a.createElement("div",{id:"modalAudit",className:"modal","data-backdrop":"true"},d.a.createElement("div",{className:"modal-dialog modal-lg"},d.a.createElement("div",{className:"modal-content"},d.a.createElement("div",{className:"modal-header"},d.a.createElement("div",null,d.a.createElement("div",{className:"col-xs-11"},d.a.createElement("h5",{className:"modal-title"},"Audit of ",s)),d.a.createElement("div",{className:"col-xs-1"},d.a.createElement("button",{className:"btn btn-icon white","data-dismiss":"modal"},d.a.createElement("i",{className:"fa fa-remove"}))))),d.a.createElement("div",{className:"modal-body p-lg"},d.a.createElement("div",{className:"form-group row"},d.a.createElement("label",{className:"col-sm-2 form-control-label"},"Message"),d.a.createElement("div",{className:"col-sm-9"},d.a.createElement("small",{className:"text-red-np"},d.a.createElement("i",null,"Add a short description about inventory. Eg. Working fine, keys not working, etc.")),d.a.createElement("input",{type:"text",className:"form-control",value:a,onChange:function(t){return e.setState({auditMsg:t.target.value})},onKeyUp:function(t){13===t.keyCode&&""!=a&&e.handleAuditSubmit(n,a)},required:!0}),""===a?d.a.createElement("small",{className:"text-red-np"}," ","Please write something"):null)),d.a.createElement("div",{className:"form-group row m-t-md"},d.a.createElement("div",{className:"col-sm-10"},d.a.createElement("button",{className:"md-btn md-raised m-b-sm w-xs blue",onClick:function(){""!=a&&e.handleAuditSubmit(n,a)}},"Submit"))))))),d.a.createElement("div",{className:"app-body",id:"view"},d.a.createElement("div",{className:"padding"},d.a.createElement("div",{className:"row no-gutter"},i?null:d.a.createElement("div",{className:"col-xs-12 text-red bg-white"},d.a.createElement("h6",null,"Important:"),d.a.createElement("h6",null,"-Your monthly audit of inventories is pending."),d.a.createElement("h6",null,"-Click on Audit Pending button to do audit of an inventory."),d.a.createElement("h6",null,"-Once you are done with all the inventories you will be able to access rest of HR app."))),d.a.createElement(x,{handleCloseAssign:this.handleCloseAssign,openAssign:this.state.openAssigned,handleAddDialog:this.handleAddDialog,unassignDeviceList:this.state.unassignDeviceList,callAssignDevice:this.callAssignDevice,user_id:this.state.user_id,loggedUser:this.props.loggedUser}),d.a.createElement(C,{unassignDevice:this.unassignDevice,userAssignMachine:this.state.user_assign_machine,callUpdateUserDeviceDetails:this.callUpdateUserDeviceDetails,loggedUser:this.props.loggedUser,handleAuditClick:this.handleAuditClick,activeAuditId:this.state.activeAuditId,activeAudits:this.state.activeAudits,showPending:this.props.showPending})),d.a.createElement(S,{callAddUserComment:this.callAddUserComment,user_Id:this.state.user_profile_detail.user_Id,handleClose:this.handleClose,open:this.state.openUnassigned,device:this.state.device}))))}}]),t}(d.a.Component);var L=Object(u.a)(Object(m.b)(function(e){return{frontend:e.frontend.toJS(),loggedUser:e.logged_user.userLogin,myProfile:e.myProfile.toJS(),unassignedDeviceList:e.manageDevice.toJS(),showPending:e.myProfile.toJS().showPending}},function(e){return{onIsAlreadyLogin:function(){return e(w.isAlreadyLogin())},onAddAuditComment:function(t,a){return e(O.a(t,a))},onMyProfileDetails:function(){return e(O.c())},onUpdateDeviceDetails:function(t){return e()},onAddUserComment:function(t){return e(U.c(t))},onUnassignDeviceList:function(){return e(U.t())},onAssignDevice:function(t){return e(U.e(t))},onGetMyInventory:function(){return e(O.b())}}})(M));t.default=L}}]);
//# sourceMappingURL=57.a82de2a7.chunk.js.map