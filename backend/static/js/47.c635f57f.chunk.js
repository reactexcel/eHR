(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1166:function(e,t,a){"use strict";a.r(t);var n=a(26),r=a(27),s=a(29),l=a(28),c=a(30),o=a(0),i=a.n(o),u=a(129),h=a(262),m=a(36),d=a(4),p=a(45),y=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t=this;return this.props.healthData.attendance_rows&&(e=this.props.healthData.attendance_rows.map(function(e,a){return i.a.createElement("tr",{key:a},i.a.createElement("td",null,e.year),i.a.createElement("td",null,e.count),i.a.createElement("td",null,i.a.createElement("i",{className:"material-icons",title:"Delete",onClick:function(a){Object(p.a)("Are you sure ?","Do you want to delete this record ?","warning").then(function(a){a&&t.props.deleteHealthStats(e.year)})},"aria-hidden":"true"},"delete")))})),i.a.createElement("div",null,i.a.createElement("h5",null,"DB Health - Attendance Table"),i.a.createElement("table",{className:"table attendance-stats"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Year"),i.a.createElement("th",null,"Count"),i.a.createElement("th",null,"Action"))),i.a.createElement("tbody",null,e)))}}]),t}(i.a.Component),f=a(620),g=a(71),E=a.n(g),b=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).call(this))).handleChange=function(t){e.setState({appName:t.target.value})},e.handleAddClick=function(){e.props.healthStatsAddKeyRequest(e.state.appName),e.setState({appName:""})},e.state={appName:""},e}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t=this;return this.props.healthKeyData.app_info&&(e=this.props.healthKeyData.app_info.map(function(e,a){return i.a.createElement("tr",{key:a},i.a.createElement("td",null,a+1),i.a.createElement("td",null,e.app_name),i.a.createElement("td",null,e.secret_key),i.a.createElement("td",null,i.a.createElement("b",null,"Added on:")," ",E()(e.added_on).format("MMM Do YYYY, h:mm a")," ",i.a.createElement("br",null),e.last_request?i.a.createElement("span",null,i.a.createElement("b",null,"Last Requested at:")," ",E()(e.last_request).format("MMM Do YYYY, h:mm a")):null),i.a.createElement("td",null,i.a.createElement("i",{className:"material-icons stats-delete-icon",onClick:function(a){Object(p.a)("Are you sure ?","Do you want to delete this key ?","warning").then(function(a){a&&t.props.healthStatsDeleteKeyRequest(e.id)})},"aria-hidden":"true"},"delete")),i.a.createElement("td",null,i.a.createElement("i",{className:"material-icons stats-refresh-icon",onClick:function(a){Object(p.a)("Are you sure ?","Do you want to Regenerate the key ?","warning").then(function(a){a&&t.props.healthStatsRegenerateKeyRequest(e.id)})},"aria-hidden":"true"},"autorenew")))})),i.a.createElement("div",null,i.a.createElement("h5",null,"Third Party Api Key"),i.a.createElement("div",{className:"stats-add-icon-div"},i.a.createElement("i",{className:"material-icons stats-add-icon",onClick:function(){return t.handleAddClick()}},"add_box")),i.a.createElement("div",{className:"app-name-input-div"},i.a.createElement(f.a,{className:"app-name-input",placeHolder:"App Name",value:this.state.appName,onchange:this.handleChange})),i.a.createElement("table",{className:"table table-responsive secret-key-table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"App"),i.a.createElement("th",null,"Secret Key"),i.a.createElement("th",null,"Details"))),i.a.createElement("tbody",null,e)))}}]),t}(i.a.Component),v=(a(176),a(273)),S=a.n(v),j=a(10),O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).highChartRender=function(e){S.a.chart({chart:{height:"50%",type:"column",renderTo:"chart-container"},title:{text:""},credits:{enabled:!1},xAxis:{categories:Object.keys(e.data.data.stats.joining_termination_stats)},yAxis:{min:0,title:{text:"Total Employment %"}},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',shared:!0},plotOptions:{column:{stacking:"percent"}},series:[{name:"Joining",color:"#82E0AA",data:j.map(e.data.data.stats.joining_termination_stats,"joining")},{name:"Termination",color:"#F5B7B1",data:j.map(e.data.data.stats.joining_termination_stats,"termination")}]})},a.state={flag:!1},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillUpdate",value:function(e){this.state.flag||e&&e.data&&e.data.data&&e.data.data.stats&&(this.highChartRender(e),this.setState({flag:!0}))}},{key:"render",value:function(){return i.a.createElement("div",{id:"chart-container"})}}]),t}(i.a.Component),N=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).highChartRender=function(e){S.a.chart({chart:{type:"column",height:"50%",renderTo:"chart-container-leave"},title:{text:""},credits:{enabled:!1},xAxis:{categories:j.map(e,function(e){return"".concat(e.date," ").concat(e.day)})},yAxis:{min:0,title:{text:"Total Employment %"}},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',shared:!0},plotOptions:{column:{stacking:"percent"}},series:[{name:"Approved",color:"#69f0ae",data:j.map(e,"approved")},{name:"Pending",color:"#ffff00",data:j.map(e,"pending")},{name:"Rejected",color:"#f44336",data:j.map(e,"rejected")},{name:"Employees Present",color:"#98AEDA",data:j.map(e,function(e){return e.total_employees-e.approved})}]})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillUpdate",value:function(e){e.flag&&e&&e.data&&e.data.stats&&(this.highChartRender(j.filter(e.data.stats,function(e){return"WORKING_DAY"===e.day_type})),e.handleFlag())}},{key:"componentDidMount",value:function(){this.highChartRender()}},{key:"render",value:function(){return i.a.createElement("div",{id:"chart-container-leave"})}}]),t}(i.a.Component),D=a(37),k=a(178),A=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).onChange=function(e){"month"===e.target.name&&(a.setState({month:e.target.value}),a.props.requestStatsLeaveHistory({month:e.target.value,year:a.state.year})),"year"===e.target.name&&(a.setState({year:e.target.value}),a.props.requestStatsLeaveHistory({month:a.state.month,year:e.target.value}))},a.state={month:(new Date).getMonth()+1,year:(new Date).getYear()+1900},a.year=[],a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){this.props.onIsAlreadyLogin(),this.props.healthStatsRequest(),this.props.requestStatsHistory(),this.props.healthStatsKeyListRequest(),this.year=Object(D.d)(),this.props.requestStatsLeaveHistory({year:this.state.year,month:this.state.month})}},{key:"componentWillReceiveProps",value:function(e){var t=e.deleteHealthData,a=e.addSecretKeyData,n=e.deleteSecretKeyData,r=e.regenerateSecretKeyData;t.isError&&Object(p.b)("Error !",t.message,"error"),t.isSuccess&&Object(p.b)("Success !",t.message,"success"),a.isError&&Object(p.b)("Error !",a.message,"error"),a.isSuccess&&Object(p.b)("Success !",a.message,"success"),n.isError&&Object(p.b)("Error !",n.message,"error"),n.isSuccess&&Object(p.b)("Success !",n.message,"success"),r.isError&&Object(p.b)("Error !",r.message,"error"),r.isSuccess&&Object(p.b)("Success !",r.message,"success")}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(u.a,this.props),i.a.createElement("div",{id:"content",className:"app-content box-shadow-z0 content-health-stats",role:"main"},i.a.createElement(h.a,{pageTitle:"App Health & Stats",showLoading:this.props.frontend.show_loading}),i.a.createElement("div",{className:"app-body",id:"view"},i.a.createElement("div",{className:"padding"},i.a.createElement("div",{className:"row m-10"},i.a.createElement("div",{className:"col-sm-12 bg-white"},i.a.createElement(y,this.props))),i.a.createElement("div",{className:"row m-10"},i.a.createElement("div",{className:"col-sm-12 secret-key-block"},i.a.createElement(b,this.props))),i.a.createElement("div",{className:"row m-10"},i.a.createElement("div",{className:"col-sm-6 b-health-stats bg-white"},i.a.createElement("h5",null,"Recruitment Stats"),i.a.createElement(O,{data:this.props.statsHistory})),i.a.createElement("div",{className:"col-sm-6 b2-health-stats bg-white"},i.a.createElement("div",{className:"row leave_stats"},i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("h5",null,"Leave Stats")),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("select",{className:"form-control",onChange:this.onChange,value:this.state.year,name:"year"},this.year.map(function(e,t){return i.a.createElement("option",{key:t,value:e},e)}))),i.a.createElement("div",{className:"col-sm-3"},i.a.createElement("select",{className:"form-control",onChange:this.onChange,value:this.state.month,name:"month"},Object(k.a)().months.map(function(e,t){return i.a.createElement("option",{key:t,value:t+1},e)})))),i.a.createElement(N,{data:this.props.statsLeaveHistory.data,flag:this.props.statsLeaveHistory.flag,handleFlag:this.props.updateFlag})))))))}}]),t}(i.a.Component);t.default=Object(m.b)(function(e){return{frontend:e.frontend.toJS(),loggedUser:e.logged_user.userLogin,healthData:e.healthstats.healthStats.data,deleteHealthData:e.healthstats.deleteHealthStats,statsHistory:e.healthstats.statsHistory,healthKeyData:e.healthstats.healthStatsSecretKeyList.data,addSecretKeyData:e.healthstats.healthStatsAddSecretKey,deleteSecretKeyData:e.healthstats.healthStatsDeleteSecretKey,regenerateSecretKeyData:e.healthstats.healthStatsRegenerateSecretKey,statsLeaveHistory:e.healthstats.statsLeaveHistory}},function(e){return{onIsAlreadyLogin:function(){return e(d.isAlreadyLogin())},healthStatsRequest:function(){return e(d.requestHealthStats())},deleteHealthStats:function(t){return e(d.requestDeleteHealthStats(t))},requestStatsHistory:function(){return e(d.requestStatsHistory())},healthStatsKeyListRequest:function(){return e(d.requestHealthStatsSecretKeyList())},healthStatsAddKeyRequest:function(t){return e(d.requestHealthStatsAddSecretKey(t))},healthStatsDeleteKeyRequest:function(t){return e(d.requestHealthStatsDeleteSecretKey(t))},healthStatsRegenerateKeyRequest:function(t){return e(d.requestHealthStatsRegenerateSecretKey(t))},requestStatsLeaveHistory:function(t){return e(d.requestStatsLeaveHistory(t))},updateFlag:function(){return e(d.updateFlag())}}})(A)},620:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t=e.className,a=e.ref,n=e.placeHolder,s=e.onchange,l=e.id,c=e.name,o=e.value,i=e.style,u="form-control "+t;return r.a.createElement("input",{type:"text",className:u,ref:a,placeholder:n,onChange:s,id:l,required:!0,name:c,value:o,style:i})}}}]);
//# sourceMappingURL=47.c635f57f.chunk.js.map